function yT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function vT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tv={exports:{}},Xc={},Nv={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To=Symbol.for("react.element"),xT=Symbol.for("react.portal"),_T=Symbol.for("react.fragment"),wT=Symbol.for("react.strict_mode"),ET=Symbol.for("react.profiler"),TT=Symbol.for("react.provider"),NT=Symbol.for("react.context"),CT=Symbol.for("react.forward_ref"),ST=Symbol.for("react.suspense"),IT=Symbol.for("react.memo"),bT=Symbol.for("react.lazy"),Eg=Symbol.iterator;function AT(t){return t===null||typeof t!="object"?null:(t=Eg&&t[Eg]||t["@@iterator"],typeof t=="function"?t:null)}var Cv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Sv=Object.assign,Iv={};function Di(t,e,n){this.props=t,this.context=e,this.refs=Iv,this.updater=n||Cv}Di.prototype.isReactComponent={};Di.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Di.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function bv(){}bv.prototype=Di.prototype;function Sf(t,e,n){this.props=t,this.context=e,this.refs=Iv,this.updater=n||Cv}var If=Sf.prototype=new bv;If.constructor=Sf;Sv(If,Di.prototype);If.isPureReactComponent=!0;var Tg=Array.isArray,Av=Object.prototype.hasOwnProperty,bf={current:null},Pv={key:!0,ref:!0,__self:!0,__source:!0};function kv(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Av.call(e,r)&&!Pv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:To,type:t,key:i,ref:a,props:s,_owner:bf.current}}function PT(t,e){return{$$typeof:To,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Af(t){return typeof t=="object"&&t!==null&&t.$$typeof===To}function kT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ng=/\/+/g;function cd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?kT(""+t.key):e.toString(36)}function Pl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case To:case xT:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+cd(a,0):r,Tg(s)?(n="",t!=null&&(n=t.replace(Ng,"$&/")+"/"),Pl(s,e,n,"",function(d){return d})):s!=null&&(Af(s)&&(s=PT(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Ng,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Tg(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+cd(i,c);a+=Pl(i,e,n,u,s)}else if(u=AT(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+cd(i,c++),a+=Pl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function ol(t,e,n){if(t==null)return t;var r=[],s=0;return Pl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function jT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _t={current:null},kl={transition:null},RT={ReactCurrentDispatcher:_t,ReactCurrentBatchConfig:kl,ReactCurrentOwner:bf};function jv(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:ol,forEach:function(t,e,n){ol(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ol(t,function(){e++}),e},toArray:function(t){return ol(t,function(e){return e})||[]},only:function(t){if(!Af(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Di;re.Fragment=_T;re.Profiler=ET;re.PureComponent=Sf;re.StrictMode=wT;re.Suspense=ST;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RT;re.act=jv;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Sv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=bf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Av.call(e,u)&&!Pv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:To,type:t.type,key:s,ref:i,props:r,_owner:a}};re.createContext=function(t){return t={$$typeof:NT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TT,_context:t},t.Consumer=t};re.createElement=kv;re.createFactory=function(t){var e=kv.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:CT,render:t}};re.isValidElement=Af;re.lazy=function(t){return{$$typeof:bT,_payload:{_status:-1,_result:t},_init:jT}};re.memo=function(t,e){return{$$typeof:IT,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=kl.transition;kl.transition={};try{t()}finally{kl.transition=e}};re.unstable_act=jv;re.useCallback=function(t,e){return _t.current.useCallback(t,e)};re.useContext=function(t){return _t.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return _t.current.useDeferredValue(t)};re.useEffect=function(t,e){return _t.current.useEffect(t,e)};re.useId=function(){return _t.current.useId()};re.useImperativeHandle=function(t,e,n){return _t.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return _t.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return _t.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return _t.current.useMemo(t,e)};re.useReducer=function(t,e,n){return _t.current.useReducer(t,e,n)};re.useRef=function(t){return _t.current.useRef(t)};re.useState=function(t){return _t.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return _t.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return _t.current.useTransition()};re.version="18.3.1";Nv.exports=re;var V=Nv.exports;const Rv=vT(V),DT=yT({__proto__:null,default:Rv},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT=V,OT=Symbol.for("react.element"),VT=Symbol.for("react.fragment"),LT=Object.prototype.hasOwnProperty,FT=MT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,UT={key:!0,ref:!0,__self:!0,__source:!0};function Dv(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)LT.call(e,r)&&!UT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:OT,type:t,key:i,ref:a,props:s,_owner:FT.current}}Xc.Fragment=VT;Xc.jsx=Dv;Xc.jsxs=Dv;Tv.exports=Xc;var o=Tv.exports,Kd={},Mv={exports:{}},Ot={},Ov={exports:{}},Vv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var ne=B.length;B.push(Y);e:for(;0<ne;){var xe=ne-1>>>1,de=B[xe];if(0<s(de,Y))B[xe]=Y,B[ne]=de,ne=xe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],ne=B.pop();if(ne!==Y){B[0]=ne;e:for(var xe=0,de=B.length,Ce=de>>>1;xe<Ce;){var Sn=2*(xe+1)-1,In=B[Sn],bn=Sn+1,ln=B[bn];if(0>s(In,ne))bn<de&&0>s(ln,In)?(B[xe]=ln,B[bn]=ne,xe=bn):(B[xe]=In,B[Sn]=ne,xe=Sn);else if(bn<de&&0>s(ln,ne))B[xe]=ln,B[bn]=ne,xe=bn;else break e}}return Y}function s(B,Y){var ne=B.sortIndex-Y.sortIndex;return ne!==0?ne:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,m=null,g=3,v=!1,b=!1,P=!1,k=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(d)}}function j(B){if(P=!1,w(B),!b)if(n(u)!==null)b=!0,se(O);else{var Y=n(d);Y!==null&&Te(j,Y.startTime-B)}}function O(B,Y){b=!1,P&&(P=!1,S(y),y=-1),v=!0;var ne=g;try{for(w(Y),m=n(u);m!==null&&(!(m.expirationTime>Y)||B&&!I());){var xe=m.callback;if(typeof xe=="function"){m.callback=null,g=m.priorityLevel;var de=xe(m.expirationTime<=Y);Y=t.unstable_now(),typeof de=="function"?m.callback=de:m===n(u)&&r(u),w(Y)}else r(u);m=n(u)}if(m!==null)var Ce=!0;else{var Sn=n(d);Sn!==null&&Te(j,Sn.startTime-Y),Ce=!1}return Ce}finally{m=null,g=ne,v=!1}}var U=!1,A=null,y=-1,N=5,C=-1;function I(){return!(t.unstable_now()-C<N)}function _(){if(A!==null){var B=t.unstable_now();C=B;var Y=!0;try{Y=A(!0,B)}finally{Y?T():(U=!1,A=null)}}else U=!1}var T;if(typeof x=="function")T=function(){x(_)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,G=D.port2;D.port1.onmessage=_,T=function(){G.postMessage(null)}}else T=function(){k(_,0)};function se(B){A=B,U||(U=!0,T())}function Te(B,Y){y=k(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){b||v||(b=!0,se(O))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(g){case 1:case 2:case 3:var Y=3;break;default:Y=g}var ne=g;g=Y;try{return B()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ne=g;g=B;try{return Y()}finally{g=ne}},t.unstable_scheduleCallback=function(B,Y,ne){var xe=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?xe+ne:xe):ne=xe,B){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ne+de,B={id:f++,callback:Y,priorityLevel:B,startTime:ne,expirationTime:de,sortIndex:-1},ne>xe?(B.sortIndex=ne,e(d,B),n(u)===null&&B===n(d)&&(P?(S(y),y=-1):P=!0,Te(j,ne-xe))):(B.sortIndex=de,e(u,B),b||v||(b=!0,se(O))),B},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(B){var Y=g;return function(){var ne=g;g=Y;try{return B.apply(this,arguments)}finally{g=ne}}}})(Vv);Ov.exports=Vv;var $T=Ov.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zT=V,Mt=$T;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Lv=new Set,Wa={};function Ss(t,e){yi(t,e),yi(t+"Capture",e)}function yi(t,e){for(Wa[t]=e,t=0;t<e.length;t++)Lv.add(e[t])}var Un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yd=Object.prototype.hasOwnProperty,BT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cg={},Sg={};function qT(t){return Yd.call(Sg,t)?!0:Yd.call(Cg,t)?!1:BT.test(t)?Sg[t]=!0:(Cg[t]=!0,!1)}function WT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function HT(t,e,n,r){if(e===null||typeof e>"u"||WT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new wt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new wt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new wt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new wt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new wt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new wt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new wt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new wt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new wt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pf=/[\-:]([a-z])/g;function kf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pf,kf);nt[e]=new wt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pf,kf);nt[e]=new wt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pf,kf);nt[e]=new wt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new wt(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new wt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new wt(t,1,!1,t.toLowerCase(),null,!0,!0)});function jf(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(HT(e,n,s,r)&&(n=null),r||s===null?qT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=zT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ll=Symbol.for("react.element"),Ws=Symbol.for("react.portal"),Hs=Symbol.for("react.fragment"),Rf=Symbol.for("react.strict_mode"),Xd=Symbol.for("react.profiler"),Fv=Symbol.for("react.provider"),Uv=Symbol.for("react.context"),Df=Symbol.for("react.forward_ref"),Jd=Symbol.for("react.suspense"),Zd=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),$v=Symbol.for("react.offscreen"),Ig=Symbol.iterator;function la(t){return t===null||typeof t!="object"?null:(t=Ig&&t[Ig]||t["@@iterator"],typeof t=="function"?t:null)}var Ae=Object.assign,ud;function _a(t){if(ud===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ud=e&&e[1]||""}return`
`+ud+t}var dd=!1;function hd(t,e){if(!t||dd)return"";dd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{dd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_a(t):""}function QT(t){switch(t.tag){case 5:return _a(t.type);case 16:return _a("Lazy");case 13:return _a("Suspense");case 19:return _a("SuspenseList");case 0:case 2:case 15:return t=hd(t.type,!1),t;case 11:return t=hd(t.type.render,!1),t;case 1:return t=hd(t.type,!0),t;default:return""}}function eh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Hs:return"Fragment";case Ws:return"Portal";case Xd:return"Profiler";case Rf:return"StrictMode";case Jd:return"Suspense";case Zd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Uv:return(t.displayName||"Context")+".Consumer";case Fv:return(t._context.displayName||"Context")+".Provider";case Df:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mf:return e=t.displayName||null,e!==null?e:eh(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return eh(t(e))}catch{}}return null}function GT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return eh(e);case 8:return e===Rf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Rr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function KT(t){var e=zv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cl(t){t._valueTracker||(t._valueTracker=KT(t))}function Bv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function th(t,e){var n=e.checked;return Ae({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Rr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function qv(t,e){e=e.checked,e!=null&&jf(t,"checked",e,!1)}function nh(t,e){qv(t,e);var n=Rr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rh(t,e.type,n):e.hasOwnProperty("defaultValue")&&rh(t,e.type,Rr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ag(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rh(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wa=Array.isArray;function ii(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Rr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ae({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Pg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(wa(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Rr(n)}}function Wv(t,e){var n=Rr(e.value),r=Rr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function kg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Hv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ih(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Hv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ul,Qv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ul=ul||document.createElement("div"),ul.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ul.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ha(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Pa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YT=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(t){YT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pa[e]=Pa[t]})});function Gv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Pa.hasOwnProperty(t)&&Pa[t]?(""+e).trim():e+"px"}function Kv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Gv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var XT=Ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ah(t,e){if(e){if(XT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lh=null;function Of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ch=null,ai=null,oi=null;function jg(t){if(t=So(t)){if(typeof ch!="function")throw Error(z(280));var e=t.stateNode;e&&(e=nu(e),ch(t.stateNode,t.type,e))}}function Yv(t){ai?oi?oi.push(t):oi=[t]:ai=t}function Xv(){if(ai){var t=ai,e=oi;if(oi=ai=null,jg(t),e)for(t=0;t<e.length;t++)jg(e[t])}}function Jv(t,e){return t(e)}function Zv(){}var fd=!1;function ex(t,e,n){if(fd)return t(e,n);fd=!0;try{return Jv(t,e,n)}finally{fd=!1,(ai!==null||oi!==null)&&(Zv(),Xv())}}function Qa(t,e){var n=t.stateNode;if(n===null)return null;var r=nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var uh=!1;if(Un)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){uh=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{uh=!1}function JT(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ka=!1,Zl=null,ec=!1,dh=null,ZT={onError:function(t){ka=!0,Zl=t}};function eN(t,e,n,r,s,i,a,c,u){ka=!1,Zl=null,JT.apply(ZT,arguments)}function tN(t,e,n,r,s,i,a,c,u){if(eN.apply(this,arguments),ka){if(ka){var d=Zl;ka=!1,Zl=null}else throw Error(z(198));ec||(ec=!0,dh=d)}}function Is(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function tx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rg(t){if(Is(t)!==t)throw Error(z(188))}function nN(t){var e=t.alternate;if(!e){if(e=Is(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Rg(s),t;if(i===r)return Rg(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function nx(t){return t=nN(t),t!==null?rx(t):null}function rx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=rx(t);if(e!==null)return e;t=t.sibling}return null}var sx=Mt.unstable_scheduleCallback,Dg=Mt.unstable_cancelCallback,rN=Mt.unstable_shouldYield,sN=Mt.unstable_requestPaint,De=Mt.unstable_now,iN=Mt.unstable_getCurrentPriorityLevel,Vf=Mt.unstable_ImmediatePriority,ix=Mt.unstable_UserBlockingPriority,tc=Mt.unstable_NormalPriority,aN=Mt.unstable_LowPriority,ax=Mt.unstable_IdlePriority,Jc=null,gn=null;function oN(t){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Jc,t,void 0,(t.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:uN,lN=Math.log,cN=Math.LN2;function uN(t){return t>>>=0,t===0?32:31-(lN(t)/cN|0)|0}var dl=64,hl=4194304;function Ea(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=Ea(c):(i&=a,i!==0&&(r=Ea(i)))}else a=n&~s,a!==0?r=Ea(a):i!==0&&(r=Ea(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-tn(e),s=1<<n,r|=t[n],e&=~s;return r}function dN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-tn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=dN(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function hh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ox(){var t=dl;return dl<<=1,!(dl&4194240)&&(dl=64),t}function md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function No(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-tn(e),t[e]=n}function fN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-tn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Lf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-tn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var me=0;function lx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cx,Ff,ux,dx,hx,fh=!1,fl=[],yr=null,vr=null,xr=null,Ga=new Map,Ka=new Map,or=[],mN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mg(t,e){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Ga.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ka.delete(e.pointerId)}}function ua(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=So(e),e!==null&&Ff(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function pN(t,e,n,r,s){switch(e){case"focusin":return yr=ua(yr,t,e,n,r,s),!0;case"dragenter":return vr=ua(vr,t,e,n,r,s),!0;case"mouseover":return xr=ua(xr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ga.set(i,ua(Ga.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Ka.set(i,ua(Ka.get(i)||null,t,e,n,r,s)),!0}return!1}function fx(t){var e=is(t.target);if(e!==null){var n=Is(e);if(n!==null){if(e=n.tag,e===13){if(e=tx(n),e!==null){t.blockedOn=e,hx(t.priority,function(){ux(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lh=r,n.target.dispatchEvent(r),lh=null}else return e=So(n),e!==null&&Ff(e),t.blockedOn=n,!1;e.shift()}return!0}function Og(t,e,n){jl(t)&&n.delete(e)}function gN(){fh=!1,yr!==null&&jl(yr)&&(yr=null),vr!==null&&jl(vr)&&(vr=null),xr!==null&&jl(xr)&&(xr=null),Ga.forEach(Og),Ka.forEach(Og)}function da(t,e){t.blockedOn===e&&(t.blockedOn=null,fh||(fh=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,gN)))}function Ya(t){function e(s){return da(s,t)}if(0<fl.length){da(fl[0],t);for(var n=1;n<fl.length;n++){var r=fl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yr!==null&&da(yr,t),vr!==null&&da(vr,t),xr!==null&&da(xr,t),Ga.forEach(e),Ka.forEach(e),n=0;n<or.length;n++)r=or[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)fx(n),n.blockedOn===null&&or.shift()}var li=Yn.ReactCurrentBatchConfig,rc=!0;function yN(t,e,n,r){var s=me,i=li.transition;li.transition=null;try{me=1,Uf(t,e,n,r)}finally{me=s,li.transition=i}}function vN(t,e,n,r){var s=me,i=li.transition;li.transition=null;try{me=4,Uf(t,e,n,r)}finally{me=s,li.transition=i}}function Uf(t,e,n,r){if(rc){var s=mh(t,e,n,r);if(s===null)Nd(t,e,r,sc,n),Mg(t,r);else if(pN(s,t,e,n,r))r.stopPropagation();else if(Mg(t,r),e&4&&-1<mN.indexOf(t)){for(;s!==null;){var i=So(s);if(i!==null&&cx(i),i=mh(t,e,n,r),i===null&&Nd(t,e,r,sc,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Nd(t,e,r,null,n)}}var sc=null;function mh(t,e,n,r){if(sc=null,t=Of(r),t=is(t),t!==null)if(e=Is(t),e===null)t=null;else if(n=e.tag,n===13){if(t=tx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return sc=t,null}function mx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iN()){case Vf:return 1;case ix:return 4;case tc:case aN:return 16;case ax:return 536870912;default:return 16}default:return 16}}var fr=null,$f=null,Rl=null;function px(){if(Rl)return Rl;var t,e=$f,n=e.length,r,s="value"in fr?fr.value:fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Rl=s.slice(t,1<r?1-r:void 0)}function Dl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ml(){return!0}function Vg(){return!1}function Vt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ml:Vg,this.isPropagationStopped=Vg,this}return Ae(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),e}var Mi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zf=Vt(Mi),Co=Ae({},Mi,{view:0,detail:0}),xN=Vt(Co),pd,gd,ha,Zc=Ae({},Co,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ha&&(ha&&t.type==="mousemove"?(pd=t.screenX-ha.screenX,gd=t.screenY-ha.screenY):gd=pd=0,ha=t),pd)},movementY:function(t){return"movementY"in t?t.movementY:gd}}),Lg=Vt(Zc),_N=Ae({},Zc,{dataTransfer:0}),wN=Vt(_N),EN=Ae({},Co,{relatedTarget:0}),yd=Vt(EN),TN=Ae({},Mi,{animationName:0,elapsedTime:0,pseudoElement:0}),NN=Vt(TN),CN=Ae({},Mi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),SN=Vt(CN),IN=Ae({},Mi,{data:0}),Fg=Vt(IN),bN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},AN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=PN[t])?!!e[t]:!1}function Bf(){return kN}var jN=Ae({},Co,{key:function(t){if(t.key){var e=bN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Dl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?AN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(t){return t.type==="keypress"?Dl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Dl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RN=Vt(jN),DN=Ae({},Zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ug=Vt(DN),MN=Ae({},Co,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),ON=Vt(MN),VN=Ae({},Mi,{propertyName:0,elapsedTime:0,pseudoElement:0}),LN=Vt(VN),FN=Ae({},Zc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UN=Vt(FN),$N=[9,13,27,32],qf=Un&&"CompositionEvent"in window,ja=null;Un&&"documentMode"in document&&(ja=document.documentMode);var zN=Un&&"TextEvent"in window&&!ja,gx=Un&&(!qf||ja&&8<ja&&11>=ja),$g=String.fromCharCode(32),zg=!1;function yx(t,e){switch(t){case"keyup":return $N.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qs=!1;function BN(t,e){switch(t){case"compositionend":return vx(e);case"keypress":return e.which!==32?null:(zg=!0,$g);case"textInput":return t=e.data,t===$g&&zg?null:t;default:return null}}function qN(t,e){if(Qs)return t==="compositionend"||!qf&&yx(t,e)?(t=px(),Rl=$f=fr=null,Qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gx&&e.locale!=="ko"?null:e.data;default:return null}}var WN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WN[t.type]:e==="textarea"}function xx(t,e,n,r){Yv(r),e=ic(e,"onChange"),0<e.length&&(n=new zf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ra=null,Xa=null;function HN(t){Px(t,0)}function eu(t){var e=Ys(t);if(Bv(e))return t}function QN(t,e){if(t==="change")return e}var _x=!1;if(Un){var vd;if(Un){var xd="oninput"in document;if(!xd){var qg=document.createElement("div");qg.setAttribute("oninput","return;"),xd=typeof qg.oninput=="function"}vd=xd}else vd=!1;_x=vd&&(!document.documentMode||9<document.documentMode)}function Wg(){Ra&&(Ra.detachEvent("onpropertychange",wx),Xa=Ra=null)}function wx(t){if(t.propertyName==="value"&&eu(Xa)){var e=[];xx(e,Xa,t,Of(t)),ex(HN,e)}}function GN(t,e,n){t==="focusin"?(Wg(),Ra=e,Xa=n,Ra.attachEvent("onpropertychange",wx)):t==="focusout"&&Wg()}function KN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(Xa)}function YN(t,e){if(t==="click")return eu(e)}function XN(t,e){if(t==="input"||t==="change")return eu(e)}function JN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sn=typeof Object.is=="function"?Object.is:JN;function Ja(t,e){if(sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Yd.call(e,s)||!sn(t[s],e[s]))return!1}return!0}function Hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qg(t,e){var n=Hg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hg(n)}}function Ex(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ex(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Tx(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function Wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ZN(t){var e=Tx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ex(n.ownerDocument.documentElement,n)){if(r!==null&&Wf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Qg(n,i);var a=Qg(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var eC=Un&&"documentMode"in document&&11>=document.documentMode,Gs=null,ph=null,Da=null,gh=!1;function Gg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gh||Gs==null||Gs!==Jl(r)||(r=Gs,"selectionStart"in r&&Wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Da&&Ja(Da,r)||(Da=r,r=ic(ph,"onSelect"),0<r.length&&(e=new zf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Gs)))}function pl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ks={animationend:pl("Animation","AnimationEnd"),animationiteration:pl("Animation","AnimationIteration"),animationstart:pl("Animation","AnimationStart"),transitionend:pl("Transition","TransitionEnd")},_d={},Nx={};Un&&(Nx=document.createElement("div").style,"AnimationEvent"in window||(delete Ks.animationend.animation,delete Ks.animationiteration.animation,delete Ks.animationstart.animation),"TransitionEvent"in window||delete Ks.transitionend.transition);function tu(t){if(_d[t])return _d[t];if(!Ks[t])return t;var e=Ks[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Nx)return _d[t]=e[n];return t}var Cx=tu("animationend"),Sx=tu("animationiteration"),Ix=tu("animationstart"),bx=tu("transitionend"),Ax=new Map,Kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(t,e){Ax.set(t,e),Ss(e,[t])}for(var wd=0;wd<Kg.length;wd++){var Ed=Kg[wd],tC=Ed.toLowerCase(),nC=Ed[0].toUpperCase()+Ed.slice(1);zr(tC,"on"+nC)}zr(Cx,"onAnimationEnd");zr(Sx,"onAnimationIteration");zr(Ix,"onAnimationStart");zr("dblclick","onDoubleClick");zr("focusin","onFocus");zr("focusout","onBlur");zr(bx,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Yg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tN(r,e,void 0,t),t.currentTarget=null}function Px(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;Yg(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;Yg(s,c,d),i=u}}}if(ec)throw t=dh,ec=!1,dh=null,t}function we(t,e){var n=e[wh];n===void 0&&(n=e[wh]=new Set);var r=t+"__bubble";n.has(r)||(kx(e,t,2,!1),n.add(r))}function Td(t,e,n){var r=0;e&&(r|=4),kx(n,t,r,e)}var gl="_reactListening"+Math.random().toString(36).slice(2);function Za(t){if(!t[gl]){t[gl]=!0,Lv.forEach(function(n){n!=="selectionchange"&&(rC.has(n)||Td(n,!1,t),Td(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[gl]||(e[gl]=!0,Td("selectionchange",!1,e))}}function kx(t,e,n,r){switch(mx(e)){case 1:var s=yN;break;case 4:s=vN;break;default:s=Uf}n=s.bind(null,e,n,t),s=void 0,!uh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Nd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=is(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}ex(function(){var d=i,f=Of(n),m=[];e:{var g=Ax.get(t);if(g!==void 0){var v=zf,b=t;switch(t){case"keypress":if(Dl(n)===0)break e;case"keydown":case"keyup":v=RN;break;case"focusin":b="focus",v=yd;break;case"focusout":b="blur",v=yd;break;case"beforeblur":case"afterblur":v=yd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=wN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=ON;break;case Cx:case Sx:case Ix:v=NN;break;case bx:v=LN;break;case"scroll":v=xN;break;case"wheel":v=UN;break;case"copy":case"cut":case"paste":v=SN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ug}var P=(e&4)!==0,k=!P&&t==="scroll",S=P?g!==null?g+"Capture":null:g;P=[];for(var x=d,w;x!==null;){w=x;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,S!==null&&(j=Qa(x,S),j!=null&&P.push(eo(x,j,w)))),k)break;x=x.return}0<P.length&&(g=new v(g,b,null,n,f),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==lh&&(b=n.relatedTarget||n.fromElement)&&(is(b)||b[$n]))break e;if((v||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,v?(b=n.relatedTarget||n.toElement,v=d,b=b?is(b):null,b!==null&&(k=Is(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(v=null,b=d),v!==b)){if(P=Lg,j="onMouseLeave",S="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(P=Ug,j="onPointerLeave",S="onPointerEnter",x="pointer"),k=v==null?g:Ys(v),w=b==null?g:Ys(b),g=new P(j,x+"leave",v,n,f),g.target=k,g.relatedTarget=w,j=null,is(f)===d&&(P=new P(S,x+"enter",b,n,f),P.target=w,P.relatedTarget=k,j=P),k=j,v&&b)t:{for(P=v,S=b,x=0,w=P;w;w=Vs(w))x++;for(w=0,j=S;j;j=Vs(j))w++;for(;0<x-w;)P=Vs(P),x--;for(;0<w-x;)S=Vs(S),w--;for(;x--;){if(P===S||S!==null&&P===S.alternate)break t;P=Vs(P),S=Vs(S)}P=null}else P=null;v!==null&&Xg(m,g,v,P,!1),b!==null&&k!==null&&Xg(m,k,b,P,!0)}}e:{if(g=d?Ys(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var O=QN;else if(Bg(g))if(_x)O=XN;else{O=KN;var U=GN}else(v=g.nodeName)&&v.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=YN);if(O&&(O=O(t,d))){xx(m,O,n,f);break e}U&&U(t,g,d),t==="focusout"&&(U=g._wrapperState)&&U.controlled&&g.type==="number"&&rh(g,"number",g.value)}switch(U=d?Ys(d):window,t){case"focusin":(Bg(U)||U.contentEditable==="true")&&(Gs=U,ph=d,Da=null);break;case"focusout":Da=ph=Gs=null;break;case"mousedown":gh=!0;break;case"contextmenu":case"mouseup":case"dragend":gh=!1,Gg(m,n,f);break;case"selectionchange":if(eC)break;case"keydown":case"keyup":Gg(m,n,f)}var A;if(qf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Qs?yx(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(gx&&n.locale!=="ko"&&(Qs||y!=="onCompositionStart"?y==="onCompositionEnd"&&Qs&&(A=px()):(fr=f,$f="value"in fr?fr.value:fr.textContent,Qs=!0)),U=ic(d,y),0<U.length&&(y=new Fg(y,t,null,n,f),m.push({event:y,listeners:U}),A?y.data=A:(A=vx(n),A!==null&&(y.data=A)))),(A=zN?BN(t,n):qN(t,n))&&(d=ic(d,"onBeforeInput"),0<d.length&&(f=new Fg("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=A))}Px(m,e)})}function eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qa(t,n),i!=null&&r.unshift(eo(t,i,s)),i=Qa(t,e),i!=null&&r.push(eo(t,i,s))),t=t.return}return r}function Vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xg(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Qa(n,i),u!=null&&a.unshift(eo(n,u,c))):s||(u=Qa(n,i),u!=null&&a.push(eo(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var sC=/\r\n?/g,iC=/\u0000|\uFFFD/g;function Jg(t){return(typeof t=="string"?t:""+t).replace(sC,`
`).replace(iC,"")}function yl(t,e,n){if(e=Jg(e),Jg(t)!==e&&n)throw Error(z(425))}function ac(){}var yh=null,vh=null;function xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _h=typeof setTimeout=="function"?setTimeout:void 0,aC=typeof clearTimeout=="function"?clearTimeout:void 0,Zg=typeof Promise=="function"?Promise:void 0,oC=typeof queueMicrotask=="function"?queueMicrotask:typeof Zg<"u"?function(t){return Zg.resolve(null).then(t).catch(lC)}:_h;function lC(t){setTimeout(function(){throw t})}function Cd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Ya(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Ya(e)}function _r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ey(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Oi=Math.random().toString(36).slice(2),hn="__reactFiber$"+Oi,to="__reactProps$"+Oi,$n="__reactContainer$"+Oi,wh="__reactEvents$"+Oi,cC="__reactListeners$"+Oi,uC="__reactHandles$"+Oi;function is(t){var e=t[hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ey(t);t!==null;){if(n=t[hn])return n;t=ey(t)}return e}t=n,n=t.parentNode}return null}function So(t){return t=t[hn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function nu(t){return t[to]||null}var Eh=[],Xs=-1;function Br(t){return{current:t}}function Ee(t){0>Xs||(t.current=Eh[Xs],Eh[Xs]=null,Xs--)}function ve(t,e){Xs++,Eh[Xs]=t.current,t.current=e}var Dr={},mt=Br(Dr),It=Br(!1),ms=Dr;function vi(t,e){var n=t.type.contextTypes;if(!n)return Dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function oc(){Ee(It),Ee(mt)}function ty(t,e,n){if(mt.current!==Dr)throw Error(z(168));ve(mt,e),ve(It,n)}function jx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,GT(t)||"Unknown",s));return Ae({},n,r)}function lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,ms=mt.current,ve(mt,t),ve(It,It.current),!0}function ny(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=jx(t,e,ms),r.__reactInternalMemoizedMergedChildContext=t,Ee(It),Ee(mt),ve(mt,t)):Ee(It),ve(It,n)}var jn=null,ru=!1,Sd=!1;function Rx(t){jn===null?jn=[t]:jn.push(t)}function dC(t){ru=!0,Rx(t)}function qr(){if(!Sd&&jn!==null){Sd=!0;var t=0,e=me;try{var n=jn;for(me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,ru=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),sx(Vf,qr),s}finally{me=e,Sd=!1}}return null}var Js=[],Zs=0,cc=null,uc=0,Ft=[],Ut=0,ps=null,Rn=1,Dn="";function es(t,e){Js[Zs++]=uc,Js[Zs++]=cc,cc=t,uc=e}function Dx(t,e,n){Ft[Ut++]=Rn,Ft[Ut++]=Dn,Ft[Ut++]=ps,ps=t;var r=Rn;t=Dn;var s=32-tn(r)-1;r&=~(1<<s),n+=1;var i=32-tn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Rn=1<<32-tn(e)+s|n<<s|r,Dn=i+t}else Rn=1<<i|n<<s|r,Dn=t}function Hf(t){t.return!==null&&(es(t,1),Dx(t,1,0))}function Qf(t){for(;t===cc;)cc=Js[--Zs],Js[Zs]=null,uc=Js[--Zs],Js[Zs]=null;for(;t===ps;)ps=Ft[--Ut],Ft[Ut]=null,Dn=Ft[--Ut],Ft[Ut]=null,Rn=Ft[--Ut],Ft[Ut]=null}var Dt=null,jt=null,Ne=!1,Xt=null;function Mx(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ry(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,jt=_r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:Rn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,jt=null,!0):!1;default:return!1}}function Th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nh(t){if(Ne){var e=jt;if(e){var n=e;if(!ry(t,e)){if(Th(t))throw Error(z(418));e=_r(n.nextSibling);var r=Dt;e&&ry(t,e)?Mx(r,n):(t.flags=t.flags&-4097|2,Ne=!1,Dt=t)}}else{if(Th(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ne=!1,Dt=t}}}function sy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function vl(t){if(t!==Dt)return!1;if(!Ne)return sy(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xh(t.type,t.memoizedProps)),e&&(e=jt)){if(Th(t))throw Ox(),Error(z(418));for(;e;)Mx(t,e),e=_r(e.nextSibling)}if(sy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){jt=_r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}jt=null}}else jt=Dt?_r(t.stateNode.nextSibling):null;return!0}function Ox(){for(var t=jt;t;)t=_r(t.nextSibling)}function xi(){jt=Dt=null,Ne=!1}function Gf(t){Xt===null?Xt=[t]:Xt.push(t)}var hC=Yn.ReactCurrentBatchConfig;function fa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function xl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iy(t){var e=t._init;return e(t._payload)}function Vx(t){function e(S,x){if(t){var w=S.deletions;w===null?(S.deletions=[x],S.flags|=16):w.push(x)}}function n(S,x){if(!t)return null;for(;x!==null;)e(S,x),x=x.sibling;return null}function r(S,x){for(S=new Map;x!==null;)x.key!==null?S.set(x.key,x):S.set(x.index,x),x=x.sibling;return S}function s(S,x){return S=Nr(S,x),S.index=0,S.sibling=null,S}function i(S,x,w){return S.index=w,t?(w=S.alternate,w!==null?(w=w.index,w<x?(S.flags|=2,x):w):(S.flags|=2,x)):(S.flags|=1048576,x)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function c(S,x,w,j){return x===null||x.tag!==6?(x=Rd(w,S.mode,j),x.return=S,x):(x=s(x,w),x.return=S,x)}function u(S,x,w,j){var O=w.type;return O===Hs?f(S,x,w.props.children,j,w.key):x!==null&&(x.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ir&&iy(O)===x.type)?(j=s(x,w.props),j.ref=fa(S,x,w),j.return=S,j):(j=$l(w.type,w.key,w.props,null,S.mode,j),j.ref=fa(S,x,w),j.return=S,j)}function d(S,x,w,j){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Dd(w,S.mode,j),x.return=S,x):(x=s(x,w.children||[]),x.return=S,x)}function f(S,x,w,j,O){return x===null||x.tag!==7?(x=us(w,S.mode,j,O),x.return=S,x):(x=s(x,w),x.return=S,x)}function m(S,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Rd(""+x,S.mode,w),x.return=S,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ll:return w=$l(x.type,x.key,x.props,null,S.mode,w),w.ref=fa(S,null,x),w.return=S,w;case Ws:return x=Dd(x,S.mode,w),x.return=S,x;case ir:var j=x._init;return m(S,j(x._payload),w)}if(wa(x)||la(x))return x=us(x,S.mode,w,null),x.return=S,x;xl(S,x)}return null}function g(S,x,w,j){var O=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return O!==null?null:c(S,x,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ll:return w.key===O?u(S,x,w,j):null;case Ws:return w.key===O?d(S,x,w,j):null;case ir:return O=w._init,g(S,x,O(w._payload),j)}if(wa(w)||la(w))return O!==null?null:f(S,x,w,j,null);xl(S,w)}return null}function v(S,x,w,j,O){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(w)||null,c(x,S,""+j,O);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ll:return S=S.get(j.key===null?w:j.key)||null,u(x,S,j,O);case Ws:return S=S.get(j.key===null?w:j.key)||null,d(x,S,j,O);case ir:var U=j._init;return v(S,x,w,U(j._payload),O)}if(wa(j)||la(j))return S=S.get(w)||null,f(x,S,j,O,null);xl(x,j)}return null}function b(S,x,w,j){for(var O=null,U=null,A=x,y=x=0,N=null;A!==null&&y<w.length;y++){A.index>y?(N=A,A=null):N=A.sibling;var C=g(S,A,w[y],j);if(C===null){A===null&&(A=N);break}t&&A&&C.alternate===null&&e(S,A),x=i(C,x,y),U===null?O=C:U.sibling=C,U=C,A=N}if(y===w.length)return n(S,A),Ne&&es(S,y),O;if(A===null){for(;y<w.length;y++)A=m(S,w[y],j),A!==null&&(x=i(A,x,y),U===null?O=A:U.sibling=A,U=A);return Ne&&es(S,y),O}for(A=r(S,A);y<w.length;y++)N=v(A,S,y,w[y],j),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?y:N.key),x=i(N,x,y),U===null?O=N:U.sibling=N,U=N);return t&&A.forEach(function(I){return e(S,I)}),Ne&&es(S,y),O}function P(S,x,w,j){var O=la(w);if(typeof O!="function")throw Error(z(150));if(w=O.call(w),w==null)throw Error(z(151));for(var U=O=null,A=x,y=x=0,N=null,C=w.next();A!==null&&!C.done;y++,C=w.next()){A.index>y?(N=A,A=null):N=A.sibling;var I=g(S,A,C.value,j);if(I===null){A===null&&(A=N);break}t&&A&&I.alternate===null&&e(S,A),x=i(I,x,y),U===null?O=I:U.sibling=I,U=I,A=N}if(C.done)return n(S,A),Ne&&es(S,y),O;if(A===null){for(;!C.done;y++,C=w.next())C=m(S,C.value,j),C!==null&&(x=i(C,x,y),U===null?O=C:U.sibling=C,U=C);return Ne&&es(S,y),O}for(A=r(S,A);!C.done;y++,C=w.next())C=v(A,S,y,C.value,j),C!==null&&(t&&C.alternate!==null&&A.delete(C.key===null?y:C.key),x=i(C,x,y),U===null?O=C:U.sibling=C,U=C);return t&&A.forEach(function(_){return e(S,_)}),Ne&&es(S,y),O}function k(S,x,w,j){if(typeof w=="object"&&w!==null&&w.type===Hs&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ll:e:{for(var O=w.key,U=x;U!==null;){if(U.key===O){if(O=w.type,O===Hs){if(U.tag===7){n(S,U.sibling),x=s(U,w.props.children),x.return=S,S=x;break e}}else if(U.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ir&&iy(O)===U.type){n(S,U.sibling),x=s(U,w.props),x.ref=fa(S,U,w),x.return=S,S=x;break e}n(S,U);break}else e(S,U);U=U.sibling}w.type===Hs?(x=us(w.props.children,S.mode,j,w.key),x.return=S,S=x):(j=$l(w.type,w.key,w.props,null,S.mode,j),j.ref=fa(S,x,w),j.return=S,S=j)}return a(S);case Ws:e:{for(U=w.key;x!==null;){if(x.key===U)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(S,x.sibling),x=s(x,w.children||[]),x.return=S,S=x;break e}else{n(S,x);break}else e(S,x);x=x.sibling}x=Dd(w,S.mode,j),x.return=S,S=x}return a(S);case ir:return U=w._init,k(S,x,U(w._payload),j)}if(wa(w))return b(S,x,w,j);if(la(w))return P(S,x,w,j);xl(S,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(S,x.sibling),x=s(x,w),x.return=S,S=x):(n(S,x),x=Rd(w,S.mode,j),x.return=S,S=x),a(S)):n(S,x)}return k}var _i=Vx(!0),Lx=Vx(!1),dc=Br(null),hc=null,ei=null,Kf=null;function Yf(){Kf=ei=hc=null}function Xf(t){var e=dc.current;Ee(dc),t._currentValue=e}function Ch(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ci(t,e){hc=t,Kf=ei=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Wt(t){var e=t._currentValue;if(Kf!==t)if(t={context:t,memoizedValue:e,next:null},ei===null){if(hc===null)throw Error(z(308));ei=t,hc.dependencies={lanes:0,firstContext:t}}else ei=ei.next=t;return e}var as=null;function Jf(t){as===null?as=[t]:as.push(t)}function Fx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Jf(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function Zf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ux(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,Jf(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function Ml(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lf(t,n)}}function ay(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fc(t,e,n,r){var s=t.updateQueue;ar=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=d=u=null,c=i;do{var g=c.lane,v=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var b=t,P=c;switch(g=e,v=n,P.tag){case 1:if(b=P.payload,typeof b=="function"){m=b.call(v,m,g);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=P.payload,g=typeof b=="function"?b.call(v,m,g):b,g==null)break e;m=Ae({},m,g);break e;case 2:ar=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else v={eventTime:v,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=v,u=m):f=f.next=v,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(1);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ys|=a,t.lanes=a,t.memoizedState=m}}function oy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Io={},yn=Br(Io),no=Br(Io),ro=Br(Io);function os(t){if(t===Io)throw Error(z(174));return t}function em(t,e){switch(ve(ro,e),ve(no,t),ve(yn,Io),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ih(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ih(e,t)}Ee(yn),ve(yn,e)}function wi(){Ee(yn),Ee(no),Ee(ro)}function $x(t){os(ro.current);var e=os(yn.current),n=ih(e,t.type);e!==n&&(ve(no,t),ve(yn,n))}function tm(t){no.current===t&&(Ee(yn),Ee(no))}var Ie=Br(0);function mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Id=[];function nm(){for(var t=0;t<Id.length;t++)Id[t]._workInProgressVersionPrimary=null;Id.length=0}var Ol=Yn.ReactCurrentDispatcher,bd=Yn.ReactCurrentBatchConfig,gs=0,be=null,Be=null,Qe=null,pc=!1,Ma=!1,so=0,fC=0;function ot(){throw Error(z(321))}function rm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!sn(t[n],e[n]))return!1;return!0}function sm(t,e,n,r,s,i){if(gs=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ol.current=t===null||t.memoizedState===null?yC:vC,t=n(r,s),Ma){i=0;do{if(Ma=!1,so=0,25<=i)throw Error(z(301));i+=1,Qe=Be=null,e.updateQueue=null,Ol.current=xC,t=n(r,s)}while(Ma)}if(Ol.current=gc,e=Be!==null&&Be.next!==null,gs=0,Qe=Be=be=null,pc=!1,e)throw Error(z(300));return t}function im(){var t=so!==0;return so=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t,Qe}function Ht(){if(Be===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=Qe===null?be.memoizedState:Qe.next;if(e!==null)Qe=e,Be=t;else{if(t===null)throw Error(z(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Qe===null?be.memoizedState=Qe=t:Qe=Qe.next=t}return Qe}function io(t,e){return typeof e=="function"?e(t):e}function Ad(t){var e=Ht(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var f=d.lane;if((gs&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,be.lanes|=f,ys|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,sn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,ys|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pd(t){var e=Ht(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);sn(i,e.memoizedState)||(St=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function zx(){}function Bx(t,e){var n=be,r=Ht(),s=e(),i=!sn(r.memoizedState,s);if(i&&(r.memoizedState=s,St=!0),r=r.queue,am(Hx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Qe!==null&&Qe.memoizedState.tag&1){if(n.flags|=2048,ao(9,Wx.bind(null,n,r,s,e),void 0,null),Ge===null)throw Error(z(349));gs&30||qx(n,e,s)}return s}function qx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Wx(t,e,n,r){e.value=n,e.getSnapshot=r,Qx(e)&&Gx(t)}function Hx(t,e,n){return n(function(){Qx(e)&&Gx(t)})}function Qx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!sn(t,n)}catch{return!0}}function Gx(t){var e=zn(t,1);e!==null&&nn(e,t,1,-1)}function ly(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:t},e.queue=t,t=t.dispatch=gC.bind(null,be,t),[e.memoizedState,t]}function ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kx(){return Ht().memoizedState}function Vl(t,e,n,r){var s=un();be.flags|=t,s.memoizedState=ao(1|e,n,void 0,r===void 0?null:r)}function su(t,e,n,r){var s=Ht();r=r===void 0?null:r;var i=void 0;if(Be!==null){var a=Be.memoizedState;if(i=a.destroy,r!==null&&rm(r,a.deps)){s.memoizedState=ao(e,n,i,r);return}}be.flags|=t,s.memoizedState=ao(1|e,n,i,r)}function cy(t,e){return Vl(8390656,8,t,e)}function am(t,e){return su(2048,8,t,e)}function Yx(t,e){return su(4,2,t,e)}function Xx(t,e){return su(4,4,t,e)}function Jx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Zx(t,e,n){return n=n!=null?n.concat([t]):null,su(4,4,Jx.bind(null,e,t),n)}function om(){}function e_(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function t_(t,e){var n=Ht();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&rm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function n_(t,e,n){return gs&21?(sn(n,e)||(n=ox(),be.lanes|=n,ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function mC(t,e){var n=me;me=n!==0&&4>n?n:4,t(!0);var r=bd.transition;bd.transition={};try{t(!1),e()}finally{me=n,bd.transition=r}}function r_(){return Ht().memoizedState}function pC(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},s_(t))i_(e,n);else if(n=Fx(t,e,n,r),n!==null){var s=xt();nn(n,t,r,s),a_(n,e,r)}}function gC(t,e,n){var r=Tr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(s_(t))i_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,sn(c,a)){var u=e.interleaved;u===null?(s.next=s,Jf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Fx(t,e,s,r),n!==null&&(s=xt(),nn(n,t,r,s),a_(n,e,r))}}function s_(t){var e=t.alternate;return t===be||e!==null&&e===be}function i_(t,e){Ma=pc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function a_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Lf(t,n)}}var gc={readContext:Wt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},yC={readContext:Wt,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:Wt,useEffect:cy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vl(4194308,4,Jx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vl(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=pC.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:ly,useDebugValue:om,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=ly(!1),e=t[0];return t=mC.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=un();if(Ne){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),Ge===null)throw Error(z(349));gs&30||qx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,cy(Hx.bind(null,r,i,t),[t]),r.flags|=2048,ao(9,Wx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=un(),e=Ge.identifierPrefix;if(Ne){var n=Dn,r=Rn;n=(r&~(1<<32-tn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=so++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},vC={readContext:Wt,useCallback:e_,useContext:Wt,useEffect:am,useImperativeHandle:Zx,useInsertionEffect:Yx,useLayoutEffect:Xx,useMemo:t_,useReducer:Ad,useRef:Kx,useState:function(){return Ad(io)},useDebugValue:om,useDeferredValue:function(t){var e=Ht();return n_(e,Be.memoizedState,t)},useTransition:function(){var t=Ad(io)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:zx,useSyncExternalStore:Bx,useId:r_,unstable_isNewReconciler:!1},xC={readContext:Wt,useCallback:e_,useContext:Wt,useEffect:am,useImperativeHandle:Zx,useInsertionEffect:Yx,useLayoutEffect:Xx,useMemo:t_,useReducer:Pd,useRef:Kx,useState:function(){return Pd(io)},useDebugValue:om,useDeferredValue:function(t){var e=Ht();return Be===null?e.memoizedState=t:n_(e,Be.memoizedState,t)},useTransition:function(){var t=Pd(io)[0],e=Ht().memoizedState;return[t,e]},useMutableSource:zx,useSyncExternalStore:Bx,useId:r_,unstable_isNewReconciler:!1};function Kt(t,e){if(t&&t.defaultProps){e=Ae({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ae({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var iu={isMounted:function(t){return(t=t._reactInternals)?Is(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Tr(t),i=Vn(r,s);i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(nn(e,t,s,r),Ml(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=xt(),s=Tr(t),i=Vn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=wr(t,i,s),e!==null&&(nn(e,t,s,r),Ml(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),r=Tr(t),s=Vn(n,r);s.tag=2,e!=null&&(s.callback=e),e=wr(t,s,r),e!==null&&(nn(e,t,r,n),Ml(e,t,r))}};function uy(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ja(n,r)||!Ja(s,i):!0}function o_(t,e,n){var r=!1,s=Dr,i=e.contextType;return typeof i=="object"&&i!==null?i=Wt(i):(s=bt(e)?ms:mt.current,r=e.contextTypes,i=(r=r!=null)?vi(t,s):Dr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=iu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function dy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&iu.enqueueReplaceState(e,e.state,null)}function Ih(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Zf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Wt(i):(i=bt(e)?ms:mt.current,s.context=vi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Sh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&iu.enqueueReplaceState(s,s.state,null),fc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ei(t,e){try{var n="",r=e;do n+=QT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var _C=typeof WeakMap=="function"?WeakMap:Map;function l_(t,e,n){n=Vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){vc||(vc=!0,Lh=r),bh(t,e)},n}function c_(t,e,n){n=Vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){bh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){bh(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function hy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new _C;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=DC.bind(null,t,e,n),e.then(t,t))}function fy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function my(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vn(-1,1),e.tag=2,wr(n,e,1))),n.lanes|=1),t)}var wC=Yn.ReactCurrentOwner,St=!1;function vt(t,e,n,r){e.child=t===null?Lx(e,null,n,r):_i(e,t.child,n,r)}function py(t,e,n,r,s){n=n.render;var i=e.ref;return ci(e,s),r=sm(t,e,n,r,i,s),n=im(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bn(t,e,s)):(Ne&&n&&Hf(e),e.flags|=1,vt(t,e,r,s),e.child)}function gy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,u_(t,e,i,r,s)):(t=$l(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ja,n(a,r)&&t.ref===e.ref)return Bn(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function u_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ja(i,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Bn(t,e,s)}return Ah(t,e,n,r,s)}function d_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(ni,kt),kt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(ni,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(ni,kt),kt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(ni,kt),kt|=r;return vt(t,e,s,n),e.child}function h_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ah(t,e,n,r,s){var i=bt(n)?ms:mt.current;return i=vi(e,i),ci(e,s),n=sm(t,e,n,r,i,s),r=im(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Bn(t,e,s)):(Ne&&r&&Hf(e),e.flags|=1,vt(t,e,n,s),e.child)}function yy(t,e,n,r,s){if(bt(n)){var i=!0;lc(e)}else i=!1;if(ci(e,s),e.stateNode===null)Ll(t,e),o_(e,n,r),Ih(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Wt(d):(d=bt(n)?ms:mt.current,d=vi(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&dy(e,a,r,d),ar=!1;var g=e.memoizedState;a.state=g,fc(e,r,a,s),u=e.memoizedState,c!==r||g!==u||It.current||ar?(typeof f=="function"&&(Sh(e,n,f,r),u=e.memoizedState),(c=ar||uy(e,n,c,r,g,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Ux(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Kt(e.type,c),a.props=d,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Wt(u):(u=bt(n)?ms:mt.current,u=vi(e,u));var v=n.getDerivedStateFromProps;(f=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||g!==u)&&dy(e,a,r,u),ar=!1,g=e.memoizedState,a.state=g,fc(e,r,a,s);var b=e.memoizedState;c!==m||g!==b||It.current||ar?(typeof v=="function"&&(Sh(e,n,v,r),b=e.memoizedState),(d=ar||uy(e,n,d,r,g,b,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),a.props=r,a.state=b,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ph(t,e,n,r,i,s)}function Ph(t,e,n,r,s,i){h_(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&ny(e,n,!1),Bn(t,e,i);r=e.stateNode,wC.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=_i(e,t.child,null,i),e.child=_i(e,null,c,i)):vt(t,e,c,i),e.memoizedState=r.state,s&&ny(e,n,!0),e.child}function f_(t){var e=t.stateNode;e.pendingContext?ty(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ty(t,e.context,!1),em(t,e.containerInfo)}function vy(t,e,n,r,s){return xi(),Gf(s),e.flags|=256,vt(t,e,n,r),e.child}var kh={dehydrated:null,treeContext:null,retryLane:0};function jh(t){return{baseLanes:t,cachePool:null,transitions:null}}function m_(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Ie,s&1),t===null)return Nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=lu(a,r,0,null),t=us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=jh(n),e.memoizedState=kh,t):lm(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return EC(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Nr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=Nr(c,i):(i=us(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?jh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=kh,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lm(t,e){return e=lu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _l(t,e,n,r){return r!==null&&Gf(r),_i(e,t.child,null,n),t=lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function EC(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=kd(Error(z(422))),_l(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=lu({mode:"visible",children:r.children},s,0,null),i=us(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&_i(e,t.child,null,a),e.child.memoizedState=jh(a),e.memoizedState=kh,i);if(!(e.mode&1))return _l(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=kd(i,r,void 0),_l(t,e,a,r)}if(c=(a&t.childLanes)!==0,St||c){if(r=Ge,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zn(t,s),nn(r,t,s,-1))}return mm(),r=kd(Error(z(421))),_l(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=MC.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,jt=_r(s.nextSibling),Dt=e,Ne=!0,Xt=null,t!==null&&(Ft[Ut++]=Rn,Ft[Ut++]=Dn,Ft[Ut++]=ps,Rn=t.id,Dn=t.overflow,ps=e),e=lm(e,r.children),e.flags|=4096,e)}function xy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ch(t.return,e,n)}function jd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function p_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xy(t,n,e);else if(t.tag===19)xy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&mc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),jd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&mc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}jd(e,!0,n,null,i);break;case"together":jd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Bn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function TC(t,e,n){switch(e.tag){case 3:f_(e),xi();break;case 5:$x(e);break;case 1:bt(e.type)&&lc(e);break;case 4:em(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(dc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?m_(t,e,n):(ve(Ie,Ie.current&1),t=Bn(t,e,n),t!==null?t.sibling:null);ve(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return p_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,d_(t,e,n)}return Bn(t,e,n)}var g_,Rh,y_,v_;g_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rh=function(){};y_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,os(yn.current);var i=null;switch(n){case"input":s=th(t,s),r=th(t,r),i=[];break;case"select":s=Ae({},s,{value:void 0}),r=Ae({},r,{value:void 0}),i=[];break;case"textarea":s=sh(t,s),r=sh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ac)}ah(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Wa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Wa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&we("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};v_=function(t,e,n,r){n!==r&&(e.flags|=4)};function ma(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function NC(t,e,n){var r=e.pendingProps;switch(Qf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return bt(e.type)&&oc(),lt(e),null;case 3:return r=e.stateNode,wi(),Ee(It),Ee(mt),nm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(vl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xt!==null&&($h(Xt),Xt=null))),Rh(t,e),lt(e),null;case 5:tm(e);var s=os(ro.current);if(n=e.type,t!==null&&e.stateNode!=null)y_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return lt(e),null}if(t=os(yn.current),vl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hn]=e,r[to]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<Ta.length;s++)we(Ta[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":bg(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":Pg(r,i),we("invalid",r)}ah(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&yl(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&yl(r.textContent,c,t),s=["children",""+c]):Wa.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&we("scroll",r)}switch(n){case"input":cl(r),Ag(r,i,!0);break;case"textarea":cl(r),kg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ac)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Hv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[hn]=e,t[to]=r,g_(t,e,!1,!1),e.stateNode=t;e:{switch(a=oh(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ta.length;s++)we(Ta[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":bg(t,r),s=th(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ae({},r,{value:void 0}),we("invalid",t);break;case"textarea":Pg(t,r),s=sh(t,r),we("invalid",t);break;default:s=r}ah(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Kv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Qv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ha(t,u):typeof u=="number"&&Ha(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&we("scroll",t):u!=null&&jf(t,i,u,a))}switch(n){case"input":cl(t),Ag(t,r,!1);break;case"textarea":cl(t),kg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Rr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ii(t,!!r.multiple,i,!1):r.defaultValue!=null&&ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)v_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=os(ro.current),os(yn.current),vl(e)){if(r=e.stateNode,n=e.memoizedProps,r[hn]=e,(i=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:yl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hn]=e,e.stateNode=r}return lt(e),null;case 13:if(Ee(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&jt!==null&&e.mode&1&&!(e.flags&128))Ox(),xi(),e.flags|=98560,i=!1;else if(i=vl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[hn]=e}else xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else Xt!==null&&($h(Xt),Xt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?qe===0&&(qe=3):mm())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return wi(),Rh(t,e),t===null&&Za(e.stateNode.containerInfo),lt(e),null;case 10:return Xf(e.type._context),lt(e),null;case 17:return bt(e.type)&&oc(),lt(e),null;case 19:if(Ee(Ie),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)ma(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=mc(t),a!==null){for(e.flags|=128,ma(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&De()>Ti&&(e.flags|=128,r=!0,ma(i,!1),e.lanes=4194304)}else{if(!r)if(t=mc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ma(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ne)return lt(e),null}else 2*De()-i.renderingStartTime>Ti&&n!==1073741824&&(e.flags|=128,r=!0,ma(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,n=Ie.current,ve(Ie,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return fm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function CC(t,e){switch(Qf(e),e.tag){case 1:return bt(e.type)&&oc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wi(),Ee(It),Ee(mt),nm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tm(e),null;case 13:if(Ee(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ie),null;case 4:return wi(),null;case 10:return Xf(e.type._context),null;case 22:case 23:return fm(),null;case 24:return null;default:return null}}var wl=!1,dt=!1,SC=typeof WeakSet=="function"?WeakSet:Set,Q=null;function ti(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function Dh(t,e,n){try{n()}catch(r){je(t,e,r)}}var _y=!1;function IC(t,e){if(yh=rc,t=Tx(),Wf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++f===r&&(u=a),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(vh={focusedElem:t,selectionRange:n},rc=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var P=b.memoizedProps,k=b.memoizedState,S=e.stateNode,x=S.getSnapshotBeforeUpdate(e.elementType===e.type?P:Kt(e.type,P),k);S.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(j){je(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return b=_y,_y=!1,b}function Oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Dh(e,n,i)}s=s.next}while(s!==r)}}function au(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function x_(t){var e=t.alternate;e!==null&&(t.alternate=null,x_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hn],delete e[to],delete e[wh],delete e[cC],delete e[uC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function __(t){return t.tag===5||t.tag===3||t.tag===4}function wy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||__(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ac));else if(r!==4&&(t=t.child,t!==null))for(Oh(t,e,n),t=t.sibling;t!==null;)Oh(t,e,n),t=t.sibling}function Vh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}var Xe=null,Yt=!1;function nr(t,e,n){for(n=n.child;n!==null;)w_(t,e,n),n=n.sibling}function w_(t,e,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Jc,n)}catch{}switch(n.tag){case 5:dt||ti(n,e);case 6:var r=Xe,s=Yt;Xe=null,nr(t,e,n),Xe=r,Yt=s,Xe!==null&&(Yt?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(Yt?(t=Xe,n=n.stateNode,t.nodeType===8?Cd(t.parentNode,n):t.nodeType===1&&Cd(t,n),Ya(t)):Cd(Xe,n.stateNode));break;case 4:r=Xe,s=Yt,Xe=n.stateNode.containerInfo,Yt=!0,nr(t,e,n),Xe=r,Yt=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Dh(n,e,a),s=s.next}while(s!==r)}nr(t,e,n);break;case 1:if(!dt&&(ti(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){je(n,e,c)}nr(t,e,n);break;case 21:nr(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,nr(t,e,n),dt=r):nr(t,e,n);break;default:nr(t,e,n)}}function Ey(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new SC),e.forEach(function(r){var s=OC.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Gt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Xe=c.stateNode,Yt=!1;break e;case 3:Xe=c.stateNode.containerInfo,Yt=!0;break e;case 4:Xe=c.stateNode.containerInfo,Yt=!0;break e}c=c.return}if(Xe===null)throw Error(z(160));w_(i,a,s),Xe=null,Yt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){je(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E_(e,t),e=e.sibling}function E_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gt(e,t),cn(t),r&4){try{Oa(3,t,t.return),au(3,t)}catch(P){je(t,t.return,P)}try{Oa(5,t,t.return)}catch(P){je(t,t.return,P)}}break;case 1:Gt(e,t),cn(t),r&512&&n!==null&&ti(n,n.return);break;case 5:if(Gt(e,t),cn(t),r&512&&n!==null&&ti(n,n.return),t.flags&32){var s=t.stateNode;try{Ha(s,"")}catch(P){je(t,t.return,P)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&qv(s,i),oh(c,a);var d=oh(c,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?Kv(s,m):f==="dangerouslySetInnerHTML"?Qv(s,m):f==="children"?Ha(s,m):jf(s,f,m,d)}switch(c){case"input":nh(s,i);break;case"textarea":Wv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?ii(s,!!i.multiple,v,!1):g!==!!i.multiple&&(i.defaultValue!=null?ii(s,!!i.multiple,i.defaultValue,!0):ii(s,!!i.multiple,i.multiple?[]:"",!1))}s[to]=i}catch(P){je(t,t.return,P)}}break;case 6:if(Gt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(P){je(t,t.return,P)}}break;case 3:if(Gt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ya(e.containerInfo)}catch(P){je(t,t.return,P)}break;case 4:Gt(e,t),cn(t);break;case 13:Gt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(dm=De())),r&4&&Ey(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||f,Gt(e,t),dt=d):Gt(e,t),cn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(Q=t,f=t.child;f!==null;){for(m=Q=f;Q!==null;){switch(g=Q,v=g.child,g.tag){case 0:case 11:case 14:case 15:Oa(4,g,g.return);break;case 1:ti(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(P){je(r,n,P)}}break;case 5:ti(g,g.return);break;case 22:if(g.memoizedState!==null){Ny(m);continue}}v!==null?(v.return=g,Q=v):Ny(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=Gv("display",a))}catch(P){je(t,t.return,P)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(P){je(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Gt(e,t),cn(t),r&4&&Ey(t);break;case 21:break;default:Gt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(__(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ha(s,""),r.flags&=-33);var i=wy(t);Vh(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=wy(t);Oh(t,c,a);break;default:throw Error(z(161))}}catch(u){je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function bC(t,e,n){Q=t,T_(t)}function T_(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||wl;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||dt;c=wl;var d=dt;if(wl=a,(dt=u)&&!d)for(Q=s;Q!==null;)a=Q,u=a.child,a.tag===22&&a.memoizedState!==null?Cy(s):u!==null?(u.return=a,Q=u):Cy(s);for(;i!==null;)Q=i,T_(i),i=i.sibling;Q=s,wl=c,dt=d}Ty(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):Ty(t)}}function Ty(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||au(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&oy(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}oy(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&Ya(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}dt||e.flags&512&&Mh(e)}catch(g){je(e,e.return,g)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Ny(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function Cy(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{au(4,e)}catch(u){je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){je(e,s,u)}}var i=e.return;try{Mh(e)}catch(u){je(e,i,u)}break;case 5:var a=e.return;try{Mh(e)}catch(u){je(e,a,u)}}}catch(u){je(e,e.return,u)}if(e===t){Q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,Q=c;break}Q=e.return}}var AC=Math.ceil,yc=Yn.ReactCurrentDispatcher,cm=Yn.ReactCurrentOwner,qt=Yn.ReactCurrentBatchConfig,ce=0,Ge=null,Ve=null,tt=0,kt=0,ni=Br(0),qe=0,oo=null,ys=0,ou=0,um=0,Va=null,Nt=null,dm=0,Ti=1/0,kn=null,vc=!1,Lh=null,Er=null,El=!1,mr=null,xc=0,La=0,Fh=null,Fl=-1,Ul=0;function xt(){return ce&6?De():Fl!==-1?Fl:Fl=De()}function Tr(t){return t.mode&1?ce&2&&tt!==0?tt&-tt:hC.transition!==null?(Ul===0&&(Ul=ox()),Ul):(t=me,t!==0||(t=window.event,t=t===void 0?16:mx(t.type)),t):1}function nn(t,e,n,r){if(50<La)throw La=0,Fh=null,Error(z(185));No(t,n,r),(!(ce&2)||t!==Ge)&&(t===Ge&&(!(ce&2)&&(ou|=n),qe===4&&lr(t,tt)),At(t,r),n===1&&ce===0&&!(e.mode&1)&&(Ti=De()+500,ru&&qr()))}function At(t,e){var n=t.callbackNode;hN(t,e);var r=nc(t,t===Ge?tt:0);if(r===0)n!==null&&Dg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Dg(n),e===1)t.tag===0?dC(Sy.bind(null,t)):Rx(Sy.bind(null,t)),oC(function(){!(ce&6)&&qr()}),n=null;else{switch(lx(r)){case 1:n=Vf;break;case 4:n=ix;break;case 16:n=tc;break;case 536870912:n=ax;break;default:n=tc}n=k_(n,N_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function N_(t,e){if(Fl=-1,Ul=0,ce&6)throw Error(z(327));var n=t.callbackNode;if(ui()&&t.callbackNode!==n)return null;var r=nc(t,t===Ge?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=_c(t,r);else{e=r;var s=ce;ce|=2;var i=S_();(Ge!==t||tt!==e)&&(kn=null,Ti=De()+500,cs(t,e));do try{jC();break}catch(c){C_(t,c)}while(1);Yf(),yc.current=i,ce=s,Ve!==null?e=0:(Ge=null,tt=0,e=qe)}if(e!==0){if(e===2&&(s=hh(t),s!==0&&(r=s,e=Uh(t,s))),e===1)throw n=oo,cs(t,0),lr(t,r),At(t,De()),n;if(e===6)lr(t,r);else{if(s=t.current.alternate,!(r&30)&&!PC(s)&&(e=_c(t,r),e===2&&(i=hh(t),i!==0&&(r=i,e=Uh(t,i))),e===1))throw n=oo,cs(t,0),lr(t,r),At(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:ts(t,Nt,kn);break;case 3:if(lr(t,r),(r&130023424)===r&&(e=dm+500-De(),10<e)){if(nc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){xt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=_h(ts.bind(null,t,Nt,kn),e);break}ts(t,Nt,kn);break;case 4:if(lr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-tn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AC(r/1960))-r,10<r){t.timeoutHandle=_h(ts.bind(null,t,Nt,kn),r);break}ts(t,Nt,kn);break;case 5:ts(t,Nt,kn);break;default:throw Error(z(329))}}}return At(t,De()),t.callbackNode===n?N_.bind(null,t):null}function Uh(t,e){var n=Va;return t.current.memoizedState.isDehydrated&&(cs(t,e).flags|=256),t=_c(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&$h(e)),t}function $h(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function PC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~um,e&=~ou,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-tn(e),r=1<<n;t[n]=-1,e&=~r}}function Sy(t){if(ce&6)throw Error(z(327));ui();var e=nc(t,0);if(!(e&1))return At(t,De()),null;var n=_c(t,e);if(t.tag!==0&&n===2){var r=hh(t);r!==0&&(e=r,n=Uh(t,r))}if(n===1)throw n=oo,cs(t,0),lr(t,e),At(t,De()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ts(t,Nt,kn),At(t,De()),null}function hm(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Ti=De()+500,ru&&qr())}}function vs(t){mr!==null&&mr.tag===0&&!(ce&6)&&ui();var e=ce;ce|=1;var n=qt.transition,r=me;try{if(qt.transition=null,me=1,t)return t()}finally{me=r,qt.transition=n,ce=e,!(ce&6)&&qr()}}function fm(){kt=ni.current,Ee(ni)}function cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aC(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Qf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oc();break;case 3:wi(),Ee(It),Ee(mt),nm();break;case 5:tm(r);break;case 4:wi();break;case 13:Ee(Ie);break;case 19:Ee(Ie);break;case 10:Xf(r.type._context);break;case 22:case 23:fm()}n=n.return}if(Ge=t,Ve=t=Nr(t.current,null),tt=kt=e,qe=0,oo=null,um=ou=ys=0,Nt=Va=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}as=null}return t}function C_(t,e){do{var n=Ve;try{if(Yf(),Ol.current=gc,pc){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}pc=!1}if(gs=0,Qe=Be=be=null,Ma=!1,so=0,cm.current=null,n===null||n.return===null){qe=1,oo=e,Ve=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=tt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=fy(a);if(v!==null){v.flags&=-257,my(v,a,c,i,e),v.mode&1&&hy(i,d,e),e=v,u=d;var b=e.updateQueue;if(b===null){var P=new Set;P.add(u),e.updateQueue=P}else b.add(u);break e}else{if(!(e&1)){hy(i,d,e),mm();break e}u=Error(z(426))}}else if(Ne&&c.mode&1){var k=fy(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),my(k,a,c,i,e),Gf(Ei(u,c));break e}}i=u=Ei(u,c),qe!==4&&(qe=2),Va===null?Va=[i]:Va.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=l_(i,u,e);ay(i,S);break e;case 1:c=u;var x=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Er===null||!Er.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=c_(i,c,e);ay(i,j);break e}}i=i.return}while(i!==null)}b_(n)}catch(O){e=O,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(1)}function S_(){var t=yc.current;return yc.current=gc,t===null?gc:t}function mm(){(qe===0||qe===3||qe===2)&&(qe=4),Ge===null||!(ys&268435455)&&!(ou&268435455)||lr(Ge,tt)}function _c(t,e){var n=ce;ce|=2;var r=S_();(Ge!==t||tt!==e)&&(kn=null,cs(t,e));do try{kC();break}catch(s){C_(t,s)}while(1);if(Yf(),ce=n,yc.current=r,Ve!==null)throw Error(z(261));return Ge=null,tt=0,qe}function kC(){for(;Ve!==null;)I_(Ve)}function jC(){for(;Ve!==null&&!rN();)I_(Ve)}function I_(t){var e=P_(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?b_(t):Ve=e,cm.current=null}function b_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=CC(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Ve=null;return}}else if(n=NC(n,e,kt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);qe===0&&(qe=5)}function ts(t,e,n){var r=me,s=qt.transition;try{qt.transition=null,me=1,RC(t,e,n,r)}finally{qt.transition=s,me=r}return null}function RC(t,e,n,r){do ui();while(mr!==null);if(ce&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(fN(t,i),t===Ge&&(Ve=Ge=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||El||(El=!0,k_(tc,function(){return ui(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var a=me;me=1;var c=ce;ce|=4,cm.current=null,IC(t,n),E_(n,t),ZN(vh),rc=!!yh,vh=yh=null,t.current=n,bC(n),sN(),ce=c,me=a,qt.transition=i}else t.current=n;if(El&&(El=!1,mr=t,xc=s),i=t.pendingLanes,i===0&&(Er=null),oN(n.stateNode),At(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(vc)throw vc=!1,t=Lh,Lh=null,t;return xc&1&&t.tag!==0&&ui(),i=t.pendingLanes,i&1?t===Fh?La++:(La=0,Fh=t):La=0,qr(),null}function ui(){if(mr!==null){var t=lx(xc),e=qt.transition,n=me;try{if(qt.transition=null,me=16>t?16:t,mr===null)var r=!1;else{if(t=mr,mr=null,xc=0,ce&6)throw Error(z(331));var s=ce;for(ce|=4,Q=t.current;Q!==null;){var i=Q,a=i.child;if(Q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(Q=d;Q!==null;){var f=Q;switch(f.tag){case 0:case 11:case 15:Oa(8,f,i)}var m=f.child;if(m!==null)m.return=f,Q=m;else for(;Q!==null;){f=Q;var g=f.sibling,v=f.return;if(x_(f),f===d){Q=null;break}if(g!==null){g.return=v,Q=g;break}Q=v}}}var b=i.alternate;if(b!==null){var P=b.child;if(P!==null){b.child=null;do{var k=P.sibling;P.sibling=null,P=k}while(P!==null)}}Q=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Q=a;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oa(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,Q=S;break e}Q=i.return}}var x=t.current;for(Q=x;Q!==null;){a=Q;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Q=w;else e:for(a=x;Q!==null;){if(c=Q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:au(9,c)}}catch(O){je(c,c.return,O)}if(c===a){Q=null;break e}var j=c.sibling;if(j!==null){j.return=c.return,Q=j;break e}Q=c.return}}if(ce=s,qr(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Jc,t)}catch{}r=!0}return r}finally{me=n,qt.transition=e}}return!1}function Iy(t,e,n){e=Ei(n,e),e=l_(t,e,1),t=wr(t,e,1),e=xt(),t!==null&&(No(t,1,e),At(t,e))}function je(t,e,n){if(t.tag===3)Iy(t,t,n);else for(;e!==null;){if(e.tag===3){Iy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=Ei(n,t),t=c_(e,t,1),e=wr(e,t,1),t=xt(),e!==null&&(No(e,1,t),At(e,t));break}}e=e.return}}function DC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(tt&n)===n&&(qe===4||qe===3&&(tt&130023424)===tt&&500>De()-dm?cs(t,0):um|=n),At(t,e)}function A_(t,e){e===0&&(t.mode&1?(e=hl,hl<<=1,!(hl&130023424)&&(hl=4194304)):e=1);var n=xt();t=zn(t,e),t!==null&&(No(t,e,n),At(t,n))}function MC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),A_(t,n)}function OC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),A_(t,n)}var P_;P_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,TC(t,e,n);St=!!(t.flags&131072)}else St=!1,Ne&&e.flags&1048576&&Dx(e,uc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ll(t,e),t=e.pendingProps;var s=vi(e,mt.current);ci(e,n),s=sm(null,e,r,t,s,n);var i=im();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,lc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zf(e),s.updater=iu,e.stateNode=s,s._reactInternals=e,Ih(e,r,t,n),e=Ph(null,e,r,!0,i,n)):(e.tag=0,Ne&&i&&Hf(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ll(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=LC(r),t=Kt(r,t),s){case 0:e=Ah(null,e,r,t,n);break e;case 1:e=yy(null,e,r,t,n);break e;case 11:e=py(null,e,r,t,n);break e;case 14:e=gy(null,e,r,Kt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Ah(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),yy(t,e,r,s,n);case 3:e:{if(f_(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Ux(t,e),fc(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ei(Error(z(423)),e),e=vy(t,e,r,n,s);break e}else if(r!==s){s=Ei(Error(z(424)),e),e=vy(t,e,r,n,s);break e}else for(jt=_r(e.stateNode.containerInfo.firstChild),Dt=e,Ne=!0,Xt=null,n=Lx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xi(),r===s){e=Bn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return $x(e),t===null&&Nh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,xh(r,s)?a=null:i!==null&&xh(r,i)&&(e.flags|=32),h_(t,e),vt(t,e,a,n),e.child;case 6:return t===null&&Nh(e),null;case 13:return m_(t,e,n);case 4:return em(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=_i(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),py(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ve(dc,r._currentValue),r._currentValue=a,i!==null)if(sn(i.value,a)){if(i.children===s.children&&!It.current){e=Bn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Vn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ch(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Ch(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ci(e,n),s=Wt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=Kt(r,e.pendingProps),s=Kt(r.type,s),gy(t,e,r,s,n);case 15:return u_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kt(r,s),Ll(t,e),e.tag=1,bt(r)?(t=!0,lc(e)):t=!1,ci(e,n),o_(e,r,s),Ih(e,r,s,n),Ph(null,e,r,!0,t,n);case 19:return p_(t,e,n);case 22:return d_(t,e,n)}throw Error(z(156,e.tag))};function k_(t,e){return sx(t,e)}function VC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new VC(t,e,n,r)}function pm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LC(t){if(typeof t=="function")return pm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Df)return 11;if(t===Mf)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $l(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")pm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Hs:return us(n.children,s,i,e);case Rf:a=8,s|=8;break;case Xd:return t=Bt(12,n,e,s|2),t.elementType=Xd,t.lanes=i,t;case Jd:return t=Bt(13,n,e,s),t.elementType=Jd,t.lanes=i,t;case Zd:return t=Bt(19,n,e,s),t.elementType=Zd,t.lanes=i,t;case $v:return lu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Fv:a=10;break e;case Uv:a=9;break e;case Df:a=11;break e;case Mf:a=14;break e;case ir:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Bt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function us(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function lu(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=$v,t.lanes=n,t.stateNode={isHidden:!1},t}function Rd(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function Dd(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function FC(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=md(0),this.expirationTimes=md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=md(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gm(t,e,n,r,s,i,a,c,u){return t=new FC(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zf(i),t}function UC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function j_(t){if(!t)return Dr;t=t._reactInternals;e:{if(Is(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(bt(n))return jx(t,n,e)}return e}function R_(t,e,n,r,s,i,a,c,u){return t=gm(n,r,!0,t,s,i,a,c,u),t.context=j_(null),n=t.current,r=xt(),s=Tr(n),i=Vn(r,s),i.callback=e??null,wr(n,i,s),t.current.lanes=s,No(t,s,r),At(t,r),t}function cu(t,e,n,r){var s=e.current,i=xt(),a=Tr(s);return n=j_(n),e.context===null?e.context=n:e.pendingContext=n,e=Vn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wr(s,e,a),t!==null&&(nn(t,s,a,i),Ml(t,s,a)),a}function wc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function by(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ym(t,e){by(t,e),(t=t.alternate)&&by(t,e)}function $C(){return null}var D_=typeof reportError=="function"?reportError:function(t){console.error(t)};function vm(t){this._internalRoot=t}uu.prototype.render=vm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));cu(t,e,null,null)};uu.prototype.unmount=vm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vs(function(){cu(null,t,null,null)}),e[$n]=null}};function uu(t){this._internalRoot=t}uu.prototype.unstable_scheduleHydration=function(t){if(t){var e=dx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<or.length&&e!==0&&e<or[n].priority;n++);or.splice(n,0,t),n===0&&fx(t)}};function xm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ay(){}function zC(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=wc(a);i.call(d)}}var a=R_(e,r,t,0,null,!1,!1,"",Ay);return t._reactRootContainer=a,t[$n]=a.current,Za(t.nodeType===8?t.parentNode:t),vs(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=wc(u);c.call(d)}}var u=gm(t,0,!1,null,null,!1,!1,"",Ay);return t._reactRootContainer=u,t[$n]=u.current,Za(t.nodeType===8?t.parentNode:t),vs(function(){cu(e,u,n,r)}),u}function hu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=wc(a);c.call(u)}}cu(e,a,t,s)}else a=zC(n,e,t,s,r);return wc(a)}cx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ea(e.pendingLanes);n!==0&&(Lf(e,n|1),At(e,De()),!(ce&6)&&(Ti=De()+500,qr()))}break;case 13:vs(function(){var r=zn(t,1);if(r!==null){var s=xt();nn(r,t,1,s)}}),ym(t,1)}};Ff=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=xt();nn(e,t,134217728,n)}ym(t,134217728)}};ux=function(t){if(t.tag===13){var e=Tr(t),n=zn(t,e);if(n!==null){var r=xt();nn(n,t,e,r)}ym(t,e)}};dx=function(){return me};hx=function(t,e){var n=me;try{return me=t,e()}finally{me=n}};ch=function(t,e,n){switch(e){case"input":if(nh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=nu(r);if(!s)throw Error(z(90));Bv(r),nh(r,s)}}}break;case"textarea":Wv(t,n);break;case"select":e=n.value,e!=null&&ii(t,!!n.multiple,e,!1)}};Jv=hm;Zv=vs;var BC={usingClientEntryPoint:!1,Events:[So,Ys,nu,Yv,Xv,hm]},pa={findFiberByHostInstance:is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},qC={bundleType:pa.bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=nx(t),t===null?null:t.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||$C,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{Jc=Tl.inject(qC),gn=Tl}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BC;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xm(e))throw Error(z(200));return UC(t,e,null,n)};Ot.createRoot=function(t,e){if(!xm(t))throw Error(z(299));var n=!1,r="",s=D_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gm(t,1,!1,null,null,n,!1,r,s),t[$n]=e.current,Za(t.nodeType===8?t.parentNode:t),new vm(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=nx(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return vs(t)};Ot.hydrate=function(t,e,n){if(!du(e))throw Error(z(200));return hu(null,t,e,!0,n)};Ot.hydrateRoot=function(t,e,n){if(!xm(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=D_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=R_(e,null,t,1,n??null,s,!1,i,a),t[$n]=e.current,Za(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uu(e)};Ot.render=function(t,e,n){if(!du(e))throw Error(z(200));return hu(null,t,e,!1,n)};Ot.unmountComponentAtNode=function(t){if(!du(t))throw Error(z(40));return t._reactRootContainer?(vs(function(){hu(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Ot.unstable_batchedUpdates=hm;Ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!du(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return hu(t,e,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function M_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M_)}catch(t){console.error(t)}}M_(),Mv.exports=Ot;var WC=Mv.exports,Py=WC;Kd.createRoot=Py.createRoot,Kd.hydrateRoot=Py.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lo(){return lo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lo.apply(this,arguments)}var pr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(pr||(pr={}));const ky="popstate";function HC(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return zh("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ec(s)}return GC(e,n,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function O_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function QC(){return Math.random().toString(36).substr(2,8)}function jy(t,e){return{usr:t.state,key:t.key,idx:e}}function zh(t,e,n,r){return n===void 0&&(n=null),lo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Vi(e):e,{state:n,key:e&&e.key||r||QC()})}function Ec(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Vi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function GC(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=pr.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(lo({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function m(){c=pr.Pop;let k=f(),S=k==null?null:k-d;d=k,u&&u({action:c,location:P.location,delta:S})}function g(k,S){c=pr.Push;let x=zh(P.location,k,S);n&&n(x,k),d=f()+1;let w=jy(x,d),j=P.createHref(x);try{a.pushState(w,"",j)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(j)}i&&u&&u({action:c,location:P.location,delta:1})}function v(k,S){c=pr.Replace;let x=zh(P.location,k,S);n&&n(x,k),d=f();let w=jy(x,d),j=P.createHref(x);a.replaceState(w,"",j),i&&u&&u({action:c,location:P.location,delta:0})}function b(k){let S=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof k=="string"?k:Ec(k);return x=x.replace(/ $/,"%20"),$e(S,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,S)}let P={get action(){return c},get location(){return t(s,a)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ky,m),u=k,()=>{s.removeEventListener(ky,m),u=null}},createHref(k){return e(s,k)},createURL:b,encodeLocation(k){let S=b(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:v,go(k){return a.go(k)}};return P}var Ry;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ry||(Ry={}));function KC(t,e,n){return n===void 0&&(n="/"),YC(t,e,n,!1)}function YC(t,e,n,r){let s=typeof e=="string"?Vi(e):e,i=_m(s.pathname||"/",n);if(i==null)return null;let a=V_(t);XC(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=lS(i);c=aS(a[u],d,r)}return c}function V_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&($e(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Cr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&($e(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),V_(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:sS(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of L_(i.path))s(i,a,u)}),e}function L_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=L_(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function XC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const JC=/^:[\w-]+$/,ZC=3,eS=2,tS=1,nS=10,rS=-2,Dy=t=>t==="*";function sS(t,e){let n=t.split("/"),r=n.length;return n.some(Dy)&&(r+=rS),e&&(r+=eS),n.filter(s=>!Dy(s)).reduce((s,i)=>s+(JC.test(i)?ZC:i===""?tS:nS),r)}function iS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function aS(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=My({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=My({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},f)),!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:Cr([i,m.pathname]),pathnameBase:hS(Cr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Cr([i,m.pathnameBase]))}return a}function My(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:v}=f;if(g==="*"){let P=c[m]||"";a=i.slice(0,i.length-P.length).replace(/(.)\/+$/,"$1")}const b=c[m];return v&&!b?d[g]=void 0:d[g]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function oS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),O_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function lS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return O_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function _m(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function cS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Vi(t):t;return{pathname:n?n.startsWith("/")?n:uS(n,e):e,search:fS(r),hash:mS(s)}}function uS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Md(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function F_(t,e){let n=dS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function U_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Vi(t):(s=lo({},t),$e(!s.pathname||!s.pathname.includes("?"),Md("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),Md("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),Md("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=cS(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Cr=t=>t.join("/").replace(/\/\/+/g,"/"),hS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),fS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $_=["post","put","patch","delete"];new Set($_);const gS=["get",...$_];new Set(gS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},co.apply(this,arguments)}const wm=V.createContext(null),yS=V.createContext(null),bs=V.createContext(null),fu=V.createContext(null),Wr=V.createContext({outlet:null,matches:[],isDataRoute:!1}),z_=V.createContext(null);function vS(t,e){let{relative:n}=e===void 0?{}:e;bo()||$e(!1);let{basename:r,navigator:s}=V.useContext(bs),{hash:i,pathname:a,search:c}=q_(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:Cr([r,a])),s.createHref({pathname:u,search:c,hash:i})}function bo(){return V.useContext(fu)!=null}function Li(){return bo()||$e(!1),V.useContext(fu).location}function B_(t){V.useContext(bs).static||V.useLayoutEffect(t)}function Xn(){let{isDataRoute:t}=V.useContext(Wr);return t?jS():xS()}function xS(){bo()||$e(!1);let t=V.useContext(wm),{basename:e,future:n,navigator:r}=V.useContext(bs),{matches:s}=V.useContext(Wr),{pathname:i}=Li(),a=JSON.stringify(F_(s,n.v7_relativeSplatPath)),c=V.useRef(!1);return B_(()=>{c.current=!0}),V.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=U_(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Cr([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,a,i,t])}function _S(){let{matches:t}=V.useContext(Wr),e=t[t.length-1];return e?e.params:{}}function q_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(bs),{matches:s}=V.useContext(Wr),{pathname:i}=Li(),a=JSON.stringify(F_(s,r.v7_relativeSplatPath));return V.useMemo(()=>U_(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function wS(t,e){return ES(t,e)}function ES(t,e,n,r){bo()||$e(!1);let{navigator:s}=V.useContext(bs),{matches:i}=V.useContext(Wr),a=i[i.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Li(),f;if(e){var m;let k=typeof e=="string"?Vi(e):e;u==="/"||(m=k.pathname)!=null&&m.startsWith(u)||$e(!1),f=k}else f=d;let g=f.pathname||"/",v=g;if(u!=="/"){let k=u.replace(/^\//,"").split("/");v="/"+g.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=KC(t,{pathname:v}),P=IS(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},c,k.params),pathname:Cr([u,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?u:Cr([u,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&P?V.createElement(fu.Provider,{value:{location:co({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:pr.Pop}},P):P}function TS(){let t=kS(),e=pS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,i)}const NS=V.createElement(TS,null);class CS extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(Wr.Provider,{value:this.props.routeContext},V.createElement(z_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function SS(t){let{routeContext:e,match:n,children:r}=t,s=V.useContext(wm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(Wr.Provider,{value:e},r)}function IS(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||$e(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:v}=n,b=m.route.loader&&g[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||b){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,m,g)=>{let v,b=!1,P=null,k=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,P=m.route.errorElement||NS,u&&(d<0&&g===0?(RS("route-fallback",!1),b=!0,k=null):d===g&&(b=!0,k=m.route.hydrateFallbackElement||null)));let S=e.concat(a.slice(0,g+1)),x=()=>{let w;return v?w=P:b?w=k:m.route.Component?w=V.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=f,V.createElement(SS,{match:m,routeContext:{outlet:f,matches:S,isDataRoute:n!=null},children:w})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?V.createElement(CS,{location:n.location,revalidation:n.revalidation,component:P,error:v,children:x(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):x()},null)}var W_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(W_||{}),Tc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tc||{});function bS(t){let e=V.useContext(wm);return e||$e(!1),e}function AS(t){let e=V.useContext(yS);return e||$e(!1),e}function PS(t){let e=V.useContext(Wr);return e||$e(!1),e}function H_(t){let e=PS(),n=e.matches[e.matches.length-1];return n.route.id||$e(!1),n.route.id}function kS(){var t;let e=V.useContext(z_),n=AS(Tc.UseRouteError),r=H_(Tc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function jS(){let{router:t}=bS(W_.UseNavigateStable),e=H_(Tc.UseNavigateStable),n=V.useRef(!1);return B_(()=>{n.current=!0}),V.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,co({fromRouteId:e},i)))},[t,e])}const Oy={};function RS(t,e,n){!e&&!Oy[t]&&(Oy[t]=!0)}function DS(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Lt(t){$e(!1)}function MS(t){let{basename:e="/",children:n=null,location:r,navigationType:s=pr.Pop,navigator:i,static:a=!1,future:c}=t;bo()&&$e(!1);let u=e.replace(/^\/*/,"/"),d=V.useMemo(()=>({basename:u,navigator:i,static:a,future:co({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof r=="string"&&(r=Vi(r));let{pathname:f="/",search:m="",hash:g="",state:v=null,key:b="default"}=r,P=V.useMemo(()=>{let k=_m(f,u);return k==null?null:{location:{pathname:k,search:m,hash:g,state:v,key:b},navigationType:s}},[u,f,m,g,v,b,s]);return P==null?null:V.createElement(bs.Provider,{value:d},V.createElement(fu.Provider,{children:n,value:P}))}function Vy(t){let{children:e,location:n}=t;return wS(Bh(e),n)}new Promise(()=>{});function Bh(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let i=[...e,s];if(r.type===V.Fragment){n.push.apply(n,Bh(r.props.children,i));return}r.type!==Lt&&$e(!1),!r.props.index||!r.props.children||$e(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Bh(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qh(){return qh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qh.apply(this,arguments)}function OS(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function VS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LS(t,e){return t.button===0&&(!e||e==="_self")&&!VS(t)}function Wh(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function FS(t,e){let n=Wh(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const US=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],$S="6";try{window.__reactRouterVersion=$S}catch{}const zS="startTransition",Ly=DT[zS];function BS(t){let{basename:e,children:n,future:r,window:s}=t,i=V.useRef();i.current==null&&(i.current=HC({window:s,v5Compat:!0}));let a=i.current,[c,u]=V.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=V.useCallback(m=>{d&&Ly?Ly(()=>u(m)):u(m)},[u,d]);return V.useLayoutEffect(()=>a.listen(f),[a,f]),V.useEffect(()=>DS(r),[r]),V.createElement(MS,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const qS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ni=V.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=OS(e,US),{basename:v}=V.useContext(bs),b,P=!1;if(typeof d=="string"&&WS.test(d)&&(b=d,qS))try{let w=new URL(window.location.href),j=d.startsWith("//")?new URL(w.protocol+d):new URL(d),O=_m(j.pathname,v);j.origin===w.origin&&O!=null?d=O+j.search+j.hash:P=!0}catch{}let k=vS(d,{relative:s}),S=HS(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function x(w){r&&r(w),w.defaultPrevented||S(w)}return V.createElement("a",qh({},g,{href:b||k,onClick:P||i?r:x,ref:n,target:u}))});var Fy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fy||(Fy={}));var Uy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Uy||(Uy={}));function HS(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=Xn(),d=Li(),f=q_(t,{relative:a});return V.useCallback(m=>{if(LS(m,n)){m.preventDefault();let g=r!==void 0?r:Ec(d)===Ec(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,f,r,s,n,t,i,a,c])}function Q_(t){let e=V.useRef(Wh(t)),n=V.useRef(!1),r=Li(),s=V.useMemo(()=>FS(r.search,n.current?null:e.current),[r.search]),i=Xn(),a=V.useCallback((c,u)=>{const d=Wh(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,a]}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},GS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},K_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,v=d&63;u||(v=64,a||(g=64)),r.push(n[f],n[m],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(G_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new KS;const g=i<<2|c>>4;if(r.push(g),d!==64){const v=c<<4&240|d>>2;if(r.push(v),m!==64){const b=d<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YS=function(t){const e=G_(t);return K_.encodeByteArray(e,!0)},Nc=function(t){return YS(t).replace(/\./g,"")},Y_=function(t){try{return K_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=()=>XS().__FIREBASE_DEFAULTS__,ZS=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Y_(t[1]);return e&&JSON.parse(e)},mu=()=>{try{return QS()||JS()||ZS()||eI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},X_=t=>{var e,n;return(n=(e=mu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tI=t=>{const e=X_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},J_=()=>{var t;return(t=mu())==null?void 0:t.config},Z_=t=>{var e;return(e=mu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function e1(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t},c="";return[Nc(JSON.stringify(n)),Nc(JSON.stringify(a)),c].join(".")}const Fa={};function sI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Fa))Fa[e]?t.emulator.push(e):t.prod.push(e);return t}function iI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let $y=!1;function t1(t,e){if(typeof window>"u"||typeof document>"u"||!Fi(window.location.host)||Fa[t]===e||Fa[t]||$y)return;Fa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=sI().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{$y=!0,a()},g}function f(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=iI(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),P=n("learnmore"),k=document.getElementById(P)||document.createElement("a"),S=n("preprendIcon"),x=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const w=g.element;c(w),f(k,P);const j=d();u(x,S),w.append(x,b,k,j),document.body.appendChild(w)}i?(b.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function oI(){var e;const t=(e=mu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function cI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function uI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dI(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hI(){return!oI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fI(){try{return typeof indexedDB=="object"}catch{return!1}}function mI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="FirebaseError";class Jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pI,Object.setPrototypeOf(this,Jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?gI(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new Jn(s,c,r)}}function gI(t,e){return t.replace(yI,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yI=/\{\$([^}]+)}/g;function vI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(zy(i)&&zy(a)){if(!xs(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function zy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Na(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ca(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function xI(t,e){const n=new _I(t,e);return n.subscribe.bind(n)}class _I{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Od),s.error===void 0&&(s.error=Od),s.complete===void 0&&(s.complete=Od);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){return t&&t._delegate?t._delegate:t}class _s{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NI(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TI(t){return t===ns?void 0:t}function NI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const SI={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},II=ie.INFO,bI={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},AI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=bI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Em{constructor(e){this.name=e,this._logLevel=II,this._logHandler=AI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const PI=(t,e)=>e.some(n=>t instanceof n);let By,qy;function kI(){return By||(By=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jI(){return qy||(qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const n1=new WeakMap,Hh=new WeakMap,r1=new WeakMap,Vd=new WeakMap,Tm=new WeakMap;function RI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Sr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&n1.set(n,t)}).catch(()=>{}),Tm.set(e,t),e}function DI(t){if(Hh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Hh.set(t,e)}let Qh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Hh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||r1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function MI(t){Qh=t(Qh)}function OI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ld(this),e,...n);return r1.set(r,e.sort?e.sort():[e]),Sr(r)}:jI().includes(t)?function(...e){return t.apply(Ld(this),e),Sr(n1.get(this))}:function(...e){return Sr(t.apply(Ld(this),e))}}function VI(t){return typeof t=="function"?OI(t):(t instanceof IDBTransaction&&DI(t),PI(t,kI())?new Proxy(t,Qh):t)}function Sr(t){if(t instanceof IDBRequest)return RI(t);if(Vd.has(t))return Vd.get(t);const e=VI(t);return e!==t&&(Vd.set(t,e),Tm.set(e,t)),e}const Ld=t=>Tm.get(t);function LI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=Sr(a);return r&&a.addEventListener("upgradeneeded",u=>{r(Sr(a.result),u.oldVersion,u.newVersion,Sr(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const FI=["get","getKey","getAll","getAllKeys","count"],UI=["put","add","delete","clear"],Fd=new Map;function Wy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Fd.get(e))return Fd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=UI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||FI.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Fd.set(e,i),i}MI(t=>({...t,get:(e,n,r)=>Wy(e,n)||t.get(e,n,r),has:(e,n)=>!!Wy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function zI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gh="@firebase/app",Hy="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new Em("@firebase/app"),BI="@firebase/app-compat",qI="@firebase/analytics-compat",WI="@firebase/analytics",HI="@firebase/app-check-compat",QI="@firebase/app-check",GI="@firebase/auth",KI="@firebase/auth-compat",YI="@firebase/database",XI="@firebase/data-connect",JI="@firebase/database-compat",ZI="@firebase/functions",eb="@firebase/functions-compat",tb="@firebase/installations",nb="@firebase/installations-compat",rb="@firebase/messaging",sb="@firebase/messaging-compat",ib="@firebase/performance",ab="@firebase/performance-compat",ob="@firebase/remote-config",lb="@firebase/remote-config-compat",cb="@firebase/storage",ub="@firebase/storage-compat",db="@firebase/firestore",hb="@firebase/ai",fb="@firebase/firestore-compat",mb="firebase",pb="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="[DEFAULT]",gb={[Gh]:"fire-core",[BI]:"fire-core-compat",[WI]:"fire-analytics",[qI]:"fire-analytics-compat",[QI]:"fire-app-check",[HI]:"fire-app-check-compat",[GI]:"fire-auth",[KI]:"fire-auth-compat",[YI]:"fire-rtdb",[XI]:"fire-data-connect",[JI]:"fire-rtdb-compat",[ZI]:"fire-fn",[eb]:"fire-fn-compat",[tb]:"fire-iid",[nb]:"fire-iid-compat",[rb]:"fire-fcm",[sb]:"fire-fcm-compat",[ib]:"fire-perf",[ab]:"fire-perf-compat",[ob]:"fire-rc",[lb]:"fire-rc-compat",[cb]:"fire-gcs",[ub]:"fire-gcs-compat",[db]:"fire-fst",[fb]:"fire-fst-compat",[hb]:"fire-vertex","fire-js":"fire-js",[mb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new Map,yb=new Map,Yh=new Map;function Qy(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ci(t){const e=t.name;if(Yh.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;Yh.set(e,t);for(const n of Cc.values())Qy(n,t);for(const n of yb.values())Qy(n,t);return!0}function Nm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $t(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new Ao("app","Firebase",vb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _s("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=pb;function s1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Kh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Ir.create("bad-app-name",{appName:String(s)});if(n||(n=J_()),!n)throw Ir.create("no-options");const i=Cc.get(s);if(i){if(xs(n,i.options)&&xs(r,i.config))return i;throw Ir.create("duplicate-app",{appName:s})}const a=new CI(s);for(const u of Yh.values())a.addComponent(u);const c=new xb(n,r,a);return Cc.set(s,c),c}function i1(t=Kh){const e=Cc.get(t);if(!e&&t===Kh&&J_())return s1();if(!e)throw Ir.create("no-app",{appName:t});return e}function br(t,e,n){let r=gb[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(a.join(" "));return}Ci(new _s(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="firebase-heartbeat-database",wb=1,uo="firebase-heartbeat-store";let Ud=null;function a1(){return Ud||(Ud=LI(_b,wb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),Ud}async function Eb(t){try{const n=(await a1()).transaction(uo),r=await n.objectStore(uo).get(o1(t));return await n.done,r}catch(e){if(e instanceof Jn)qn.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qn.warn(n.message)}}}async function Gy(t,e){try{const r=(await a1()).transaction(uo,"readwrite");await r.objectStore(uo).put(e,o1(t)),await r.done}catch(n){if(n instanceof Jn)qn.warn(n.message);else{const r=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qn.warn(r.message)}}}function o1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=1024,Nb=30;class Cb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Ib(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ky();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Nb){const a=bb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ky(),{heartbeatsToSend:r,unsentEntries:s}=Sb(this._heartbeatsCache.heartbeats),i=Nc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qn.warn(n),""}}}function Ky(){return new Date().toISOString().substring(0,10)}function Sb(t,e=Tb){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Yy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Yy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Ib{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fI()?mI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Eb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Gy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Yy(t){return Nc(JSON.stringify({version:2,heartbeats:t})).length}function bb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){Ci(new _s("platform-logger",e=>new $I(e),"PRIVATE")),Ci(new _s("heartbeat",e=>new Cb(e),"PRIVATE")),br(Gh,Hy,t),br(Gh,Hy,"esm2020"),br("fire-js","")}Ab("");function l1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Pb=l1,c1=new Ao("auth","Firebase",l1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Em("@firebase/auth");function kb(t,...e){Sc.logLevel<=ie.WARN&&Sc.warn(`Auth (${Ui}): ${t}`,...e)}function zl(t,...e){Sc.logLevel<=ie.ERROR&&Sc.error(`Auth (${Ui}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw Cm(t,...e)}function vn(t,...e){return Cm(t,...e)}function u1(t,e,n){const r={...Pb(),[e]:n};return new Ao("auth","Firebase",r).create(e,{appName:t.name})}function Ln(t){return u1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return c1.create(t,...e)}function X(t,e,...n){if(!t)throw Cm(e,...n)}function Mn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zl(e),new Error(e)}function Wn(t,e){t||Mn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function jb(){return Xy()==="http:"||Xy()==="https:"}function Xy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jb()||cI()||"connection"in navigator)?navigator.onLine:!0}function Db(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wn(n>e,"Short delay should be less than long delay!"),this.isMobile=aI()||uI()}get(){return Rb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e){Wn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Vb=new ko(3e4,6e4);function Hr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Qr(t,e,n,r,s={}){return h1(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Po({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return lI()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Fi(t.emulatorConfig.host)&&(d.credentials="include"),d1.fetch()(await f1(t,t.config.apiHost,n,c),d)})}async function h1(t,e,n){t._canInitEmulator=!1;const r={...Mb,...e};try{const s=new Fb(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Nl(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Nl(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw Nl(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw u1(t,f,d);an(t,f)}}catch(s){if(s instanceof Jn)throw s;an(t,"network-request-failed",{message:String(s)})}}async function jo(t,e,n,r,s={}){const i=await Qr(t,e,n,r,s);return"mfaPendingCredential"in i&&an(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function f1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Sm(t.config,s):`${t.config.apiScheme}://${s}`;return Ob.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function Lb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Fb{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vn(this.auth,"network-request-failed")),Vb.get())})}}function Nl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=vn(t,e,r);return s.customData._tokenResponse=n,s}function Jy(t){return t!==void 0&&t.enterprise!==void 0}class Ub{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Lb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function $b(t,e){return Qr(t,"GET","/v2/recaptchaConfig",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zb(t,e){return Qr(t,"POST","/v1/accounts:delete",e)}async function Ic(t,e){return Qr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Bb(t,e=!1){const n=Ke(t),r=await n.getIdToken(e),s=Im(r);X(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ua($d(s.auth_time)),issuedAtTime:Ua($d(s.iat)),expirationTime:Ua($d(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function $d(t){return Number(t)*1e3}function Im(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Y_(n);return s?JSON.parse(s):(zl("Failed to decode base64 JWT payload"),null)}catch(s){return zl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Zy(t){const e=Im(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Jn&&qb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function qb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ua(this.lastLoginAt),this.creationTime=Ua(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bc(t){var m;const e=t.auth,n=await t.getIdToken(),r=await ho(t,Ic(e,{idToken:n}));X(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?m1(s.providerUserInfo):[],a=Qb(t.providerData,i),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function Hb(t){const e=Ke(t);await bc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Qb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function m1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gb(t,e){const n=await h1(t,{},async()=>{const r=Po({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await f1(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Fi(t.emulatorConfig.host)&&(u.credentials="include"),d1.fetch()(a,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Kb(t,e){return Qr(t,"POST","/v2/accounts:revokeToken",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=Zy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Gb(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new di;return r&&(X(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(X(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(X(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new di,this.toJSON())}_performRefresh(){return Mn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Zt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new Wb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ho(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Bb(this,e)}reload(){return Hb(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Zt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await bc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($t(this.auth.app))return Promise.reject(Ln(this.auth));const e=await this.getIdToken();return await ho(this,zb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,f=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:P}=n;X(m&&P,e,"internal-error");const k=di.fromJSON(this.name,P);X(typeof m=="string",e,"internal-error"),rr(r,e.name),rr(s,e.name),X(typeof g=="boolean",e,"internal-error"),X(typeof v=="boolean",e,"internal-error"),rr(i,e.name),rr(a,e.name),rr(c,e.name),rr(u,e.name),rr(d,e.name),rr(f,e.name);const S=new Zt({uid:m,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:i,tenantId:c,stsTokenManager:k,createdAt:d,lastLoginAt:f});return b&&Array.isArray(b)&&(S.providerData=b.map(x=>({...x}))),u&&(S._redirectEventId=u),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new di;s.updateFromServerResponse(n);const i=new Zt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await bc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];X(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?m1(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new di;c.updateFromIdToken(r);const u=new Zt({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Jh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=new Map;function On(t){Wn(t instanceof Function,"Expected a class definition");let e=e0.get(t);return e?(Wn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,e0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}p1.type="NONE";const t0=p1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t,e,n){return`firebase:${t}:${e}:${n}`}class hi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Bl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Bl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ic(this.auth,{idToken:e}).catch(()=>{});return n?Zt._fromGetAccountInfoResponse(this.auth,n,e):null}return Zt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hi(On(t0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||On(t0);const a=Bl(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){let m;if(typeof f=="string"){const g=await Ic(e,{idToken:f}).catch(()=>{});if(!g)break;m=await Zt._fromGetAccountInfoResponse(e,g,f)}else m=Zt._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new hi(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new hi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(x1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(g1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(w1(e))return"Blackberry";if(E1(e))return"Webos";if(y1(e))return"Safari";if((e.includes("chrome/")||v1(e))&&!e.includes("edge/"))return"Chrome";if(_1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function g1(t=pt()){return/firefox\//i.test(t)}function y1(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function v1(t=pt()){return/crios\//i.test(t)}function x1(t=pt()){return/iemobile/i.test(t)}function _1(t=pt()){return/android/i.test(t)}function w1(t=pt()){return/blackberry/i.test(t)}function E1(t=pt()){return/webos/i.test(t)}function bm(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Yb(t=pt()){var e;return bm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function Xb(){return dI()&&document.documentMode===10}function T1(t=pt()){return bm(t)||_1(t)||E1(t)||w1(t)||/windows phone/i.test(t)||x1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(t,e=[]){let n;switch(t){case"Browser":n=n0(pt());break;case"Worker":n=`${n0(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ui}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb(t,e={}){return Qr(t,"GET","/v2/passwordPolicy",Hr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=6;class tA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??eA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new r0(this),this.idTokenSubscription=new r0(this),this.beforeStateQueue=new Jb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=On(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await hi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ic(this,{idToken:e}),r=await Zt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if($t(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,c=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await bc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Db()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($t(this.app))return Promise.reject(Ln(this));const n=e?Ke(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $t(this.app)?Promise.reject(Ln(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $t(this.app)?Promise.reject(Ln(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(On(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Zb(this),n=new tA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Kb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&On(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await hi.create(this,[On(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if($t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&kb(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function As(t){return Ke(t)}class r0{constructor(e){this.auth=e,this.observer=null,this.addObserver=xI(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function rA(t){pu=t}function C1(t){return pu.loadJS(t)}function sA(){return pu.recaptchaEnterpriseScript}function iA(){return pu.gapiScript}function aA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class oA{constructor(){this.enterprise=new lA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class lA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const cA="recaptcha-enterprise",S1="NO_RECAPTCHA";class uA{constructor(e){this.type=cA,this.auth=As(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{$b(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new Ub(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;Jy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(S1)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oA().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&Jy(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=sA();u.length!==0&&(u+=c),C1(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function ga(t,e,n,r=!1,s=!1){const i=new uA(t);let a;if(s)a=S1;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,d=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Zh(t,e,n,r,s){var i,a;if(s==="EMAIL_PASSWORD_PROVIDER")if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ga(t,e,n,n==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await ga(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(c)});else if(s==="PHONE_PROVIDER")if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("PHONE_PROVIDER")){const c=await ga(t,e,n);return r(t,c).catch(async u=>{var d;if(((d=t._getRecaptchaConfig())==null?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const f=await ga(t,e,n,!1,!0);return r(t,f)}return Promise.reject(u)})}else{const c=await ga(t,e,n,!1,!0);return r(t,c)}else return Promise.reject(s+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e){const n=Nm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(xs(i,e??{}))return s;an(s,"already-initialized")}return n.initialize({options:e})}function hA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(On);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fA(t,e,n){const r=As(t);X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=I1(e),{host:a,port:c}=mA(e),u=c===null?"":`:${c}`,d={url:`${i}//${a}${u}/`},f=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){X(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),X(xs(d,r.config.emulator)&&xs(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,Fi(a)?(e1(`${i}//${a}${u}`),t1("Auth",!0)):s||pA()}function I1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mA(t){const e=I1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:s0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:s0(a)}}}function s0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Mn("not implemented")}_getIdTokenResponse(e){return Mn("not implemented")}_linkToIdToken(e,n){return Mn("not implemented")}_getReauthenticationResolver(e){return Mn("not implemented")}}async function gA(t,e){return Qr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yA(t,e){return jo(t,"POST","/v1/accounts:signInWithPassword",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vA(t,e){return jo(t,"POST","/v1/accounts:signInWithEmailLink",Hr(t,e))}async function xA(t,e){return jo(t,"POST","/v1/accounts:signInWithEmailLink",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends Am{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fo(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fo(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zh(e,n,"signInWithPassword",yA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vA(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zh(e,r,"signUpPassword",gA,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return xA(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t,e){return jo(t,"POST","/v1/accounts:signInWithIdp",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="http://localhost";class ws extends Am{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new ws(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return fi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fi(e,n)}buildRequest(){const e={requestUri:_A,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Po(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function EA(t){const e=Na(Ca(t)).link,n=e?Na(Ca(e)).deep_link_id:null,r=Na(Ca(t)).deep_link_id;return(r?Na(Ca(r)).link:null)||r||n||e||t}class Pm{constructor(e){const n=Na(Ca(e)),r=n.apiKey??null,s=n.oobCode??null,i=wA(n.mode??null);X(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=EA(e);try{return new Pm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(){this.providerId=$i.PROVIDER_ID}static credential(e,n){return fo._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Pm.parseLink(n);return X(r,"argument-error"),fo._fromEmailAndCode(e,r.code,r.tenantId)}}$i.PROVIDER_ID="password";$i.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$i.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro extends b1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Ro{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Ro{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends Ro{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Ro{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(t,e){return jo(t,"POST","/v1/accounts:signUp",Hr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Zt._fromIdTokenResponse(e,r,s),a=i0(r);return new Es({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=i0(r);return new Es({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function i0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends Jn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ac.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ac(e,n,r,s)}}function A1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ac._fromErrorAndOperation(t,i,e,r):i})}async function NA(t,e,n=!1){const r=await ho(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CA(t,e,n=!1){const{auth:r}=t;if($t(r.app))return Promise.reject(Ln(r));const s="reauthenticate";try{const i=await ho(t,A1(r,s,e,t),n);X(i.idToken,r,"internal-error");const a=Im(i.idToken);X(a,r,"internal-error");const{sub:c}=a;return X(t.uid===c,r,"user-mismatch"),Es._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&an(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P1(t,e,n=!1){if($t(t.app))return Promise.reject(Ln(t));const r="signIn",s=await A1(t,r,e),i=await Es._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function SA(t,e){return P1(As(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k1(t){const e=As(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function IA(t,e,n){if($t(t.app))return Promise.reject(Ln(t));const r=As(t),a=await Zh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",TA,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&k1(t),u}),c=await Es._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function bA(t,e,n){return $t(t.app)?Promise.reject(Ln(t)):SA(Ke(t),$i.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&k1(t),r})}function AA(t,e,n,r){return Ke(t).onIdTokenChanged(e,n,r)}function PA(t,e,n){return Ke(t).beforeAuthStateChanged(e,n)}function kA(t,e,n,r){return Ke(t).onAuthStateChanged(e,n,r)}function jA(t){return Ke(t).signOut()}const Pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Pc,"1"),this.storage.removeItem(Pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=1e3,DA=10;class R1 extends j1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=T1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);Xb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,DA):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},RA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}R1.type="LOCAL";const MA=R1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1 extends j1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}D1.type="SESSION";const M1=D1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new gu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await OA(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=km("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function LA(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function FA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UA(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function $A(){return O1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="firebaseLocalStorageDb",zA=1,kc="firebaseLocalStorage",L1="fbase_key";class Do{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function yu(t,e){return t.transaction([kc],e?"readwrite":"readonly").objectStore(kc)}function BA(){const t=indexedDB.deleteDatabase(V1);return new Do(t).toPromise()}function ef(){const t=indexedDB.open(V1,zA);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(kc,{keyPath:L1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(kc)?e(r):(r.close(),await BA(),e(await ef()))})})}async function a0(t,e,n){const r=yu(t,!0).put({[L1]:e,value:n});return new Do(r).toPromise()}async function qA(t,e){const n=yu(t,!1).get(e),r=await new Do(n).toPromise();return r===void 0?null:r.value}function o0(t,e){const n=yu(t,!0).delete(e);return new Do(n).toPromise()}const WA=800,HA=3;class F1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ef(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>HA)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return O1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gu._getInstance($A()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await FA(),!this.activeServiceWorker)return;this.sender=new VA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||UA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ef();return await a0(e,Pc,"1"),await o0(e,Pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>a0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>qA(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=yu(s,!1).getAll();return new Do(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F1.type="LOCAL";const QA=F1;new ko(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t,e){return e?On(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm extends Am{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KA(t){return P1(t.auth,new jm(t),t.bypassAuthState)}function YA(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),CA(n,new jm(t),t.bypassAuthState)}async function XA(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),NA(n,new jm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KA;case"linkViaPopup":case"linkViaRedirect":return XA;case"reauthViaPopup":case"reauthViaRedirect":return YA;default:an(this.auth,"internal-error")}}resolve(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new ko(2e3,1e4);class ri extends U1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ri.currentPopupAction&&ri.currentPopupAction.cancel(),ri.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){Wn(this.filter.length===1,"Popup operations only handle one event");const e=km();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ri.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,JA.get())};e()}}ri.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="pendingRedirect",ql=new Map;class e2 extends U1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ql.get(this.auth._key());if(!e){try{const r=await t2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ql.set(this.auth._key(),e)}return this.bypassAuthState||ql.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t2(t,e){const n=s2(e),r=r2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function n2(t,e){ql.set(t._key(),e)}function r2(t){return On(t._redirectPersistence)}function s2(t){return Bl(ZA,t.config.apiKey,t.name)}async function i2(t,e,n=!1){if($t(t.app))return Promise.reject(Ln(t));const r=As(t),s=GA(r,e),a=await new e2(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=10*60*1e3;class o2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(vn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=a2&&this.cachedEventUids.clear(),this.cachedEventUids.has(l0(e))}saveEventToCache(e){this.cachedEventUids.add(l0(e)),this.lastProcessedEventTime=Date.now()}}function l0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function l2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(t,e={}){return Qr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,d2=/^https?/;async function h2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await c2(t);for(const n of e)try{if(f2(n))return}catch{}an(t,"unauthorized-domain")}function f2(t){const e=Xh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!d2.test(n))return!1;if(u2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=new ko(3e4,6e4);function c0(){const t=xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function p2(t){return new Promise((e,n)=>{var s,i,a;function r(){c0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c0(),n(vn(t,"network-request-failed"))},timeout:m2.get()})}if((i=(s=xn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=xn().gapi)!=null&&a.load)r();else{const c=aA("iframefcb");return xn()[c]=()=>{gapi.load?r():n(vn(t,"network-request-failed"))},C1(`${iA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Wl=null,e})}let Wl=null;function g2(t){return Wl=Wl||p2(t),Wl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=new ko(5e3,15e3),v2="__/auth/iframe",x2="emulator/auth/iframe",_2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function E2(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sm(e,x2):`https://${t.config.authDomain}/${v2}`,r={apiKey:e.apiKey,appName:t.name,v:Ui},s=w2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Po(r).slice(1)}`}async function T2(t){const e=await g2(t),n=xn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:E2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=vn(t,"network-request-failed"),c=xn().setTimeout(()=>{i(a)},y2.get());function u(){xn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},C2=500,S2=600,I2="_blank",b2="http://localhost";class u0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function A2(t,e,n,r=C2,s=S2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...N2,width:r.toString(),height:s.toString(),top:i,left:a},d=pt().toLowerCase();n&&(c=v1(d)?I2:n),g1(d)&&(e=e||b2,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(Yb(d)&&c!=="_self")return P2(e||"",c),new u0(null);const m=window.open(e||"",c,f);X(m,t,"popup-blocked");try{m.focus()}catch{}return new u0(m)}function P2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="__/auth/handler",j2="emulator/auth/handler",R2=encodeURIComponent("fac");async function d0(t,e,n,r,s,i){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ui,eventId:s};if(e instanceof b1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",vI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries(i||{}))a[f]=m}if(e instanceof Ro){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${R2}=${encodeURIComponent(u)}`:"";return`${D2(t)}?${Po(c).slice(1)}${d}`}function D2({config:t}){return t.emulator?Sm(t,j2):`https://${t.authDomain}/${k2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class M2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=M1,this._completeRedirectFn=i2,this._overrideRedirectResult=n2}async _openPopup(e,n,r,s){var a;Wn((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await d0(e,n,r,Xh(),s);return A2(e,i,km())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await d0(e,n,r,Xh(),s);return LA(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Wn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await T2(e),r=new o2(e);return n.register("authEvent",s=>(X(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[zd];i!==void 0&&n(!!i),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=h2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return T1()||y1()||bm()}}const O2=M2;var h0="@firebase/auth",f0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F2(t){Ci(new _s("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;X(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N1(t)},d=new nA(r,s,i,u);return hA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ci(new _s("auth-internal",e=>{const n=As(e.getProvider("auth").getImmediate());return(r=>new V2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(h0,f0,L2(t)),br(h0,f0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=5*60,$2=Z_("authIdTokenMaxAge")||U2;let m0=null;const z2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$2)return;const s=n==null?void 0:n.token;m0!==s&&(m0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function B2(t=i1()){const e=Nm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dA(t,{popupRedirectResolver:O2,persistence:[QA,MA,M1]}),r=Z_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=z2(i.toString());PA(n,a,()=>a(n.currentUser)),AA(n,c=>a(c))}}const s=X_("auth");return s&&fA(n,`http://${s}`),n}function q2(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}rA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=vn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",q2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F2("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function W2(t,e,n,r){function s(i){return i instanceof n?i:new n(function(a){a(i)})}return new(n||(n=Promise))(function(i,a){function c(f){try{d(r.next(f))}catch(m){a(m)}}function u(f){try{d(r.throw(f))}catch(m){a(m)}}function d(f){f.done?i(f.value):s(f.value).then(c,u)}d((r=r.apply(t,e||[])).next())})}function H2(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(d){return function(f){return u([d,f])}}function u(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(f){d=[6,f],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var si=function(){return si=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},si.apply(this,arguments)},z1=function(t){return{loading:t==null,value:t}},Q2=function(){return function(t,e){switch(e.type){case"error":return si(si({},t),{error:e.error,loading:!1,value:void 0});case"reset":return z1(e.defaultValue);case"value":return si(si({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},G2=function(t){var e=t?t():void 0,n=V.useReducer(Q2(),z1(e)),r=n[0],s=n[1],i=V.useCallback(function(){var u=t?t():void 0;s({type:"reset",defaultValue:u})},[t]),a=V.useCallback(function(u){s({type:"error",error:u})},[]),c=V.useCallback(function(u){s({type:"value",value:u})},[]);return V.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:a,setValue:c,value:r.value}},[r.error,r.loading,i,a,c,r.value])},B1=function(t,e){var n=G2(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,a=n.setValue,c=n.value;return V.useEffect(function(){var u=kA(t,function(d){return W2(void 0,void 0,void 0,function(){var f;return H2(this,function(m){switch(m.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,e.onUserChanged(d)];case 2:return m.sent(),[3,4];case 3:return f=m.sent(),i(f),[3,4];case 4:return a(d),[2]}})})},i);return function(){u()}},[t]),[c,s,r]},K2="firebase",Y2="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(K2,Y2,"app");var p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,q1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,y){function N(){}N.prototype=y.prototype,A.D=y.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(C,I,_){for(var T=Array(arguments.length-2),D=2;D<arguments.length;D++)T[D-2]=arguments[D];return y.prototype[I].apply(C,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,y,N){N||(N=0);var C=Array(16);if(typeof y=="string")for(var I=0;16>I;++I)C[I]=y.charCodeAt(N++)|y.charCodeAt(N++)<<8|y.charCodeAt(N++)<<16|y.charCodeAt(N++)<<24;else for(I=0;16>I;++I)C[I]=y[N++]|y[N++]<<8|y[N++]<<16|y[N++]<<24;y=A.g[0],N=A.g[1],I=A.g[2];var _=A.g[3],T=y+(_^N&(I^_))+C[0]+3614090360&4294967295;y=N+(T<<7&4294967295|T>>>25),T=_+(I^y&(N^I))+C[1]+3905402710&4294967295,_=y+(T<<12&4294967295|T>>>20),T=I+(N^_&(y^N))+C[2]+606105819&4294967295,I=_+(T<<17&4294967295|T>>>15),T=N+(y^I&(_^y))+C[3]+3250441966&4294967295,N=I+(T<<22&4294967295|T>>>10),T=y+(_^N&(I^_))+C[4]+4118548399&4294967295,y=N+(T<<7&4294967295|T>>>25),T=_+(I^y&(N^I))+C[5]+1200080426&4294967295,_=y+(T<<12&4294967295|T>>>20),T=I+(N^_&(y^N))+C[6]+2821735955&4294967295,I=_+(T<<17&4294967295|T>>>15),T=N+(y^I&(_^y))+C[7]+4249261313&4294967295,N=I+(T<<22&4294967295|T>>>10),T=y+(_^N&(I^_))+C[8]+1770035416&4294967295,y=N+(T<<7&4294967295|T>>>25),T=_+(I^y&(N^I))+C[9]+2336552879&4294967295,_=y+(T<<12&4294967295|T>>>20),T=I+(N^_&(y^N))+C[10]+4294925233&4294967295,I=_+(T<<17&4294967295|T>>>15),T=N+(y^I&(_^y))+C[11]+2304563134&4294967295,N=I+(T<<22&4294967295|T>>>10),T=y+(_^N&(I^_))+C[12]+1804603682&4294967295,y=N+(T<<7&4294967295|T>>>25),T=_+(I^y&(N^I))+C[13]+4254626195&4294967295,_=y+(T<<12&4294967295|T>>>20),T=I+(N^_&(y^N))+C[14]+2792965006&4294967295,I=_+(T<<17&4294967295|T>>>15),T=N+(y^I&(_^y))+C[15]+1236535329&4294967295,N=I+(T<<22&4294967295|T>>>10),T=y+(I^_&(N^I))+C[1]+4129170786&4294967295,y=N+(T<<5&4294967295|T>>>27),T=_+(N^I&(y^N))+C[6]+3225465664&4294967295,_=y+(T<<9&4294967295|T>>>23),T=I+(y^N&(_^y))+C[11]+643717713&4294967295,I=_+(T<<14&4294967295|T>>>18),T=N+(_^y&(I^_))+C[0]+3921069994&4294967295,N=I+(T<<20&4294967295|T>>>12),T=y+(I^_&(N^I))+C[5]+3593408605&4294967295,y=N+(T<<5&4294967295|T>>>27),T=_+(N^I&(y^N))+C[10]+38016083&4294967295,_=y+(T<<9&4294967295|T>>>23),T=I+(y^N&(_^y))+C[15]+3634488961&4294967295,I=_+(T<<14&4294967295|T>>>18),T=N+(_^y&(I^_))+C[4]+3889429448&4294967295,N=I+(T<<20&4294967295|T>>>12),T=y+(I^_&(N^I))+C[9]+568446438&4294967295,y=N+(T<<5&4294967295|T>>>27),T=_+(N^I&(y^N))+C[14]+3275163606&4294967295,_=y+(T<<9&4294967295|T>>>23),T=I+(y^N&(_^y))+C[3]+4107603335&4294967295,I=_+(T<<14&4294967295|T>>>18),T=N+(_^y&(I^_))+C[8]+1163531501&4294967295,N=I+(T<<20&4294967295|T>>>12),T=y+(I^_&(N^I))+C[13]+2850285829&4294967295,y=N+(T<<5&4294967295|T>>>27),T=_+(N^I&(y^N))+C[2]+4243563512&4294967295,_=y+(T<<9&4294967295|T>>>23),T=I+(y^N&(_^y))+C[7]+1735328473&4294967295,I=_+(T<<14&4294967295|T>>>18),T=N+(_^y&(I^_))+C[12]+2368359562&4294967295,N=I+(T<<20&4294967295|T>>>12),T=y+(N^I^_)+C[5]+4294588738&4294967295,y=N+(T<<4&4294967295|T>>>28),T=_+(y^N^I)+C[8]+2272392833&4294967295,_=y+(T<<11&4294967295|T>>>21),T=I+(_^y^N)+C[11]+1839030562&4294967295,I=_+(T<<16&4294967295|T>>>16),T=N+(I^_^y)+C[14]+4259657740&4294967295,N=I+(T<<23&4294967295|T>>>9),T=y+(N^I^_)+C[1]+2763975236&4294967295,y=N+(T<<4&4294967295|T>>>28),T=_+(y^N^I)+C[4]+1272893353&4294967295,_=y+(T<<11&4294967295|T>>>21),T=I+(_^y^N)+C[7]+4139469664&4294967295,I=_+(T<<16&4294967295|T>>>16),T=N+(I^_^y)+C[10]+3200236656&4294967295,N=I+(T<<23&4294967295|T>>>9),T=y+(N^I^_)+C[13]+681279174&4294967295,y=N+(T<<4&4294967295|T>>>28),T=_+(y^N^I)+C[0]+3936430074&4294967295,_=y+(T<<11&4294967295|T>>>21),T=I+(_^y^N)+C[3]+3572445317&4294967295,I=_+(T<<16&4294967295|T>>>16),T=N+(I^_^y)+C[6]+76029189&4294967295,N=I+(T<<23&4294967295|T>>>9),T=y+(N^I^_)+C[9]+3654602809&4294967295,y=N+(T<<4&4294967295|T>>>28),T=_+(y^N^I)+C[12]+3873151461&4294967295,_=y+(T<<11&4294967295|T>>>21),T=I+(_^y^N)+C[15]+530742520&4294967295,I=_+(T<<16&4294967295|T>>>16),T=N+(I^_^y)+C[2]+3299628645&4294967295,N=I+(T<<23&4294967295|T>>>9),T=y+(I^(N|~_))+C[0]+4096336452&4294967295,y=N+(T<<6&4294967295|T>>>26),T=_+(N^(y|~I))+C[7]+1126891415&4294967295,_=y+(T<<10&4294967295|T>>>22),T=I+(y^(_|~N))+C[14]+2878612391&4294967295,I=_+(T<<15&4294967295|T>>>17),T=N+(_^(I|~y))+C[5]+4237533241&4294967295,N=I+(T<<21&4294967295|T>>>11),T=y+(I^(N|~_))+C[12]+1700485571&4294967295,y=N+(T<<6&4294967295|T>>>26),T=_+(N^(y|~I))+C[3]+2399980690&4294967295,_=y+(T<<10&4294967295|T>>>22),T=I+(y^(_|~N))+C[10]+4293915773&4294967295,I=_+(T<<15&4294967295|T>>>17),T=N+(_^(I|~y))+C[1]+2240044497&4294967295,N=I+(T<<21&4294967295|T>>>11),T=y+(I^(N|~_))+C[8]+1873313359&4294967295,y=N+(T<<6&4294967295|T>>>26),T=_+(N^(y|~I))+C[15]+4264355552&4294967295,_=y+(T<<10&4294967295|T>>>22),T=I+(y^(_|~N))+C[6]+2734768916&4294967295,I=_+(T<<15&4294967295|T>>>17),T=N+(_^(I|~y))+C[13]+1309151649&4294967295,N=I+(T<<21&4294967295|T>>>11),T=y+(I^(N|~_))+C[4]+4149444226&4294967295,y=N+(T<<6&4294967295|T>>>26),T=_+(N^(y|~I))+C[11]+3174756917&4294967295,_=y+(T<<10&4294967295|T>>>22),T=I+(y^(_|~N))+C[2]+718787259&4294967295,I=_+(T<<15&4294967295|T>>>17),T=N+(_^(I|~y))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(I+(T<<21&4294967295|T>>>11))&4294967295,A.g[2]=A.g[2]+I&4294967295,A.g[3]=A.g[3]+_&4294967295}r.prototype.u=function(A,y){y===void 0&&(y=A.length);for(var N=y-this.blockSize,C=this.B,I=this.h,_=0;_<y;){if(I==0)for(;_<=N;)s(this,A,_),_+=this.blockSize;if(typeof A=="string"){for(;_<y;)if(C[I++]=A.charCodeAt(_++),I==this.blockSize){s(this,C),I=0;break}}else for(;_<y;)if(C[I++]=A[_++],I==this.blockSize){s(this,C),I=0;break}}this.h=I,this.o+=y},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;var N=8*this.o;for(y=A.length-8;y<A.length;++y)A[y]=N&255,N/=256;for(this.u(A),A=Array(16),y=N=0;4>y;++y)for(var C=0;32>C;C+=8)A[N++]=this.g[y]>>>C&255;return A};function i(A,y){var N=c;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=y(A)}function a(A,y){this.h=y;for(var N=[],C=!0,I=A.length-1;0<=I;I--){var _=A[I]|0;C&&_==y||(N[I]=_,C=!1)}this.g=N}var c={};function u(A){return-128<=A&&128>A?i(A,function(y){return new a([y|0],0>y?-1:0)}):new a([A|0],0>A?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return k(d(-A));for(var y=[],N=1,C=0;A>=N;C++)y[C]=A/N|0,N*=4294967296;return new a(y,0)}function f(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return k(f(A.substring(1),y));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=d(Math.pow(y,8)),C=m,I=0;I<A.length;I+=8){var _=Math.min(8,A.length-I),T=parseInt(A.substring(I,I+_),y);8>_?(_=d(Math.pow(y,_)),C=C.j(_).add(d(T))):(C=C.j(N),C=C.add(d(T)))}return C}var m=u(0),g=u(1),v=u(16777216);t=a.prototype,t.m=function(){if(P(this))return-k(this).m();for(var A=0,y=1,N=0;N<this.g.length;N++){var C=this.i(N);A+=(0<=C?C:4294967296+C)*y,y*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b(this))return"0";if(P(this))return"-"+k(this).toString(A);for(var y=d(Math.pow(A,6)),N=this,C="";;){var I=j(N,y).g;N=S(N,I.j(y));var _=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=I,b(N))return _+C;for(;6>_.length;)_="0"+_;C=_+C}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function b(A){if(A.h!=0)return!1;for(var y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=S(this,A),P(A)?-1:b(A)?0:1};function k(A){for(var y=A.g.length,N=[],C=0;C<y;C++)N[C]=~A.g[C];return new a(N,~A.h).add(g)}t.abs=function(){return P(this)?k(this):this},t.add=function(A){for(var y=Math.max(this.g.length,A.g.length),N=[],C=0,I=0;I<=y;I++){var _=C+(this.i(I)&65535)+(A.i(I)&65535),T=(_>>>16)+(this.i(I)>>>16)+(A.i(I)>>>16);C=T>>>16,_&=65535,T&=65535,N[I]=T<<16|_}return new a(N,N[N.length-1]&-2147483648?-1:0)};function S(A,y){return A.add(k(y))}t.j=function(A){if(b(this)||b(A))return m;if(P(this))return P(A)?k(this).j(k(A)):k(k(this).j(A));if(P(A))return k(this.j(k(A)));if(0>this.l(v)&&0>A.l(v))return d(this.m()*A.m());for(var y=this.g.length+A.g.length,N=[],C=0;C<2*y;C++)N[C]=0;for(C=0;C<this.g.length;C++)for(var I=0;I<A.g.length;I++){var _=this.i(C)>>>16,T=this.i(C)&65535,D=A.i(I)>>>16,G=A.i(I)&65535;N[2*C+2*I]+=T*G,x(N,2*C+2*I),N[2*C+2*I+1]+=_*G,x(N,2*C+2*I+1),N[2*C+2*I+1]+=T*D,x(N,2*C+2*I+1),N[2*C+2*I+2]+=_*D,x(N,2*C+2*I+2)}for(C=0;C<y;C++)N[C]=N[2*C+1]<<16|N[2*C];for(C=y;C<2*y;C++)N[C]=0;return new a(N,0)};function x(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function w(A,y){this.g=A,this.h=y}function j(A,y){if(b(y))throw Error("division by zero");if(b(A))return new w(m,m);if(P(A))return y=j(k(A),y),new w(k(y.g),k(y.h));if(P(y))return y=j(A,k(y)),new w(k(y.g),y.h);if(30<A.g.length){if(P(A)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var N=g,C=y;0>=C.l(A);)N=O(N),C=O(C);var I=U(N,1),_=U(C,1);for(C=U(C,2),N=U(N,2);!b(C);){var T=_.add(C);0>=T.l(A)&&(I=I.add(N),_=T),C=U(C,1),N=U(N,1)}return y=S(A,I.j(y)),new w(I,y)}for(I=m;0<=A.l(y);){for(N=Math.max(1,Math.floor(A.m()/y.m())),C=Math.ceil(Math.log(N)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),_=d(N),T=_.j(y);P(T)||0<T.l(A);)N-=C,_=d(N),T=_.j(y);b(_)&&(_=g),I=I.add(_),A=S(A,T)}return new w(I,A)}t.A=function(A){return j(this,A).h},t.and=function(A){for(var y=Math.max(this.g.length,A.g.length),N=[],C=0;C<y;C++)N[C]=this.i(C)&A.i(C);return new a(N,this.h&A.h)},t.or=function(A){for(var y=Math.max(this.g.length,A.g.length),N=[],C=0;C<y;C++)N[C]=this.i(C)|A.i(C);return new a(N,this.h|A.h)},t.xor=function(A){for(var y=Math.max(this.g.length,A.g.length),N=[],C=0;C<y;C++)N[C]=this.i(C)^A.i(C);return new a(N,this.h^A.h)};function O(A){for(var y=A.g.length+1,N=[],C=0;C<y;C++)N[C]=A.i(C)<<1|A.i(C-1)>>>31;return new a(N,A.h)}function U(A,y){var N=y>>5;y%=32;for(var C=A.g.length-N,I=[],_=0;_<C;_++)I[_]=0<y?A.i(_+N)>>>y|A.i(_+N+1)<<32-y:A.i(_+N);return new a(I,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,q1=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Ar=a}).apply(typeof p0<"u"?p0:typeof self<"u"?self:typeof window<"u"?window:{});var Cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W1,Sa,H1,Hl,tf,Q1,G1,K1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cl=="object"&&Cl];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var R=l[E];if(!(R in p))break e;p=p[R]}l=l[l.length-1],E=p[l],h=h(E),h!=E&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,E=!1,R={next:function(){if(!E&&p<l.length){var M=p++;return{value:h(M,l[M]),done:!1}}return E=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,E),l.apply(h,R)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function b(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(E,R,M){for(var q=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)q[pe-2]=arguments[pe];return h.prototype[R].apply(E,q)}}function P(l){const h=l.length;if(0<h){const p=Array(h);for(let E=0;E<h;E++)p[E]=l[E];return p}return[]}function k(l,h){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(u(E)){const R=l.length||0,M=E.length||0;l.length=R+M;for(let q=0;q<M;q++)l[R+q]=E[q]}else l.push(E)}}class S{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(l){return/^[\s\xa0]*$/.test(l)}function w(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var O=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function U(l,h,p){for(const E in l)h.call(p,l[E],E,l)}function A(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,h){let p,E;for(let R=1;R<arguments.length;R++){E=arguments[R];for(p in E)l[p]=E[p];for(let M=0;M<N.length;M++)p=N[M],Object.prototype.hasOwnProperty.call(E,p)&&(l[p]=E[p])}}function I(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function _(l){c.setTimeout(()=>{throw l},0)}function T(){var l=Y;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class D{constructor(){this.h=this.g=null}add(h,p){const E=G.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var G=new S(()=>new se,l=>l.reset());class se{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,B=!1,Y=new D,ne=()=>{const l=c.Promise.resolve(void 0);Te=()=>{l.then(xe)}};var xe=()=>{for(var l;l=T();){try{l.h.call(l.g)}catch(p){_(p)}var h=G;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}B=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var Sn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function In(l,h){if(Ce.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{j(h.nodeName);var R=!0;break e}catch{}R=!1}R||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:bn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&In.aa.h.call(this)}}b(In,Ce);var bn={2:"touch",3:"pen",4:"mouse"};In.prototype.h=function(){In.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ln="closure_listenable_"+(1e6*Math.random()|0),$E=0;function zE(l,h,p,E,R){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=R,this.key=++$E,this.da=this.fa=!1}function Bo(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function qo(l){this.src=l,this.g={},this.h=0}qo.prototype.add=function(l,h,p,E,R){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var q=Uu(l,h,E,R);return-1<q?(h=l[q],p||(h.fa=!1)):(h=new zE(h,this.src,M,!!E,R),h.fa=p,l.push(h)),h};function Fu(l,h){var p=h.type;if(p in l.g){var E=l.g[p],R=Array.prototype.indexOf.call(E,h,void 0),M;(M=0<=R)&&Array.prototype.splice.call(E,R,1),M&&(Bo(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Uu(l,h,p,E){for(var R=0;R<l.length;++R){var M=l[R];if(!M.da&&M.listener==h&&M.capture==!!p&&M.ha==E)return R}return-1}var $u="closure_lm_"+(1e6*Math.random()|0),zu={};function Ep(l,h,p,E,R){if(E&&E.once)return Np(l,h,p,E,R);if(Array.isArray(h)){for(var M=0;M<h.length;M++)Ep(l,h[M],p,E,R);return null}return p=Hu(p),l&&l[ln]?l.K(h,p,d(E)?!!E.capture:!!E,R):Tp(l,h,p,!1,E,R)}function Tp(l,h,p,E,R,M){if(!h)throw Error("Invalid event type");var q=d(R)?!!R.capture:!!R,pe=qu(l);if(pe||(l[$u]=pe=new qo(l)),p=pe.add(h,p,E,q,M),p.proxy)return p;if(E=BE(),p.proxy=E,E.src=l,E.listener=p,l.addEventListener)Sn||(R=q),R===void 0&&(R=!1),l.addEventListener(h.toString(),E,R);else if(l.attachEvent)l.attachEvent(Sp(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function BE(){function l(p){return h.call(l.src,l.listener,p)}const h=qE;return l}function Np(l,h,p,E,R){if(Array.isArray(h)){for(var M=0;M<h.length;M++)Np(l,h[M],p,E,R);return null}return p=Hu(p),l&&l[ln]?l.L(h,p,d(E)?!!E.capture:!!E,R):Tp(l,h,p,!0,E,R)}function Cp(l,h,p,E,R){if(Array.isArray(h))for(var M=0;M<h.length;M++)Cp(l,h[M],p,E,R);else E=d(E)?!!E.capture:!!E,p=Hu(p),l&&l[ln]?(l=l.i,h=String(h).toString(),h in l.g&&(M=l.g[h],p=Uu(M,p,E,R),-1<p&&(Bo(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete l.g[h],l.h--)))):l&&(l=qu(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Uu(h,p,E,R)),(p=-1<l?h[l]:null)&&Bu(p))}function Bu(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ln])Fu(h.i,l);else{var p=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(p,E,l.capture):h.detachEvent?h.detachEvent(Sp(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=qu(h))?(Fu(p,l),p.h==0&&(p.src=null,h[$u]=null)):Bo(l)}}}function Sp(l){return l in zu?zu[l]:zu[l]="on"+l}function qE(l,h){if(l.da)l=!0;else{h=new In(h,this);var p=l.listener,E=l.ha||l.src;l.fa&&Bu(l),l=p.call(E,h)}return l}function qu(l){return l=l[$u],l instanceof qo?l:null}var Wu="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hu(l){return typeof l=="function"?l:(l[Wu]||(l[Wu]=function(h){return l.handleEvent(h)}),l[Wu])}function st(){de.call(this),this.i=new qo(this),this.M=this,this.F=null}b(st,de),st.prototype[ln]=!0,st.prototype.removeEventListener=function(l,h,p,E){Cp(this,l,h,p,E)};function gt(l,h){var p,E=l.F;if(E)for(p=[];E;E=E.F)p.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new Ce(h,l);else if(h instanceof Ce)h.target=h.target||l;else{var R=h;h=new Ce(E,l),C(h,R)}if(R=!0,p)for(var M=p.length-1;0<=M;M--){var q=h.g=p[M];R=Wo(q,E,!0,h)&&R}if(q=h.g=l,R=Wo(q,E,!0,h)&&R,R=Wo(q,E,!1,h)&&R,p)for(M=0;M<p.length;M++)q=h.g=p[M],R=Wo(q,E,!1,h)&&R}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],E=0;E<p.length;E++)Bo(p[E]);delete l.g[h],l.h--}}this.F=null},st.prototype.K=function(l,h,p,E){return this.i.add(String(l),h,!1,p,E)},st.prototype.L=function(l,h,p,E){return this.i.add(String(l),h,!0,p,E)};function Wo(l,h,p,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var R=!0,M=0;M<h.length;++M){var q=h[M];if(q&&!q.da&&q.capture==p){var pe=q.listener,Ye=q.ha||q.src;q.fa&&Fu(l.i,q),R=pe.call(Ye,E)!==!1&&R}}return R&&!E.defaultPrevented}function Ip(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function bp(l){l.g=Ip(()=>{l.g=null,l.i&&(l.i=!1,bp(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class WE extends de{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:bp(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ki(l){de.call(this),this.h=l,this.g={}}b(Ki,de);var Ap=[];function Pp(l){U(l.g,function(h,p){this.g.hasOwnProperty(p)&&Bu(h)},l),l.g={}}Ki.prototype.N=function(){Ki.aa.N.call(this),Pp(this)},Ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qu=c.JSON.stringify,HE=c.JSON.parse,QE=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Gu(){}Gu.prototype.h=null;function kp(l){return l.h||(l.h=l.i())}function jp(){}var Yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ku(){Ce.call(this,"d")}b(Ku,Ce);function Yu(){Ce.call(this,"c")}b(Yu,Ce);var Yr={},Rp=null;function Ho(){return Rp=Rp||new st}Yr.La="serverreachability";function Dp(l){Ce.call(this,Yr.La,l)}b(Dp,Ce);function Xi(l){const h=Ho();gt(h,new Dp(h))}Yr.STAT_EVENT="statevent";function Mp(l,h){Ce.call(this,Yr.STAT_EVENT,l),this.stat=h}b(Mp,Ce);function yt(l){const h=Ho();gt(h,new Mp(h,l))}Yr.Ma="timingevent";function Op(l,h){Ce.call(this,Yr.Ma,l),this.size=h}b(Op,Ce);function Ji(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function GE(l,h,p,E,R,M){l.info(function(){if(l.g)if(M)for(var q="",pe=M.split("&"),Ye=0;Ye<pe.length;Ye++){var ue=pe[Ye].split("=");if(1<ue.length){var it=ue[0];ue=ue[1];var at=it.split("_");q=2<=at.length&&at[1]=="type"?q+(it+"="+ue+"&"):q+(it+"=redacted&")}}else q=null;else q=M;return"XMLHTTP REQ ("+E+") [attempt "+R+"]: "+h+`
`+p+`
`+q})}function KE(l,h,p,E,R,M,q){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+R+"]: "+h+`
`+p+`
`+M+" "+q})}function Rs(l,h,p,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+XE(l,p)+(E?" "+E:"")})}function YE(l,h){l.info(function(){return"TIMEOUT: "+h})}Zi.prototype.info=function(){};function XE(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var E=p[l];if(!(2>E.length)){var R=E[1];if(Array.isArray(R)&&!(1>R.length)){var M=R[0];if(M!="noop"&&M!="stop"&&M!="close")for(var q=1;q<R.length;q++)R[q]=""}}}}return Qu(p)}catch{return h}}var Qo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xu;function Go(){}b(Go,Gu),Go.prototype.g=function(){return new XMLHttpRequest},Go.prototype.i=function(){return{}},Xu=new Go;function Zn(l,h,p,E){this.j=l,this.i=h,this.l=p,this.R=E||1,this.U=new Ki(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lp}function Lp(){this.i=null,this.g="",this.h=!1}var Fp={},Ju={};function Zu(l,h,p){l.L=1,l.v=Jo(An(h)),l.m=p,l.P=!0,Up(l,null)}function Up(l,h){l.F=Date.now(),Ko(l),l.A=An(l.v);var p=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),eg(p.i,"t",E),l.C=0,p=l.j.J,l.h=new Lp,l.g=vg(l.j,p?h:null,!l.m),0<l.O&&(l.M=new WE(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,E=l.ca;var R="readystatechange";Array.isArray(R)||(R&&(Ap[0]=R.toString()),R=Ap);for(var M=0;M<R.length;M++){var q=Ep(p,R[M],E||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Xi(),GE(l.i,l.u,l.A,l.l,l.R,l.m)}Zn.prototype.ca=function(l){l=l.target;const h=this.M;h&&Pn(l)==3?h.j():this.Y(l)},Zn.prototype.Y=function(l){try{if(l==this.g)e:{const at=Pn(this.g);var h=this.g.Ba();const Os=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||og(this.g)))){this.J||at!=4||h==7||(h==8||0>=Os?Xi(3):Xi(2)),ed(this);var p=this.g.Z();this.X=p;t:if($p(this)){var E=og(this.g);l="";var R=E.length,M=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xr(this),ea(this);var q="";break t}this.h.i=new c.TextDecoder}for(h=0;h<R;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(M&&h==R-1)});E.length=0,this.h.g+=l,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,KE(this.i,this.u,this.A,this.l,this.R,at,p),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,Ye=this.g;if((pe=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(pe)){var ue=pe;break t}}ue=null}if(p=ue)Rs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,td(this,p);else{this.o=!1,this.s=3,yt(12),Xr(this),ea(this);break e}}if(this.P){p=!0;let Qt;for(;!this.J&&this.C<q.length;)if(Qt=JE(this,q),Qt==Ju){at==4&&(this.s=4,yt(14),p=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Fp){this.s=4,yt(15),Rs(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else Rs(this.i,this.l,Qt,null),td(this,Qt);if($p(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||q.length!=0||this.h.h||(this.s=1,yt(16),p=!1),this.o=this.o&&p,!p)Rs(this.i,this.l,q,"[Invalid Chunked Response]"),Xr(this),ea(this);else if(0<q.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),od(it),it.M=!0,yt(11))}}else Rs(this.i,this.l,q,null),td(this,q);at==4&&Xr(this),this.o&&!this.J&&(at==4?mg(this.j,this):(this.o=!1,Ko(this)))}else pT(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Xr(this),ea(this)}}}catch{}finally{}};function $p(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function JE(l,h){var p=l.C,E=h.indexOf(`
`,p);return E==-1?Ju:(p=Number(h.substring(p,E)),isNaN(p)?Fp:(E+=1,E+p>h.length?Ju:(h=h.slice(E,E+p),l.C=E+p,h)))}Zn.prototype.cancel=function(){this.J=!0,Xr(this)};function Ko(l){l.S=Date.now()+l.I,zp(l,l.I)}function zp(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ji(g(l.ba,l),h)}function ed(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Zn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(YE(this.i,this.A),this.L!=2&&(Xi(),yt(17)),Xr(this),this.s=2,ea(this)):zp(this,this.S-l)};function ea(l){l.j.G==0||l.J||mg(l.j,l)}function Xr(l){ed(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Pp(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function td(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||nd(p.h,l))){if(!l.K&&nd(p.h,l)&&p.G==3){try{var E=p.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var R=E;if(R[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)sl(p),nl(p);else break e;ad(p),yt(18)}}else p.za=R[1],0<p.za-p.T&&37500>R[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ji(g(p.Za,p),6e3));if(1>=Wp(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Zr(p,11)}else if((l.K||p.g==l)&&sl(p),!x(h))for(R=p.Da.g.parse(h),h=0;h<R.length;h++){let ue=R[h];if(p.T=ue[0],ue=ue[1],p.G==2)if(ue[0]=="c"){p.K=ue[1],p.ia=ue[2];const it=ue[3];it!=null&&(p.la=it,p.j.info("VER="+p.la));const at=ue[4];at!=null&&(p.Aa=at,p.j.info("SVER="+p.Aa));const Os=ue[5];Os!=null&&typeof Os=="number"&&0<Os&&(E=1.5*Os,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Qt=l.g;if(Qt){const al=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(al){var M=E.h;M.g||al.indexOf("spdy")==-1&&al.indexOf("quic")==-1&&al.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(rd(M,M.h),M.h=null))}if(E.D){const ld=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;ld&&(E.ya=ld,_e(E.I,E.D,ld))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var q=l;if(E.qa=yg(E,E.J?E.ia:null,E.W),q.K){Hp(E.h,q);var pe=q,Ye=E.L;Ye&&(pe.I=Ye),pe.B&&(ed(pe),Ko(pe)),E.g=q}else hg(E);0<p.i.length&&rl(p)}else ue[0]!="stop"&&ue[0]!="close"||Zr(p,7);else p.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Zr(p,7):id(p):ue[0]!="noop"&&p.l&&p.l.ta(ue),p.v=0)}}Xi(4)}catch{}}var ZE=class{constructor(l,h){this.g=l,this.map=h}};function Bp(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qp(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Wp(l){return l.h?1:l.g?l.g.size:0}function nd(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function rd(l,h){l.g?l.g.add(h):l.h=h}function Hp(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Bp.prototype.cancel=function(){if(this.i=Qp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Qp(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return P(l.i)}function eT(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,E=0;E<p;E++)h.push(l[E]);return h}h=[],p=0;for(E in l)h[p++]=l[E];return h}function tT(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const E in l)h[p++]=E;return h}}}function Gp(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=tT(l),E=eT(l),R=E.length,M=0;M<R;M++)h.call(void 0,E[M],p&&p[M],l)}var Kp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nT(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var E=l[p].indexOf("="),R=null;if(0<=E){var M=l[p].substring(0,E);R=l[p].substring(E+1)}else M=l[p];h(M,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Jr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Jr){this.h=l.h,Yo(this,l.j),this.o=l.o,this.g=l.g,Xo(this,l.s),this.l=l.l;var h=l.i,p=new ra;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Yp(this,p),this.m=l.m}else l&&(h=String(l).match(Kp))?(this.h=!1,Yo(this,h[1]||"",!0),this.o=ta(h[2]||""),this.g=ta(h[3]||"",!0),Xo(this,h[4]),this.l=ta(h[5]||"",!0),Yp(this,h[6]||"",!0),this.m=ta(h[7]||"")):(this.h=!1,this.i=new ra(null,this.h))}Jr.prototype.toString=function(){var l=[],h=this.j;h&&l.push(na(h,Xp,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(na(h,Xp,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(na(p,p.charAt(0)=="/"?iT:sT,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",na(p,oT)),l.join("")};function An(l){return new Jr(l)}function Yo(l,h,p){l.j=p?ta(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Xo(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Yp(l,h,p){h instanceof ra?(l.i=h,lT(l.i,l.h)):(p||(h=na(h,aT)),l.i=new ra(h,l.h))}function _e(l,h,p){l.i.set(h,p)}function Jo(l){return _e(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ta(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function na(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,rT),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function rT(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Xp=/[#\/\?@]/g,sT=/[#\?:]/g,iT=/[#\?]/g,aT=/[#\?@]/g,oT=/#/g;function ra(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function er(l){l.g||(l.g=new Map,l.h=0,l.i&&nT(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ra.prototype,t.add=function(l,h){er(this),this.i=null,l=Ds(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Jp(l,h){er(l),h=Ds(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Zp(l,h){return er(l),h=Ds(l,h),l.g.has(h)}t.forEach=function(l,h){er(this),this.g.forEach(function(p,E){p.forEach(function(R){l.call(h,R,E,this)},this)},this)},t.na=function(){er(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let E=0;E<h.length;E++){const R=l[E];for(let M=0;M<R.length;M++)p.push(h[E])}return p},t.V=function(l){er(this);let h=[];if(typeof l=="string")Zp(this,l)&&(h=h.concat(this.g.get(Ds(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return er(this),this.i=null,l=Ds(this,l),Zp(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function eg(l,h,p){Jp(l,h),0<p.length&&(l.i=null,l.g.set(Ds(l,h),P(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var E=h[p];const M=encodeURIComponent(String(E)),q=this.V(E);for(E=0;E<q.length;E++){var R=M;q[E]!==""&&(R+="="+encodeURIComponent(String(q[E]))),l.push(R)}}return this.i=l.join("&")};function Ds(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function lT(l,h){h&&!l.j&&(er(l),l.i=null,l.g.forEach(function(p,E){var R=E.toLowerCase();E!=R&&(Jp(this,E),eg(this,R,p))},l)),l.j=h}function cT(l,h){const p=new Zi;if(c.Image){const E=new Image;E.onload=v(tr,p,"TestLoadImage: loaded",!0,h,E),E.onerror=v(tr,p,"TestLoadImage: error",!1,h,E),E.onabort=v(tr,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=v(tr,p,"TestLoadImage: timeout",!1,h,E),c.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function uT(l,h){const p=new Zi,E=new AbortController,R=setTimeout(()=>{E.abort(),tr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(M=>{clearTimeout(R),M.ok?tr(p,"TestPingServer: ok",!0,h):tr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(R),tr(p,"TestPingServer: error",!1,h)})}function tr(l,h,p,E,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),E(p)}catch{}}function dT(){this.g=new QE}function hT(l,h,p){const E=p||"";try{Gp(l,function(R,M){let q=R;d(R)&&(q=Qu(R)),h.push(E+M+"="+encodeURIComponent(q))})}catch(R){throw h.push(E+"type="+encodeURIComponent("_badmap")),R}}function Zo(l){this.l=l.Ub||null,this.j=l.eb||!1}b(Zo,Gu),Zo.prototype.g=function(){return new el(this.l,this.j)},Zo.prototype.i=function(l){return function(){return l}}({});function el(l,h){st.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(el,st),t=el.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ia(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sa(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ia(this)),this.g&&(this.readyState=3,ia(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function tg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?sa(this):ia(this),this.readyState==3&&tg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,sa(this))},t.Qa=function(l){this.g&&(this.response=l,sa(this))},t.ga=function(){this.g&&sa(this)};function sa(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ia(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function ia(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(el.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ng(l){let h="";return U(l,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function sd(l,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=ng(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):_e(l,h,p))}function ke(l){st.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(ke,st);var fT=/^https?$/i,mT=["POST","PUT"];t=ke.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xu.g(),this.v=this.o?kp(this.o):kp(Xu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(M){rg(this,M);return}if(l=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var R in E)p.set(R,E[R]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const M of E.keys())p.set(M,E.get(M));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),R=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(mT,h,void 0))||E||R||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,q]of p)this.g.setRequestHeader(M,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ag(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){rg(this,M)}};function rg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,sg(l),tl(l)}function sg(l){l.A||(l.A=!0,gt(l,"complete"),gt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gt(this,"complete"),gt(this,"abort"),tl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tl(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ig(this):this.bb())},t.bb=function(){ig(this)};function ig(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Pn(l)!=4||l.Z()!=2)){if(l.u&&Pn(l)==4)Ip(l.Ea,0,l);else if(gt(l,"readystatechange"),Pn(l)==4){l.h=!1;try{const q=l.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=q===0){var R=String(l.D).match(Kp)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),E=!fT.test(R?R.toLowerCase():"")}p=E}if(p)gt(l,"complete"),gt(l,"success");else{l.m=6;try{var M=2<Pn(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",sg(l)}}finally{tl(l)}}}}function tl(l,h){if(l.g){ag(l);const p=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||gt(l,"ready");try{p.onreadystatechange=E}catch{}}}function ag(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Pn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),HE(h)}};function og(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function pT(l){const h={};l=(l.g&&2<=Pn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(x(l[E]))continue;var p=I(l[E]);const R=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const M=h[R]||[];h[R]=M,M.push(p)}A(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function aa(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function lg(l){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=aa("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=aa("baseRetryDelayMs",5e3,l),this.cb=aa("retryDelaySeedMs",1e4,l),this.Wa=aa("forwardChannelMaxRetries",2,l),this.wa=aa("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Bp(l&&l.concurrentRequestLimit),this.Da=new dT,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lg.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,E){yt(0),this.W=l,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=yg(this,null,this.W),rl(this)};function id(l){if(cg(l),l.G==3){var h=l.U++,p=An(l.I);if(_e(p,"SID",l.K),_e(p,"RID",h),_e(p,"TYPE","terminate"),oa(l,p),h=new Zn(l,l.j,h),h.L=2,h.v=Jo(An(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=vg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ko(h)}gg(l)}function nl(l){l.g&&(od(l),l.g.cancel(),l.g=null)}function cg(l){nl(l),l.u&&(c.clearTimeout(l.u),l.u=null),sl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function rl(l){if(!qp(l.h)&&!l.s){l.s=!0;var h=l.Ga;Te||ne(),B||(Te(),B=!0),Y.add(h,l),l.B=0}}function gT(l,h){return Wp(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ji(g(l.Ga,l,h),pg(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const R=new Zn(this,this.j,l);let M=this.o;if(this.S&&(M?(M=y(M),C(M,this.S)):M=this.S),this.m!==null||this.O||(R.H=M,M=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=dg(this,R,h),p=An(this.I),_e(p,"RID",l),_e(p,"CVER",22),this.D&&_e(p,"X-HTTP-Session-Id",this.D),oa(this,p),M&&(this.O?h="headers="+encodeURIComponent(String(ng(M)))+"&"+h:this.m&&sd(p,this.m,M)),rd(this.h,R),this.Ua&&_e(p,"TYPE","init"),this.P?(_e(p,"$req",h),_e(p,"SID","null"),R.T=!0,Zu(R,p,null)):Zu(R,p,h),this.G=2}}else this.G==3&&(l?ug(this,l):this.i.length==0||qp(this.h)||ug(this))};function ug(l,h){var p;h?p=h.l:p=l.U++;const E=An(l.I);_e(E,"SID",l.K),_e(E,"RID",p),_e(E,"AID",l.T),oa(l,E),l.m&&l.o&&sd(E,l.m,l.o),p=new Zn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=dg(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),rd(l.h,p),Zu(p,E,h)}function oa(l,h){l.H&&U(l.H,function(p,E){_e(h,E,p)}),l.l&&Gp({},function(p,E){_e(h,E,p)})}function dg(l,h,p){p=Math.min(l.i.length,p);var E=l.l?g(l.l.Na,l.l,l):null;e:{var R=l.i;let M=-1;for(;;){const q=["count="+p];M==-1?0<p?(M=R[0].g,q.push("ofs="+M)):M=0:q.push("ofs="+M);let pe=!0;for(let Ye=0;Ye<p;Ye++){let ue=R[Ye].g;const it=R[Ye].map;if(ue-=M,0>ue)M=Math.max(0,R[Ye].g-100),pe=!1;else try{hT(it,q,"req"+ue+"_")}catch{E&&E(it)}}if(pe){E=q.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,E}function hg(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Te||ne(),B||(Te(),B=!0),Y.add(h,l),l.v=0}}function ad(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ji(g(l.Fa,l),pg(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,fg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ji(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),nl(this),fg(this))};function od(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function fg(l){l.g=new Zn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=An(l.qa);_e(h,"RID","rpc"),_e(h,"SID",l.K),_e(h,"AID",l.T),_e(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&_e(h,"TO",l.ja),_e(h,"TYPE","xmlhttp"),oa(l,h),l.m&&l.o&&sd(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Jo(An(h)),p.m=null,p.P=!0,Up(p,l)}t.Za=function(){this.C!=null&&(this.C=null,nl(this),ad(this),yt(19))};function sl(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function mg(l,h){var p=null;if(l.g==h){sl(l),od(l),l.g=null;var E=2}else if(nd(l.h,h))p=h.D,Hp(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var R=l.B;E=Ho(),gt(E,new Op(E,p)),rl(l)}else hg(l);else if(R=h.s,R==3||R==0&&0<h.X||!(E==1&&gT(l,h)||E==2&&ad(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),R){case 1:Zr(l,5);break;case 4:Zr(l,10);break;case 3:Zr(l,6);break;default:Zr(l,2)}}}function pg(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Zr(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),E=l.Xa;const R=!E;E=new Jr(E||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Yo(E,"https"),Jo(E),R?cT(E.toString(),p):uT(E.toString(),p)}else yt(2);l.G=0,l.l&&l.l.sa(h),gg(l),cg(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function gg(l){if(l.G=0,l.ka=[],l.l){const h=Qp(l.h);(h.length!=0||l.i.length!=0)&&(k(l.ka,h),k(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function yg(l,h,p){var E=p instanceof Jr?An(p):new Jr(p);if(E.g!="")h&&(E.g=h+"."+E.g),Xo(E,E.s);else{var R=c.location;E=R.protocol,h=h?h+"."+R.hostname:R.hostname,R=+R.port;var M=new Jr(null);E&&Yo(M,E),h&&(M.g=h),R&&Xo(M,R),p&&(M.l=p),E=M}return p=l.D,h=l.ya,p&&h&&_e(E,p,h),_e(E,"VER",l.la),oa(l,E),E}function vg(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new ke(new Zo({eb:p})):new ke(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xg(){}t=xg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function il(){}il.prototype.g=function(l,h){return new Pt(l,h)};function Pt(l,h){st.call(this),this.g=new lg(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!x(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ms(this)}b(Pt,st),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){id(this.g)},Pt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Qu(l),l=p);h.i.push(new ZE(h.Ya++,l)),h.G==3&&rl(h)},Pt.prototype.N=function(){this.g.l=null,delete this.j,id(this.g),delete this.g,Pt.aa.N.call(this)};function _g(l){Ku.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}b(_g,Ku);function wg(){Yu.call(this),this.status=1}b(wg,Yu);function Ms(l){this.g=l}b(Ms,xg),Ms.prototype.ua=function(){gt(this.g,"a")},Ms.prototype.ta=function(l){gt(this.g,new _g(l))},Ms.prototype.sa=function(l){gt(this.g,new wg)},Ms.prototype.ra=function(){gt(this.g,"b")},il.prototype.createWebChannel=il.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,K1=function(){return new il},G1=function(){return Ho()},Q1=Yr,tf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qo.NO_ERROR=0,Qo.TIMEOUT=8,Qo.HTTP_ERROR=6,Hl=Qo,Vp.COMPLETE="complete",H1=Vp,jp.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",st.prototype.listen=st.prototype.K,Sa=jp,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,W1=ke}).apply(typeof Cl<"u"?Cl:typeof self<"u"?self:typeof window<"u"?window:{});const g0="@firebase/firestore",y0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zi="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new Em("@firebase/firestore");function $s(){return Ts.logLevel}function H(t,...e){if(Ts.logLevel<=ie.DEBUG){const n=e.map(Rm);Ts.debug(`Firestore (${zi}): ${t}`,...n)}}function Hn(t,...e){if(Ts.logLevel<=ie.ERROR){const n=e.map(Rm);Ts.error(`Firestore (${zi}): ${t}`,...n)}}function Si(t,...e){if(Ts.logLevel<=ie.WARN){const n=e.map(Rm);Ts.warn(`Firestore (${zi}): ${t}`,...n)}}function Rm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Y1(t,r,n)}function Y1(t,e,n){let r=`FIRESTORE (${zi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Hn(r),new Error(r)}function he(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Y1(e,s,r)}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class J2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Z2{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Fn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Fn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Fn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string",31837,{l:r}),new X1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string",2055,{h:e}),new ut(e)}}class eP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class tP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new eP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){he(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new v0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new v0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=rP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function nf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Bd(s)===Bd(i)?ae(s,i):Bd(s)?1:-1}return ae(t.length,e.length)}const sP=55296,iP=57343;function Bd(t){const e=t.charCodeAt(0);return e>=sP&&e<=iP}function Ii(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="__name__";class dn{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=dn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ae(e.length,n.length)}static compareSegments(e,n){const r=dn.isNumericId(e),s=dn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?dn.extractNumericId(e).compare(dn.extractNumericId(n)):nf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class ye extends dn{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const aP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends dn{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return aP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===x0}static keyField(){return new et([x0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new W(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new W(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ye.fromString(e))}static fromName(e){return new K(ye.fromString(e).popFirst(5))}static empty(){return new K(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(t,e,n){if(!n)throw new W(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function oP(t,e,n,r){if(e===!0&&r===!0)throw new W(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _0(t){if(!K.isDocumentKey(t))throw new W(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w0(t){if(K.isDocumentKey(t))throw new W(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Z1(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function Qn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vu(t);throw new W(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Mo(t,e){if(!Z1(t))throw new W(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new W(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=-62135596800,T0=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(e){return ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*T0);return new ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<E0)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/T0}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mo(e,ge._jsonSchema))return new ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-E0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:Fe("string",ge._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static fromTimestamp(e){return new ee(e)}static min(){return new ee(new ge(0,0))}static max(){return new ee(new ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=-1;function lP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new ge(n+1,0):new ge(n,r));return new Mr(s,K.empty(),e)}function cP(t){return new Mr(t.readTime,t.key,mo)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(ee.min(),K.empty(),mo)}static max(){return new Mr(ee.max(),K.empty(),mo)}}function uP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==dP)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function fP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=-1;function _u(t){return t==null}function jc(t){return t===0&&1/t==-1/0}function mP(t){return typeof t=="number"&&Number.isInteger(t)&&!jc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="";function pP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=N0(e)),e=gP(t.get(n),e);return N0(e)}function gP(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case ew:n+="";break;default:n+=i}}return n}function N0(t){return t+ew+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sl(this.root,e,this.comparator,!0)}}class Sl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new S0(this.data.getIterator())}getIteratorFrom(e){return new S0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof We)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new We(this.comparator);return n.data=e,n}}class S0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Rt([])}unionWith(e){let n=new We(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ii(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nw("Invalid base64 string: "+i):i}}(e);return new rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const yP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(he(!!t,39018),typeof t=="string"){let e=0;const n=yP.exec(t);if(he(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="server_timestamp",sw="__type__",iw="__previous_value__",aw="__local_write_time__";function Om(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[sw])==null?void 0:r.stringValue)===rw}function wu(t){const e=t.mapValue.fields[iw];return Om(e)?wu(e):e}function po(t){const e=Or(t.mapValue.fields[aw].timestampValue);return new ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e,n,r,s,i,a,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=f}}const Rc="(default)";class go{constructor(e,n){this.projectId=e,this.database=n||Rc}static empty(){return new go("","")}get isDefaultDatabase(){return this.database===Rc}isEqual(e){return e instanceof go&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow="__type__",lw="__max__",Il={mapValue:{fields:{__type__:{stringValue:lw}}}},cw="__vector__",Dc="value";function Lr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Om(t)?4:_P(t)?9007199254740991:xP(t)?10:11:J(28295,{value:t})}function Cn(t,e){if(t===e)return!0;const n=Lr(t);if(n!==Lr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return po(t).isEqual(po(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Or(s.timestampValue),c=Or(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Vr(s.bytesValue).isEqual(Vr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Re(s.geoPointValue.latitude)===Re(i.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Re(s.integerValue)===Re(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Re(s.doubleValue),c=Re(i.doubleValue);return a===c?jc(a)===jc(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Ii(t.arrayValue.values||[],e.arrayValue.values||[],Cn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(C0(a)!==C0(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Cn(a[u],c[u])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function yo(t,e){return(t.values||[]).find(n=>Cn(n,e))!==void 0}function bi(t,e){if(t===e)return 0;const n=Lr(t),r=Lr(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Re(i.integerValue||i.doubleValue),u=Re(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return I0(t.timestampValue,e.timestampValue);case 4:return I0(po(t),po(e));case 5:return nf(t.stringValue,e.stringValue);case 6:return function(i,a){const c=Vr(i),u=Vr(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ae(c[d],u[d]);if(f!==0)return f}return ae(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=ae(Re(i.latitude),Re(a.latitude));return c!==0?c:ae(Re(i.longitude),Re(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return b0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var g,v,b,P;const c=i.fields||{},u=a.fields||{},d=(g=c[Dc])==null?void 0:g.arrayValue,f=(v=u[Dc])==null?void 0:v.arrayValue,m=ae(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((P=f==null?void 0:f.values)==null?void 0:P.length)||0);return m!==0?m:b0(d,f)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Il.mapValue&&a===Il.mapValue)return 0;if(i===Il.mapValue)return 1;if(a===Il.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=nf(u[m],f[m]);if(g!==0)return g;const v=bi(c[u[m]],d[f[m]]);if(v!==0)return v}return ae(u.length,f.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function I0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Or(t),r=Or(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function b0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=bi(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function Ai(t){return rf(t)}function rf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=rf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${rf(n.fields[a])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function Ql(t){switch(Lr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wu(t);return e?16+Ql(e):16;case 5:return 2*t.stringValue.length;case 6:return Vr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ql(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Gr(r.fields,(i,a)=>{s+=i.length+Ql(a)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function A0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sf(t){return!!t&&"integerValue"in t}function Vm(t){return!!t&&"arrayValue"in t}function P0(t){return!!t&&"nullValue"in t}function k0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Gl(t){return!!t&&"mapValue"in t}function xP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ow])==null?void 0:r.stringValue)===cw}function $a(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Gr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$a(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$a(t.arrayValue.values[n]);return e}return{...t}}function _P(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lw}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Gl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$a(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=$a(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Gl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Cn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Gl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct($a(this.value))}}function uw(t){const e=[];return Gr(t.fields,(n,r)=>{const s=new et([n]);if(Gl(r)){const i=uw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Rt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new ht(e,0,ee.min(),ee.min(),ee.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,ee.min(),ee.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,ee.min(),ee.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.position=e,this.inclusive=n}}function j0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(a.referenceValue),n.key):r=bi(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function R0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Cn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n="asc"){this.field=e,this.dir=n}}function wP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dw=class{};class Le extends dw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TP(e,n,r):n==="array-contains"?new SP(e,r):n==="in"?new IP(e,r):n==="not-in"?new bP(e,r):n==="array-contains-any"?new AP(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NP(e,r):new CP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(bi(n,this.value)):n!==null&&Lr(this.value)===Lr(n)&&this.matchesComparison(bi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends dw{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new on(e,n)}matches(e){return hw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hw(t){return t.op==="and"}function fw(t){return EP(t)&&hw(t)}function EP(t){for(const e of t.filters)if(e instanceof on)return!1;return!0}function af(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Ai(t.value);if(fw(t))return t.filters.map(e=>af(e)).join(",");{const e=t.filters.map(n=>af(n)).join(",");return`${t.op}(${e})`}}function mw(t,e){return t instanceof Le?function(r,s){return s instanceof Le&&r.op===s.op&&r.field.isEqual(s.field)&&Cn(r.value,s.value)}(t,e):t instanceof on?function(r,s){return s instanceof on&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&mw(a,s.filters[c]),!0):!1}(t,e):void J(19439)}function pw(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${Ai(n.value)}`}(t):t instanceof on?function(n){return n.op.toString()+" {"+n.getFilters().map(pw).join(" ,")+"}"}(t):"Filter"}class TP extends Le{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class NP extends Le{constructor(e,n){super(e,"in",n),this.keys=gw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class CP extends Le{constructor(e,n){super(e,"not-in",n),this.keys=gw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gw(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class SP extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vm(n)&&yo(n.arrayValue,this.value)}}class IP extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yo(this.value.arrayValue,n)}}class bP extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yo(this.value.arrayValue,n)}}class AP extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>yo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.Te=null}}function D0(t,e=null,n=[],r=[],s=null,i=null,a=null){return new PP(t,e,n,r,s,i,a)}function Lm(t){const e=te(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>af(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),_u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ai(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ai(r)).join(",")),e.Te=n}return e.Te}function Fm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!R0(t.startAt,e.startAt)&&R0(t.endAt,e.endAt)}function of(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kP(t,e,n,r,s,i,a,c){return new Wi(t,e,n,r,s,i,a,c)}function Um(t){return new Wi(t)}function M0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yw(t){return t.collectionGroup!==null}function za(t){const e=te(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new We(et.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new vo(i,r))}),n.has(et.keyField().canonicalString())||e.Ie.push(new vo(et.keyField(),r))}return e.Ie}function _n(t){const e=te(t);return e.Ee||(e.Ee=jP(e,za(t))),e.Ee}function jP(t,e){if(t.limitType==="F")return D0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new vo(s.field,i)});const n=t.endAt?new Mc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mc(t.startAt.position,t.startAt.inclusive):null;return D0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function lf(t,e){const n=t.filters.concat([e]);return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function cf(t,e,n){return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eu(t,e){return Fm(_n(t),_n(e))&&t.limitType===e.limitType}function vw(t){return`${Lm(_n(t))}|lt:${t.limitType}`}function zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>pw(s)).join(", ")}]`),_u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ai(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ai(s)).join(",")),`Target(${r})`}(_n(t))}; limitType=${t.limitType})`}function Tu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of za(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=j0(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,za(r),s)||r.endAt&&!function(a,c,u){const d=j0(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,za(r),s))}(t,e)}function RP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xw(t){return(e,n)=>{let r=!1;for(const s of za(t)){const i=DP(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function DP(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?bi(u,d):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return tw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new Pe(K.comparator);function Gn(){return MP}const _w=new Pe(K.comparator);function Ia(...t){let e=_w;for(const n of t)e=e.insert(n.key,n);return e}function ww(t){let e=_w;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ls(){return Ba()}function Ew(){return Ba()}function Ba(){return new Ps(t=>t.toString(),(t,e)=>t.isEqual(e))}const OP=new Pe(K.comparator),VP=new We(K.comparator);function oe(...t){let e=VP;for(const n of t)e=e.add(n);return e}const LP=new We(ae);function FP(){return LP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jc(e)?"-0":e}}function Tw(t){return{integerValue:""+t}}function UP(t,e){return mP(e)?Tw(e):$m(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this._=void 0}}function $P(t,e,n){return t instanceof Oc?function(s,i){const a={fields:{[sw]:{stringValue:rw},[aw]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Om(i)&&(i=wu(i)),i&&(a.fields[iw]=i),{mapValue:a}}(n,e):t instanceof xo?Cw(t,e):t instanceof _o?Sw(t,e):function(s,i){const a=Nw(s,i),c=O0(a)+O0(s.Ae);return sf(a)&&sf(s.Ae)?Tw(c):$m(s.serializer,c)}(t,e)}function zP(t,e,n){return t instanceof xo?Cw(t,e):t instanceof _o?Sw(t,e):n}function Nw(t,e){return t instanceof Vc?function(r){return sf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Oc extends Nu{}class xo extends Nu{constructor(e){super(),this.elements=e}}function Cw(t,e){const n=Iw(e);for(const r of t.elements)n.some(s=>Cn(s,r))||n.push(r);return{arrayValue:{values:n}}}class _o extends Nu{constructor(e){super(),this.elements=e}}function Sw(t,e){let n=Iw(e);for(const r of t.elements)n=n.filter(s=>!Cn(s,r));return{arrayValue:{values:n}}}class Vc extends Nu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function O0(t){return Re(t.integerValue||t.doubleValue)}function Iw(t){return Vm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BP(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof xo&&s instanceof xo||r instanceof _o&&s instanceof _o?Ii(r.elements,s.elements,Cn):r instanceof Vc&&s instanceof Vc?Cn(r.Ae,s.Ae):r instanceof Oc&&s instanceof Oc}(t.transform,e.transform)}class qP{constructor(e,n){this.version=e,this.transformResults=n}}class rn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rn}static exists(e){return new rn(void 0,e)}static updateTime(e){return new rn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Cu{}function bw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new zm(t.key,rn.none()):new Oo(t.key,t.data,rn.none());{const n=t.data,r=Ct.empty();let s=new We(et.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Kr(t.key,r,new Rt(s.toArray()),rn.none())}}function WP(t,e,n){t instanceof Oo?function(s,i,a){const c=s.value.clone(),u=L0(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Kr?function(s,i,a){if(!Kl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=L0(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Aw(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function qa(t,e,n,r){return t instanceof Oo?function(i,a,c,u){if(!Kl(i.precondition,a))return c;const d=i.value.clone(),f=F0(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Kr?function(i,a,c,u){if(!Kl(i.precondition,a))return c;const d=F0(i.fieldTransforms,u,a),f=a.data;return f.setAll(Aw(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return Kl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function HP(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Nw(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function V0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ii(r,s,(i,a)=>BP(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Oo extends Cu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Kr extends Cu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Aw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function L0(t,e,n){const r=new Map;he(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,zP(a,c,n[s]))}return r}function F0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,$P(i,a,e))}return r}class zm extends Cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class QP extends Cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&WP(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=qa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ew();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=bw(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Ii(this.mutations,e.mutations,(n,r)=>V0(n,r))&&Ii(this.baseMutations,e.baseMutations,(n,r)=>V0(n,r))}}class Bm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){he(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return OP}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Bm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,le;function XP(t){switch(t){case L.OK:return J(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function Pw(t){if(t===void 0)return Hn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Me.OK:return L.OK;case Me.CANCELLED:return L.CANCELLED;case Me.UNKNOWN:return L.UNKNOWN;case Me.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Me.INTERNAL:return L.INTERNAL;case Me.UNAVAILABLE:return L.UNAVAILABLE;case Me.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Me.NOT_FOUND:return L.NOT_FOUND;case Me.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Me.ABORTED:return L.ABORTED;case Me.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Me.DATA_LOSS:return L.DATA_LOSS;default:return J(39323,{code:t})}}(le=Me||(Me={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=new Ar([4294967295,4294967295],0);function U0(t){const e=JP().encode(t),n=new q1;return n.update(e),new Uint8Array(n.digest())}function $0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([s,i],0)]}class qm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ba(`Invalid padding: ${n}`);if(r<0)throw new ba(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ba(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ba(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ar.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ar.fromNumber(r)));return s.compare(ZP)===1&&(s=new Ar([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=U0(e),[r,s]=$0(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new qm(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.ge===0)return;const n=U0(e),[r,s]=$0(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ba extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Su(ee.min(),s,new Pe(ae),Gn(),oe())}}class Vo{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vo(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class kw{constructor(e,n){this.targetId=e,this.Ce=n}}class jw{constructor(e,n,r=rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class z0{constructor(){this.ve=0,this.Fe=B0(),this.Me=rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new Vo(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=B0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,he(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ek{constructor(e){this.Ge=e,this.ze=new Map,this.je=Gn(),this.Je=bl(),this.He=bl(),this.Ye=new Pe(ae)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(of(i))if(r===0){const a=new K(i.path);this.et(n,a,ht.newNoDocument(a,ee.min()))}else he(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const c=this.ut(e),u=c?this.ct(c,e,a):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=Vr(r).toUint8Array()}catch(u){if(u instanceof nw)return Si("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new qm(a,s,i)}catch(u){return Si(u instanceof ba?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const c=this.ot(a);if(c){if(i.current&&of(c.target)){const u=new K(c.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ht.newNoDocument(u,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=oe();this.He.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Su(e,n,this.Ye,this.je,r);return this.je=Gn(),this.Je=bl(),this.He=bl(),this.Ye=new Pe(ae),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new z0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new We(ae),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new We(ae),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new z0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function bl(){return new Pe(K.comparator)}function B0(){return new Pe(K.comparator)}const tk=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),nk=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),rk=(()=>({and:"AND",or:"OR"}))();class sk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function uf(t,e){return t.useProto3Json||_u(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Rw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ik(t,e){return Lc(t,e.toTimestamp())}function wn(t){return he(!!t,49232),ee.fromTimestamp(function(n){const r=Or(n);return new ge(r.seconds,r.nanos)}(t))}function Wm(t,e){return df(t,e).canonicalString()}function df(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dw(t){const e=ye.fromString(t);return he(Fw(e),10190,{key:e.toString()}),e}function hf(t,e){return Wm(t.databaseId,e.path)}function qd(t,e){const n=Dw(e);if(n.get(1)!==t.databaseId.projectId)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Ow(n))}function Mw(t,e){return Wm(t.databaseId,e)}function ak(t){const e=Dw(t);return e.length===4?ye.emptyPath():Ow(e)}function ff(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ow(t){return he(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function q0(t,e,n){return{name:hf(t,e),fields:n.value.mapValue.fields}}function ok(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(he(f===void 0||typeof f=="string",58123),rt.fromBase64String(f||"")):(he(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?L.UNKNOWN:Pw(d.code);return new W(f,d.message||"")}(a);n=new jw(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=qd(t,r.document.name),i=wn(r.document.updateTime),a=r.document.createTime?wn(r.document.createTime):ee.min(),c=new Ct({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(s,i,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Yl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=qd(t,r.document),i=r.readTime?wn(r.readTime):ee.min(),a=ht.newNoDocument(s,i),c=r.removedTargetIds||[];n=new Yl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=qd(t,r.document),i=r.removedTargetIds||[];n=new Yl([],i,s,null)}else{if(!("filter"in e))return J(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new YP(s,i),c=r.targetId;n=new kw(c,a)}}return n}function lk(t,e){let n;if(e instanceof Oo)n={update:q0(t,e.key,e.value)};else if(e instanceof zm)n={delete:hf(t,e.key)};else if(e instanceof Kr)n={update:q0(t,e.key,e.data),updateMask:yk(e.fieldMask)};else{if(!(e instanceof QP))return J(16599,{Vt:e.type});n={verify:hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Oc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof xo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _o)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Vc)return{fieldPath:a.field.canonicalString(),increment:c.Ae};throw J(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:ik(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function ck(t,e){return t&&t.length>0?(he(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?wn(s.updateTime):wn(i);return a.isEqual(ee.min())&&(a=wn(i)),new qP(a,s.transformResults||[])}(n,e))):[]}function uk(t,e){return{documents:[Mw(t,e.path)]}}function dk(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Mw(t,s);const i=function(d){if(d.length!==0)return Lw(on.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Bs(g.field),direction:mk(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=uf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function hk(t){let e=ak(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){he(r===1,65062);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=Vw(m);return g instanceof on&&fw(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(b){return new vo(qs(b.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,_u(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,v=m.values||[];return new Mc(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,v=m.values||[];return new Mc(v,g)}(n.endAt)),kP(e,s,a,i,c,"F",u,d)}function fk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Vw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qs(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=qs(n.unaryFilter.field);return Le.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qs(n.unaryFilter.field);return Le.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qs(n.unaryFilter.field);return Le.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return Le.create(qs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return on.create(n.compositeFilter.filters.map(r=>Vw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function mk(t){return tk[t]}function pk(t){return nk[t]}function gk(t){return rk[t]}function Bs(t){return{fieldPath:t.canonicalString()}}function qs(t){return et.fromServerFormat(t.fieldPath)}function Lw(t){return t instanceof Le?function(n){if(n.op==="=="){if(k0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NAN"}};if(P0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NAN"}};if(P0(n.value))return{unaryFilter:{field:Bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(n.field),op:pk(n.op),value:n.value}}}(t):t instanceof on?function(n){const r=n.getFilters().map(s=>Lw(s));return r.length===1?r[0]:{compositeFilter:{op:gk(n.op),filters:r}}}(t):J(54877,{filter:t})}function yk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r,s,i=ee.min(),a=ee.min(),c=rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.yt=e}}function xk(t){const e=hk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.Cn=new wk}addToCollectionParentIndex(e,n){return this.Cn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Mr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class wk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new We(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new We(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Uw=41943040;class Tt{static withCacheSize(e){return new Tt(e,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tt.DEFAULT_COLLECTION_PERCENTILE=10,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tt.DEFAULT=new Tt(Uw,Tt.DEFAULT_COLLECTION_PERCENTILE,Tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tt.DISABLED=new Tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Pi(0)}static cr(){return new Pi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="LruGarbageCollector",Ek=1048576;function Q0([t,e],[n,r]){const s=ae(t,n);return s===0?ae(e,r):s}class Tk{constructor(e){this.Ir=e,this.buffer=new We(Q0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Q0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Nk{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){H(H0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qi(n)?H(H0,"Ignoring IndexedDB error during garbage collection: ",n):await Bi(n)}await this.Vr(3e5)})}}class Ck{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(xu.ce);const r=new Tk(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(W0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),W0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,c,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),$s()<=ie.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-f}ms
	Determined least recently used ${s} in `+(c-a)+`ms
	Removed ${i} targets in `+(u-c)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-f}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function Sk(t,e){return new Ck(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.changes=new Ps(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&qa(r.mutation,s,Rt.empty(),ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=ls();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ia();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ls();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Gn();const a=Ba(),c=function(){return Ba()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Kr)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),qa(f.mutation,d,f.mutation.getFieldMask(),ge.now())):a.set(d.key,Rt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>c.set(d,new bk(f,a.get(d)??null))),c))}recalculateAndSaveOverlays(e,n){const r=Ba();let s=new Pe((a,c)=>a-c),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Rt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||oe()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=Ew();f.forEach(g=>{if(!i.has(g)){const v=bw(n.get(g),r.get(g));v!==null&&m.set(g,v),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return K.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ls());let c=mo,u=i;return a.next(d=>F.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,oe())).next(f=>({batchId:c,changes:ww(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=Ia();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ia();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(m,g){return new Wi(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,ht.newInvalidDocument(f)))});let c=Ia();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&qa(f.mutation,d,Rt.empty(),ge.now()),Tu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return F.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:wn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:xk(s.bundledQuery),readTime:wn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(){this.overlays=new Pe(K.comparator),this.qr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ls();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ls(),i=n.length+1,a=new K(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Pe((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ls(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ls(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return F.resolve(c)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new KP(n,r));let i=this.qr.get(n);i===void 0&&(i=oe(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(){this.Qr=new We(He.$r),this.Ur=new We(He.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new He(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new He(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new K(new ye([])),r=new He(n,e),s=new He(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new K(new ye([])),r=new He(n,e),s=new He(n,e+1);let i=oe();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new He(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class He{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return K.comparator(e.key,n.key)||ae(e.Yr,n.Yr)}static Kr(e,n){return ae(e.Yr,n.Yr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new We(He.$r)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new GP(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.Zr=this.Zr.add(new He(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Mm:this.tr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new He(n,0),s=new He(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const c=this.Xr(a.Yr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new We(ae);return n.forEach(s=>{const i=new He(s,0),a=new He(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],c=>{r=r.add(c.Yr)})}),F.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const a=new He(new K(i),0);let c=new We(ae);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.Yr)),!0)},a),F.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return F.forEach(n.mutations,s=>{const i=new He(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new He(n,0),s=this.Zr.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(e){this.ri=e,this.docs=function(){return new Pe(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gn();const a=n.path,c=new K(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||uP(cP(f),r)<=0||(s.has(f.key)||Tu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ii(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Mk(this)}getSize(e){return F.resolve(this.size)}}class Mk extends Ik{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.persistence=e,this.si=new Ps(n=>Lm(n),Fm),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.oi=0,this._i=new Hm,this.targetCount=0,this.ai=Pi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),F.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Pi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Pr(n),F.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,n){this.ui={},this.overlays={},this.ci=new xu(0),this.li=!1,this.li=!0,this.hi=new jk,this.referenceDelegate=e(this),this.Pi=new Ok(this),this.indexManager=new _k,this.remoteDocumentCache=function(s){return new Dk(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new vk(n),this.Ii=new Pk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Rk(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new Vk(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return F.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Vk extends hP{constructor(e){super(),this.currentSequenceNumber=e}}class Qm{constructor(e){this.persistence=e,this.Ri=new Hm,this.Vi=null}static mi(e){return new Qm(e)}get fi(){if(this.Vi)return this.Vi;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.fi,r=>{const s=K.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Fc{constructor(e,n){this.persistence=e,this.pi=new Ps(r=>pP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=Sk(this,n)}static mi(e,n){return new Fc(e,n)}Ei(){}di(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return F.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?F.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(c=>{c||(r++,i.removeEntry(a,ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),F.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ql(e.data.value)),n}br(e,n,r){return F.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return F.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Gm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return hI()?8:fP(pt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Lk;return this.Ss(e,n,a).next(c=>{if(i.result=c,this.Vs)return this.bs(e,n,a,c.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?($s()<=ie.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),F.resolve()):($s()<=ie.DEBUG&&H("QueryEngine","Query:",zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?($s()<=ie.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):F.resolve())}ys(e,n){if(M0(n))return F.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=cf(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=oe(...i);return this.ps.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,c);return this.Cs(n,d,a,u.readTime)?this.ys(e,cf(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,s){return M0(n)||s.isEqual(ee.min())?F.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?F.resolve(null):($s()<=ie.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zs(n)),this.vs(e,a,n,lP(s,mo)).next(c=>c))})}Ds(e,n){let r=new We(xw(e));return n.forEach((s,i)=>{Tu(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return $s()<=ie.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",zs(n)),this.ps.getDocumentsMatchingQuery(e,n,Mr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",Uk=3e8;class $k{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Pe(ae),this.xs=new Ps(i=>Lm(i),Fm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ak(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function zk(t,e,n,r){return new $k(t,e,n,r)}async function zw(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=oe();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:c}))})})}function Bk(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let v=F.resolve();return g.forEach(b=>{v=v.next(()=>f.getEntry(u,b)).next(P=>{const k=d.docVersions.get(b);he(k!==null,48541),P.version.compareTo(k)<0&&(m.applyToRemoteDocument(P,d),P.isValidDocument()&&(P.setReadTime(d.commitVersion),f.addEntry(P)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=oe();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Bw(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function qk(t,e){const n=te(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Pi.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(i,f.addedDocuments,m)));let v=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(rt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(f.resumeToken,r)),s=s.insert(m,v),function(P,k,S){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Uk?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,v,f)&&c.push(n.Pi.updateTargetData(i,v))});let u=Gn(),d=oe();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(Wk(i,a,e.documentUpdates).next(f=>{u=f.ks,d=f.qs})),!r.isEqual(ee.min())){const f=n.Pi.getLastRemoteSnapshotVersion(i).next(m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return F.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.Ms=s,i))}function Wk(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Gn();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):H(Km,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{ks:a,qs:s}})}function Hk(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Mm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qk(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new gr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function mf(t,e,n){const r=te(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!qi(a))throw a;H(Km,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function G0(t,e,n){const r=te(t);let s=ee.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const m=te(u),g=m.xs.get(f);return g!==void 0?F.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,f)}(r,a,_n(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:ee.min(),n?i:oe())).next(c=>(Gk(r,RP(e),c),{documents:c,Qs:i})))}function Gk(t,e,n){let r=t.Os.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class K0{constructor(){this.activeTargetIds=FP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Kk{constructor(){this.Mo=new K0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new K0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="ConnectivityMonitor";class X0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(Y0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){H(Y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Al=null;function pf(){return Al===null?Al=function(){return 268435456+Math.round(2147483648*Math.random())}():Al++,"0x"+Al.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="RestConnection",Xk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Jk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Rc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=pf(),c=this.zo(e,n.toUriEncodedString());H(Wd,`Sending RPC '${e}' ${a}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:d}=new URL(c),f=Fi(d);return this.Jo(e,c,u,r,f).then(m=>(H(Wd,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Si(Wd,`RPC '${e}' ${a} failed with error: `,m,"url: ",c,"request:",r),m})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+zi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=Xk[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class ej extends Jk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=pf();return new Promise((c,u)=>{const d=new W1;d.setWithCredentials(!0),d.listenOnce(H1.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Hl.NO_ERROR:const m=d.getResponseJson();H(ct,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),c(m);break;case Hl.TIMEOUT:H(ct,`RPC '${e}' ${a} timed out`),u(new W(L.DEADLINE_EXCEEDED,"Request time out"));break;case Hl.HTTP_ERROR:const g=d.getStatus();if(H(ct,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const P=function(S){const x=S.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(x)>=0?x:L.UNKNOWN}(b.status);u(new W(P,b.message))}else u(new W(L.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new W(L.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(ct,`RPC '${e}' ${a} completed.`)}});const f=JSON.stringify(s);H(ct,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",f,r,15)})}T_(e,n,r){const s=pf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=K1(),c=G1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");H(ct,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);this.I_(m);let g=!1,v=!1;const b=new Zk({Yo:k=>{v?H(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(H(ct,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),H(ct,`RPC '${e}' stream ${s} sending:`,k),m.send(k))},Zo:()=>m.close()}),P=(k,S,x)=>{k.listen(S,w=>{try{x(w)}catch(j){setTimeout(()=>{throw j},0)}})};return P(m,Sa.EventType.OPEN,()=>{v||(H(ct,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),P(m,Sa.EventType.CLOSE,()=>{v||(v=!0,H(ct,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(m))}),P(m,Sa.EventType.ERROR,k=>{v||(v=!0,Si(ct,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),b.a_(new W(L.UNAVAILABLE,"The operation could not be completed")))}),P(m,Sa.EventType.MESSAGE,k=>{var S;if(!v){const x=k.data[0];he(!!x,16349);const w=x,j=(w==null?void 0:w.error)||((S=w[0])==null?void 0:S.error);if(j){H(ct,`RPC '${e}' stream ${s} received error:`,j);const O=j.status;let U=function(N){const C=Me[N];if(C!==void 0)return Pw(C)}(O),A=j.message;U===void 0&&(U=L.INTERNAL,A="Unknown error status: "+O+" with message "+j.message),v=!0,b.a_(new W(U,A)),m.close()}else H(ct,`RPC '${e}' stream ${s} received:`,x),b.u_(x)}}),P(c,Q1.STAT_EVENT,k=>{k.stat===tf.PROXY?H(ct,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===tf.NOPROXY&&H(ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iu(t){return new sk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0="PersistentStream";class Ww{constructor(e,n,r,s,i,a,c,u){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Hn(n.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new W(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(J0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(H(J0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tj extends Ww{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ok(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ee.min():a.readTime?wn(a.readTime):ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ff(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=of(u)?{documents:uk(i,u)}:{query:dk(i,u).ft},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=Rw(i,a.resumeToken);const d=uf(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ee.min())>0){c.readTime=Lc(i,a.snapshotVersion.toTimestamp());const d=uf(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=fk(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ff(this.serializer),n.removeTarget=e,this.q_(n)}}class nj extends Ww{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return he(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){he(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=ck(e.writeResults,e.commitTime),r=wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ff(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lk(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{}class sj extends rj{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,df(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(L.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Ho(e,df(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new W(L.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ij{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns="RemoteStore";class aj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ks(this)&&(H(Ns,"Restarting streams for network reachability change."),await async function(u){const d=te(u);d.Ea.add(4),await Lo(d),d.Ra.set("Unknown"),d.Ea.delete(4),await bu(d)}(this))})}),this.Ra=new ij(r,s)}}async function bu(t){if(ks(t))for(const e of t.da)await e(!0)}async function Lo(t){for(const e of t.da)await e(!1)}function Hw(t,e){const n=te(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Zm(n)?Jm(n):Hi(n).O_()&&Xm(n,e))}function Ym(t,e){const n=te(t),r=Hi(n);n.Ia.delete(e),r.O_()&&Qw(n,e),n.Ia.size===0&&(r.O_()?r.L_():ks(n)&&n.Ra.set("Unknown"))}function Xm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hi(t).Y_(e)}function Qw(t,e){t.Va.Ue(e),Hi(t).Z_(e)}function Jm(t){t.Va=new ek({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Hi(t).start(),t.Ra.ua()}function Zm(t){return ks(t)&&!Hi(t).x_()&&t.Ia.size>0}function ks(t){return te(t).Ea.size===0}function Gw(t){t.Va=void 0}async function oj(t){t.Ra.set("Online")}async function lj(t){t.Ia.forEach((e,n)=>{Xm(t,e)})}async function cj(t,e){Gw(t),Zm(t)?(t.Ra.ha(e),Jm(t)):t.Ra.set("Unknown")}async function uj(t,e,n){if(t.Ra.set("Online"),e instanceof jw&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.Ia.delete(c),s.Va.removeTarget(c))}(t,e)}catch(r){H(Ns,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Uc(t,r)}else if(e instanceof Yl?t.Va.Ze(e):e instanceof kw?t.Va.st(e):t.Va.tt(e),!n.isEqual(ee.min()))try{const r=await Bw(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Va.Tt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.Ia.get(d);f&&i.Ia.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=i.Ia.get(u);if(!f)return;i.Ia.set(u,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),Qw(i,u);const m=new gr(f.target,u,d,f.sequenceNumber);Xm(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){H(Ns,"Failed to raise snapshot:",r),await Uc(t,r)}}async function Uc(t,e,n){if(!qi(e))throw e;t.Ea.add(1),await Lo(t),t.Ra.set("Offline"),n||(n=()=>Bw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(Ns,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await bu(t)})}function Kw(t,e){return e().catch(n=>Uc(t,n,e))}async function Au(t){const e=te(t),n=Fr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mm;for(;dj(e);)try{const s=await Hk(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,hj(e,s)}catch(s){await Uc(e,s)}Yw(e)&&Xw(e)}function dj(t){return ks(t)&&t.Ta.length<10}function hj(t,e){t.Ta.push(e);const n=Fr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Yw(t){return ks(t)&&!Fr(t).x_()&&t.Ta.length>0}function Xw(t){Fr(t).start()}async function fj(t){Fr(t).ra()}async function mj(t){const e=Fr(t);for(const n of t.Ta)e.ea(n.mutations)}async function pj(t,e,n){const r=t.Ta.shift(),s=Bm.from(r,e,n);await Kw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Au(t)}async function gj(t,e){e&&Fr(t).X_&&await async function(r,s){if(function(a){return XP(a)&&a!==L.ABORTED}(s.code)){const i=r.Ta.shift();Fr(r).B_(),await Kw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Au(r)}}(t,e),Yw(t)&&Xw(t)}async function Z0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),H(Ns,"RemoteStore received new credentials");const r=ks(n);n.Ea.add(3),await Lo(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await bu(n)}async function yj(t,e){const n=te(t);e?(n.Ea.delete(2),await bu(n)):e||(n.Ea.add(2),await Lo(n),n.Ra.set("Unknown"))}function Hi(t){return t.ma||(t.ma=function(n,r,s){const i=te(n);return i.sa(),new tj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:oj.bind(null,t),t_:lj.bind(null,t),r_:cj.bind(null,t),H_:uj.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Zm(t)?Jm(t):t.Ra.set("Unknown")):(await t.ma.stop(),Gw(t))})),t.ma}function Fr(t){return t.fa||(t.fa=function(n,r,s){const i=te(n);return i.sa(),new nj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:fj.bind(null,t),r_:gj.bind(null,t),ta:mj.bind(null,t),na:pj.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Au(t)):(await t.fa.stop(),t.Ta.length>0&&(H(Ns,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new ep(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tp(t,e){if(Hn("AsyncQueue",`${e}: ${t}`),qi(t))return new W(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{static emptySet(e){return new mi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Ia(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new mi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.ga=new Pe(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ki{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new ki(e,n,mi.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class xj{constructor(){this.queries=tv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=tv(),i.forEach((a,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new W(L.ABORTED,"Firestore shutting down"))}}function tv(){return new Ps(t=>vw(t),Eu)}async function Jw(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new vj,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=tp(a,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&np(n)}async function Zw(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _j(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.Sa)c.Fa(s)&&(r=!0);a.wa=s}}r&&np(n)}function wj(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function np(t){t.Ca.forEach(e=>{e.next()})}var gf,nv;(nv=gf||(gf={})).Ma="default",nv.Cache="cache";class eE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e){this.key=e}}class nE{constructor(e){this.key=e}}class Ej{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=oe(),this.mutatedKeys=oe(),this.eu=xw(e),this.tu=new mi(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new ev,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),v=Tu(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let k=!1;g&&v?g.data.isEqual(v.data)?b!==P&&(r.track({type:3,doc:v}),k=!0):this.su(g,v)||(r.track({type:2,doc:v}),k=!0,(u&&this.eu(v,u)>0||d&&this.eu(v,d)<0)&&(c=!0)):!g&&v?(r.track({type:0,doc:v}),k=!0):g&&!v&&(r.track({type:1,doc:g}),k=!0,(u||d)&&(c=!0)),k&&(v?(a=a.add(v),i=P?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:a,iu:r,Cs:c,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((f,m)=>function(v,b){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Rt:k})}};return P(v)-P(b)}(f.type,m.type)||this.eu(f.doc,m.doc)),this.ou(r),s=s??!1;const c=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,d=u!==this.Za;return this.Za=u,a.length!==0||d?{snapshot:new ki(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ev,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new nE(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new tE(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ki.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rp="SyncEngine";class Tj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Nj{constructor(e){this.key=e,this.hu=!1}}class Cj{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Ps(c=>vw(c),Eu),this.Iu=new Map,this.Eu=new Set,this.du=new Pe(K.comparator),this.Au=new Map,this.Ru=new Hm,this.Vu={},this.mu=new Map,this.fu=Pi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Sj(t,e,n=!0){const r=lE(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await rE(r,e,n,!0),s}async function Ij(t,e){const n=lE(t);await rE(n,e,!0,!1)}async function rE(t,e,n,r){const s=await Qk(t.localStore,_n(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await bj(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Hw(t.remoteStore,s),c}async function bj(t,e,n,r,s){t.pu=(m,g,v)=>async function(P,k,S,x){let w=k.view.ru(S);w.Cs&&(w=await G0(P.localStore,k.query,!1).then(({documents:A})=>k.view.ru(A,w)));const j=x&&x.targetChanges.get(k.targetId),O=x&&x.targetMismatches.get(k.targetId)!=null,U=k.view.applyChanges(w,P.isPrimaryClient,j,O);return sv(P,k.targetId,U.au),U.snapshot}(t,m,g,v);const i=await G0(t.localStore,e,!0),a=new Ej(e,i.Qs),c=a.ru(i.documents),u=Vo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);sv(t,n,d.au);const f=new Tj(e,n,a);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Aj(t,e,n){const r=te(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Eu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await mf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ym(r.remoteStore,s.targetId),yf(r,s.targetId)}).catch(Bi)):(yf(r,s.targetId),await mf(r.localStore,s.targetId,!0))}async function Pj(t,e){const n=te(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ym(n.remoteStore,r.targetId))}async function kj(t,e,n){const r=Lj(t);try{const s=await function(a,c){const u=te(a),d=ge.now(),f=c.reduce((v,b)=>v.add(b.key),oe());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Gn(),P=oe();return u.Ns.getEntries(v,f).next(k=>{b=k,b.forEach((S,x)=>{x.isValidDocument()||(P=P.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,b)).next(k=>{m=k;const S=[];for(const x of c){const w=HP(x,m.get(x.key).overlayedDocument);w!=null&&S.push(new Kr(x.key,w,uw(w.value.mapValue),rn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,S,c)}).next(k=>{g=k;const S=k.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(v,k.batchId,S)})}).then(()=>({batchId:g.batchId,changes:ww(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Vu[a.currentUser.toKey()];d||(d=new Pe(ae)),d=d.insert(c,u),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Fo(r,s.changes),await Au(r.remoteStore)}catch(s){const i=tp(s,"Failed to persist write");n.reject(i)}}async function sE(t,e){const n=te(t);try{const r=await qk(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?he(a.hu,14607):s.removedDocuments.size>0&&(he(a.hu,42227),a.hu=!1))}),await Fo(n,r,e)}catch(r){await Bi(r)}}function rv(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const c=a.view.va(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=te(a);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.Sa)g.va(c)&&(d=!0)}),d&&np(u)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jj(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Pe(K.comparator);a=a.insert(i,ht.newNoDocument(i,ee.min()));const c=oe().add(i),u=new Su(ee.min(),new Map,new Pe(ae),a,c);await sE(r,u),r.du=r.du.remove(i),r.Au.delete(e),sp(r)}else await mf(r.localStore,e,!1).then(()=>yf(r,e,n)).catch(Bi)}async function Rj(t,e){const n=te(t),r=e.batch.batchId;try{const s=await Bk(n.localStore,e);aE(n,r,null),iE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fo(n,s)}catch(s){await Bi(s)}}async function Dj(t,e,n){const r=te(t);try{const s=await function(a,c){const u=te(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(he(m!==null,37113),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);aE(r,e,n),iE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fo(r,s)}catch(s){await Bi(s)}}function iE(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function aE(t,e,n){const r=te(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function yf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||oE(t,r)})}function oE(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ym(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),sp(t))}function sv(t,e,n){for(const r of n)r instanceof tE?(t.Ru.addReference(r.key,e),Mj(t,r)):r instanceof nE?(H(rp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||oE(t,r.key)):J(19791,{wu:r})}function Mj(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(H(rp,"New document in limbo: "+n),t.Eu.add(r),sp(t))}function sp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(ye.fromString(e)),r=t.fu.next();t.Au.set(r,new Nj(n)),t.du=t.du.insert(n,r),Hw(t.remoteStore,new gr(_n(Um(n.path)),r,"TargetPurposeLimboResolution",xu.ce))}}async function Fo(t,e,n){const r=te(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{a.push(r.pu(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Gm.As(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(u,d){const f=te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,g=>F.forEach(g.Es,v=>f.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>F.forEach(g.ds,v=>f.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!qi(m))throw m;H(Km,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const v=f.Ms.get(g),b=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(b);f.Ms=f.Ms.insert(g,P)}}}(r.localStore,i))}async function Oj(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){H(rp,"User change. New user:",e.toKey());const r=await zw(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(c=>{c.forEach(u=>{u.reject(new W(L.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fo(n,r.Ls)}}function Vj(t,e){const n=te(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let s=oe();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const c=n.Tu.get(a);s=s.unionWith(c.view.nu)}return s}}function lE(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Vj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jj.bind(null,e),e.Pu.H_=_j.bind(null,e.eventManager),e.Pu.yu=wj.bind(null,e.eventManager),e}function Lj(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Rj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dj.bind(null,e),e}class $c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Iu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return zk(this.persistence,new Fk,e.initialUser,this.serializer)}Cu(e){return new $w(Qm.mi,this.serializer)}Du(e){return new Kk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$c.provider={build:()=>new $c};class Fj extends $c{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){he(this.persistence.referenceDelegate instanceof Fc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Nk(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Tt.withCacheSize(this.cacheSizeBytes):Tt.DEFAULT;return new $w(r=>Fc.mi(r,n),this.serializer)}}class vf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oj.bind(null,this.syncEngine),await yj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new xj}()}createDatastore(e){const n=Iu(e.databaseInfo.databaseId),r=function(i){return new ej(i)}(e.databaseInfo);return function(i,a,c,u){return new sj(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new aj(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>rv(this.syncEngine,n,0),function(){return X0.v()?new X0:new Yk}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,f){const m=new Cj(s,i,a,c,u,d);return f&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);H(Ns,"RemoteStore shutting down."),i.Ea.add(5),await Lo(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur="FirestoreClient";class Uj{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=Dm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{H(Ur,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H(Ur,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=tp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),H(Ur,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await zw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function iv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $j(t);H(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Z0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Z0(e.remoteStore,s)),t._onlineComponents=e}async function $j(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Ur,"Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Si("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new $c)}}else H(Ur,"Using default OfflineComponentProvider"),await Qd(t,new Fj(void 0));return t._offlineComponents}async function uE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Ur,"Using user provided OnlineComponentProvider"),await iv(t,t._uninitializedComponentsProvider._online)):(H(Ur,"Using default OnlineComponentProvider"),await iv(t,new vf))),t._onlineComponents}function zj(t){return uE(t).then(e=>e.syncEngine)}async function dE(t){const e=await uE(t),n=e.eventManager;return n.onListen=Sj.bind(null,e.syncEngine),n.onUnlisten=Aj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Ij.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Pj.bind(null,e.syncEngine),n}function Bj(t,e,n={}){const r=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new cE({next:g=>{f.Nu(),a.enqueueAndForget(()=>Zw(i,m));const v=g.docs.has(c);!v&&g.fromCache?d.reject(new W(L.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&u&&u.source==="server"?d.reject(new W(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new eE(Um(c.path),f,{includeMetadataChanges:!0,qa:!0});return Jw(i,m)}(await dE(t),t.asyncQueue,e,n,r)),r.promise}function qj(t,e,n={}){const r=new Fn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new cE({next:g=>{f.Nu(),a.enqueueAndForget(()=>Zw(i,m)),g.fromCache&&u.source==="server"?d.reject(new W(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new eE(c,f,{includeMetadataChanges:!0,qa:!0});return Jw(i,m)}(await dE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="firestore.googleapis.com",ov=!0;class lv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fE,this.ssl=ov}else this.host=e.host,this.ssl=e.ssl??ov;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Uw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ek)throw new W(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hE(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new X2;switch(r.type){case"firstParty":return new tP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=av.get(n);r&&(H("ComponentProvider","Removing Datastore"),av.delete(n),r.terminate())}(this),Promise.resolve()}}function Wj(t,e,n,r={}){var d;t=Qn(t,Pu);const s=Fi(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;s&&(e1(`https://${c}`),t1("Firestore",!0)),i.host!==fE&&i.host!==c&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:c,ssl:s,emulatorOptions:r};if(!xs(u,a)&&(t._setSettings(u),r.mockUserToken)){let f,m;if(typeof r.mockUserToken=="string")f=r.mockUserToken,m=ut.MOCK_USER;else{f=rI(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new W(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new ut(g)}t._authCredentials=new J2(new X1(f,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new js(this.firestore,e,this._query)}}class Ue{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ue(this.firestore,e,this._key)}toJSON(){return{type:Ue._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Mo(n,Ue._jsonSchema))return new Ue(e,r||null,new K(ye.fromString(n.referencePath)))}}Ue._jsonSchemaVersion="firestore/documentReference/1.0",Ue._jsonSchema={type:Fe("string",Ue._jsonSchemaVersion),referencePath:Fe("string")};class Pr extends js{constructor(e,n,r){super(e,n,Um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ue(this.firestore,null,new K(e))}withConverter(e){return new Pr(this.firestore,e,this._path)}}function ds(t,e,...n){if(t=Ke(t),J1("collection","path",e),t instanceof Pu){const r=ye.fromString(e,...n);return w0(r),new Pr(t,null,r)}{if(!(t instanceof Ue||t instanceof Pr))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return w0(r),new Pr(t.firestore,null,r)}}function en(t,e,...n){if(t=Ke(t),arguments.length===1&&(e=Dm.newId()),J1("doc","path",e),t instanceof Pu){const r=ye.fromString(e,...n);return _0(r),new Ue(t,null,new K(r))}{if(!(t instanceof Ue||t instanceof Pr))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return _0(r),new Ue(t.firestore,t instanceof Pr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="AsyncQueue";class uv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qw(this,"async_queue_retry"),this._c=()=>{const r=Hd();r&&H(cv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Fn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qi(e))throw e;H(cv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Hn("INTERNAL UNHANDLED ERROR: ",dv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=ep.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function dv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Qi extends Pu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new uv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uv(e),this._firestoreClient=void 0,await e}}}function Hj(t,e){const n=typeof t=="object"?t:i1(),r=typeof t=="string"?t:e||Rc,s=Nm(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=tI("firestore");i&&Wj(s,...i)}return s}function ip(t){if(t._terminated)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Qj(t),t._firestoreClient}function Qj(t){var r,s,i;const e=t._freezeSettings(),n=function(c,u,d,f){return new vP(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,hE(f.experimentalLongPollingOptions),f.useFetchStreams,f.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Uj(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zt(rt.fromBase64String(e))}catch(n){throw new W(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zt(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mo(e,zt._jsonSchema))return zt.fromBase64String(e.bytes)}}zt._jsonSchemaVersion="firestore/bytes/1.0",zt._jsonSchema={type:Fe("string",zt._jsonSchemaVersion),bytes:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:En._jsonSchemaVersion}}static fromJSON(e){if(Mo(e,En._jsonSchema))return new En(e.latitude,e.longitude)}}En._jsonSchemaVersion="firestore/geoPoint/1.0",En._jsonSchema={type:Fe("string",En._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Tn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mo(e,Tn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Tn(e.vectorValues);throw new W(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Tn._jsonSchemaVersion="firestore/vectorValue/1.0",Tn._jsonSchema={type:Fe("string",Tn._jsonSchemaVersion),vectorValues:Fe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=/^__.*__$/;class Kj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Oo(e,this.data,n,this.fieldTransforms)}}class mE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Kr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{Ac:t})}}class op{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new op({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(pE(this.Ac)&&Gj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Yj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Iu(e)}Cc(e,n,r,s=!1){return new op({Ac:e,methodName:n,Dc:r,path:et.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lp(t){const e=t._freezeSettings(),n=Iu(t._databaseId);return new Yj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Xj(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);cp("Data must be an object, but it was:",a,r);const c=gE(r,a);let u,d;if(i.merge)u=new Rt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=xf(e,m,n);if(!a.contains(g))throw new W(L.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);vE(f,g)||f.push(g)}u=new Rt(f),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new Kj(new Ct(c),u,d)}class ju extends ap{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ju}}function Jj(t,e,n,r){const s=t.Cc(1,e,n);cp("Data must be an object, but it was:",s,r);const i=[],a=Ct.empty();Gr(r,(u,d)=>{const f=up(e,u,n);d=Ke(d);const m=s.yc(f);if(d instanceof ju)i.push(f);else{const g=Uo(d,m);g!=null&&(i.push(f),a.set(f,g))}});const c=new Rt(i);return new mE(a,c,s.fieldTransforms)}function Zj(t,e,n,r,s,i){const a=t.Cc(1,e,n),c=[xf(e,r,n)],u=[s];if(i.length%2!=0)throw new W(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(xf(e,i[g])),u.push(i[g+1]);const d=[],f=Ct.empty();for(let g=c.length-1;g>=0;--g)if(!vE(d,c[g])){const v=c[g];let b=u[g];b=Ke(b);const P=a.yc(v);if(b instanceof ju)d.push(v);else{const k=Uo(b,P);k!=null&&(d.push(v),f.set(v,k))}}const m=new Rt(d);return new mE(f,m,a.fieldTransforms)}function eR(t,e,n,r=!1){return Uo(n,t.Cc(r?4:3,e))}function Uo(t,e){if(yE(t=Ke(t)))return cp("Unsupported field value:",e,t),gE(t,e);if(t instanceof ap)return function(r,s){if(!pE(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=Uo(c,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return UP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ge.fromDate(r);return{timestampValue:Lc(s.serializer,i)}}if(r instanceof ge){const i=new ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(s.serializer,i)}}if(r instanceof En)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zt)return{bytesValue:Rw(s.serializer,r._byteString)};if(r instanceof Ue){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Tn)return function(a,c){return{mapValue:{fields:{[ow]:{stringValue:cw},[Dc]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw c.Sc("VectorValues must only contain numeric values.");return $m(c.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${vu(r)}`)}(t,e)}function gE(t,e){const n={};return tw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gr(t,(r,s)=>{const i=Uo(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function yE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ge||t instanceof En||t instanceof zt||t instanceof Ue||t instanceof ap||t instanceof Tn)}function cp(t,e,n){if(!yE(n)||!Z1(n)){const r=vu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function xf(t,e,n){if((e=Ke(e))instanceof ku)return e._internalPath;if(typeof e=="string")return up(t,e);throw zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const tR=new RegExp("[~\\*/\\[\\]]");function up(t,e,n){if(e.search(tR)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ku(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zc(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new W(L.INVALID_ARGUMENT,c+t+u)}function vE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ue(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ru("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nR extends xE{data(){return super.data()}}function Ru(t,e){return typeof e=="string"?up(t,e):e instanceof ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dp{}class _E extends dp{}function Bc(t,e,...n){let r=[];e instanceof dp&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof hp).length,c=i.filter(u=>u instanceof Du).length;if(a>1||a>0&&c>0)throw new W(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Du extends _E{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Du(e,n,r)}_apply(e){const n=this._parse(e);return wE(e._query,n),new js(e.firestore,e.converter,lf(e._query,n))}_parse(e){const n=lp(e.firestore);return function(i,a,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new W(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){fv(m,f);const b=[];for(const P of m)b.push(hv(u,i,P));g={arrayValue:{values:b}}}else g=hv(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||fv(m,f),g=eR(c,a,m,f==="in"||f==="not-in");return Le.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function sR(t,e,n){const r=e,s=Ru("where",t);return Du._create(s,r,n)}class hp extends dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:on.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)wE(a,u),a=lf(a,u)}(e._query,n),new js(e.firestore,e.converter,lf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fp extends _E{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new fp(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new W(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vo(i,a)}(e._query,this._field,this._direction);return new js(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Wi(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function qc(t,e="asc"){const n=e,r=Ru("orderBy",t);return fp._create(r,n)}function hv(t,e,n){if(typeof(n=Ke(n))=="string"){if(n==="")throw new W(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yw(e)&&n.indexOf("/")!==-1)throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!K.isDocumentKey(r))throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return A0(t,new K(r))}if(n instanceof Ue)return A0(t,n._key);throw new W(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vu(n)}.`)}function fv(t,e){if(!Array.isArray(t)||t.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wE(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class iR{convertValue(e,n="none"){switch(Lr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Dc].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Re(a.doubleValue));return new Tn(n)}convertGeoPoint(e){return new En(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=wu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(po(e));default:return null}}convertTimestamp(e){const n=Or(e);return new ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);he(Fw(r),9688,{name:e});const s=new go(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Hn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Aa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hs extends xE{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ru("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=hs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",hs._jsonSchema={type:Fe("string",hs._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class Xl extends hs{data(e={}){return super.data(e)}}class pi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Aa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Xl(this._firestore,this._userDataWriter,r.key,r,new Aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new Xl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Aa(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new Xl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Aa(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:oR(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Dm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function oR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mp(t){t=Qn(t,Ue);const e=Qn(t.firestore,Qi);return Bj(ip(e),t._key).then(n=>lR(e,t,n))}pi._jsonSchemaVersion="firestore/querySnapshot/1.0",pi._jsonSchema={type:Fe("string",pi._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class EE extends iR{constructor(e){super(),this.firestore=e}convertBytes(e){return new zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ue(this.firestore,null,n)}}function Wc(t){t=Qn(t,js);const e=Qn(t.firestore,Qi),n=ip(e),r=new EE(e);return rR(t._query),qj(n,t._query).then(s=>new pi(e,r,t,s))}function Hc(t,e,n,...r){t=Qn(t,Ue);const s=Qn(t.firestore,Qi),i=lp(s);let a;return a=typeof(e=Ke(e))=="string"||e instanceof ku?Zj(i,"updateDoc",t._key,e,n,r):Jj(i,"updateDoc",t._key,e),yp(s,[a.toMutation(t._key,rn.exists(!0))])}function pp(t){return yp(Qn(t.firestore,Qi),[new zm(t._key,rn.none())])}function gp(t,e){const n=Qn(t.firestore,Qi),r=en(t),s=aR(t.converter,e);return yp(n,[Xj(lp(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,rn.exists(!1))]).then(()=>r)}function yp(t,e){return function(r,s){const i=new Fn;return r.asyncQueue.enqueueAndForget(async()=>kj(await zj(r),s,i)),i.promise}(ip(t),e)}function lR(t,e,n){const r=n.docs.get(e._key),s=new EE(t);return new hs(t,s,e._key,r,new Aa(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){zi=s})(Ui),Ci(new _s("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new Qi(new Z2(r.getProvider("auth-internal")),new nP(a,r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new go(d.options.projectId,f)}(a,s),a);return i={useFetchStreams:n,...i},c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),br(g0,y0,e),br(g0,y0,"esm2020")})();const cR={apiKey:"AIzaSyDMUN7n7U1yt7z4HmwlXVS0y-b55jpLaO0",authDomain:"importationf.firebaseapp.com",projectId:"importationf",storageBucket:"importationf.firebasestorage.app",messagingSenderId:"570572974185",appId:"1:570572974185:web:693fc4b376bbc8ea519af8"},TE=s1(cR),Ze=Hj(TE),wo=B2(TE);var uR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hR=(t,e)=>{const n=V.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,children:c,...u},d)=>V.createElement("svg",{ref:d,...uR,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:`lucide lucide-${dR(t)}`,...u},[...e.map(([f,m])=>V.createElement(f,m)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${t}`,n};var Z=hR;const fR=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),mR=Z("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]),NE=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),_f=Z("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),mv=Z("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),pR=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),CE=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),SE=Z("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),wf=Z("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Ef=Z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),vp=Z("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),gR=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),yR=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),vR=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),fs=Z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Tf=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),xR=Z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ji=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pn=Z("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),_R=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),IE=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),Eo=Z("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),wR=Z("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),pv=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ER=Z("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),TR=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),xp=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),bE=Z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Nf=Z("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),NR=Z("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Mu=Z("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),AE=Z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),CR=Z("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),$r=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),SR=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Ou=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Vu=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),PE=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),IR=Z("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),$o=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),_p=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),kE=Z("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),bR=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Qc=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),jE=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),AR=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),PR=()=>{const t=Li(),e=[{path:"/",icon:wR,label:"Dashboard",color:"text-blue-500"},{path:"/quotes",icon:pn,label:"Devis",color:"text-emerald-500"},{path:"/quotes/new",icon:$r,label:"Nouveau Devis",color:"text-violet-500"},{path:"/cost-calculation",icon:Ef,label:"Calcul des coûts",color:"text-amber-500"},{path:"/cost-history",icon:Eo,label:"Historique Calculs",color:"text-purple-500"},{path:"/analytics",icon:_p,label:"Analyses",color:"text-rose-500"},{path:"/clients",icon:jE,label:"Clients",color:"text-cyan-500"},{path:"/settings",icon:PE,label:"Paramètres",color:"text-neutral-500"}];return o.jsxs("div",{className:"bg-white h-full shadow-strong border-r border-neutral-200/50 backdrop-blur-sm",children:[o.jsx("div",{className:"p-6 border-b border-neutral-200/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-soft",children:o.jsx(SE,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gradient",children:"ImportPro"}),o.jsx("p",{className:"text-xs text-neutral-500 font-medium",children:"Gestion des Devis"})]})]})}),o.jsx("nav",{className:"mt-6 pb-6",children:o.jsx("div",{className:"space-y-1",children:e.map(n=>{const r=n.icon,s=t.pathname===n.path;return o.jsxs(Ni,{to:n.path,className:`sidebar-item ${s?"sidebar-item-active":"sidebar-item-inactive"} group`,children:[o.jsx("div",{className:`stat-icon ${s?"bg-white/20":"bg-neutral-100"} mr-3`,children:o.jsx(r,{className:`w-5 h-5 ${s?"text-white":n.color}`})}),o.jsx("span",{className:"font-medium",children:n.label}),s&&o.jsx("div",{className:"ml-auto w-2 h-2 bg-white rounded-full shadow-glow"})]},n.path)})})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-neutral-200/50",children:o.jsx("div",{className:"bg-gradient-to-r from-primary-50 to-accent-50 p-4 rounded-xl border border-primary-200/50",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-accent-500 rounded-lg flex items-center justify-center",children:o.jsx("span",{className:"text-white text-xs font-bold",children:"V"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-semibold text-neutral-800",children:"Version 1.0"}),o.jsx("p",{className:"text-xs text-neutral-500",children:"Système professionnel"})]})]})})})]})},kR=()=>{const t=Xn(),[e]=B1(wo),n=async()=>{try{console.log("Attempting to sign out user..."),await jA(wo),console.log("User signed out successfully"),t("/login")}catch(r){console.error("Erreur lors de la déconnexion:",r)}};return o.jsx("header",{className:"bg-white/80 backdrop-blur-md shadow-soft border-b border-neutral-200/50 px-6 py-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"flex items-center flex-1 max-w-2xl",children:o.jsxs("div",{className:"relative w-full",children:[o.jsx(Vu,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400 w-5 h-5"}),o.jsx("input",{type:"text",placeholder:"Rechercher un devis, client ou produit...",className:"pl-12 pr-4 py-3 border border-neutral-300 rounded-xl focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 w-full bg-white/50 backdrop-blur-sm transition-all duration-200 placeholder-neutral-400"})]})}),o.jsxs("div",{className:"flex items-center space-x-4 ml-6",children:[o.jsx("div",{className:"relative",children:o.jsxs("button",{className:"relative p-3 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-xl transition-all duration-200 group",children:[o.jsx(CE,{className:"w-5 h-5 group-hover:scale-110 transition-transform duration-200"}),o.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-gradient-to-r from-error-500 to-error-600 text-white text-xs rounded-full flex items-center justify-center font-bold shadow-soft",children:"3"})]})}),o.jsxs("div",{className:"flex items-center space-x-3 pl-4 border-l border-neutral-200",children:[o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"text-sm font-semibold text-neutral-900",children:(e==null?void 0:e.email)||"Utilisateur"}),o.jsx("p",{className:"text-xs text-neutral-500",children:"Gestionnaire Principal"})]}),o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-accent-500 rounded-xl flex items-center justify-center shadow-soft group-hover:shadow-medium transition-all duration-200 cursor-pointer",children:o.jsx(Qc,{className:"w-5 h-5 text-white"})}),o.jsx("div",{className:"absolute right-0 top-12 w-48 bg-white rounded-xl shadow-strong border border-neutral-200/50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:o.jsxs("div",{className:"p-2",children:[o.jsxs(Ni,{to:"/profile",className:"w-full flex items-center px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50 rounded-lg transition-colors duration-200",children:[o.jsx(Qc,{className:"w-4 h-4 mr-3"}),"Mon Profil"]}),o.jsxs(Ni,{to:"/settings",className:"w-full flex items-center px-3 py-2 text-sm text-neutral-700 hover:bg-neutral-50 rounded-lg transition-colors duration-200",children:[o.jsx(PE,{className:"w-4 h-4 mr-3"}),"Paramètres"]}),o.jsx("hr",{className:"my-2 border-neutral-200"}),o.jsxs("button",{onClick:n,className:"w-full flex items-center px-3 py-2 text-sm text-error-600 hover:bg-error-50 rounded-lg transition-colors duration-200",children:[o.jsx(TR,{className:"w-4 h-4 mr-3"}),"Déconnexion"]})]})})]})]})]})]})})},jR=({children:t})=>o.jsxs("div",{className:"flex h-screen bg-gradient-to-br from-neutral-50 to-neutral-100",children:[o.jsx("div",{className:"w-72 flex-shrink-0 relative",children:o.jsx(PR,{})}),o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[o.jsx(kR,{}),o.jsx("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:o.jsx("div",{className:"animate-fade-in",children:t})})]})]}),gv=()=>{const t=Xn(),[e,n]=V.useState(!0),[r,s]=V.useState(""),[i,a]=V.useState(""),[c,u]=V.useState(""),[d,f]=V.useState(!1),[m,g]=V.useState(!1),[v,b]=V.useState(""),P=async S=>{if(S.preventDefault(),b(""),g(!0),!r||!i){b("Veuillez remplir tous les champs"),g(!1);return}if(!e&&i!==c){b("Les mots de passe ne correspondent pas"),g(!1);return}if(i.length<6){b("Le mot de passe doit contenir au moins 6 caractères"),g(!1);return}try{e?(await bA(wo,r,i),console.log("User signed in successfully")):(await IA(wo,r,i),console.log("User registered successfully")),t("/")}catch(x){switch(console.error("Authentication error:",x),x.code){case"auth/user-not-found":b("Aucun compte trouvé avec cette adresse email");break;case"auth/wrong-password":b("Mot de passe incorrect");break;case"auth/email-already-in-use":b("Cette adresse email est déjà utilisée");break;case"auth/weak-password":b("Le mot de passe est trop faible");break;case"auth/invalid-email":b("Adresse email invalide");break;case"auth/too-many-requests":b("Trop de tentatives. Veuillez réessayer plus tard");break;default:b("Une erreur est survenue. Veuillez réessayer")}}finally{g(!1)}},k=()=>{n(!e),b(""),a(""),u("")};return o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 via-white to-accent-50 flex items-center justify-center p-4",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary-500 to-accent-500 rounded-2xl shadow-soft mb-4",children:o.jsx(SE,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-3xl font-bold text-gradient mb-2",children:"ImportPro"}),o.jsx("p",{className:"text-neutral-600",children:e?"Connectez-vous à votre compte":"Créez votre compte"})]}),o.jsxs("div",{className:"card-elevated p-8",children:[o.jsxs("form",{onSubmit:P,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Adresse email"}),o.jsxs("div",{className:"relative",children:[o.jsx(xp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-5 h-5"}),o.jsx("input",{type:"email",value:r,onChange:S=>s(S.target.value),className:"input-field pl-11",placeholder:"votre@email.com",required:!0})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Mot de passe"}),o.jsxs("div",{className:"relative",children:[o.jsx(pv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-5 h-5"}),o.jsx("input",{type:d?"text":"password",value:i,onChange:S=>a(S.target.value),className:"input-field pl-11 pr-11",placeholder:"••••••••",required:!0}),o.jsx("button",{type:"button",onClick:()=>f(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors",children:d?o.jsx(xR,{className:"w-5 h-5"}):o.jsx(ji,{className:"w-5 h-5"})})]})]}),!e&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-2",children:"Confirmer le mot de passe"}),o.jsxs("div",{className:"relative",children:[o.jsx(pv,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400 w-5 h-5"}),o.jsx("input",{type:d?"text":"password",value:c,onChange:S=>u(S.target.value),className:"input-field pl-11",placeholder:"••••••••",required:!0})]})]}),v&&o.jsx("div",{className:"bg-error-50 border border-error-200 rounded-lg p-3",children:o.jsx("p",{className:"text-error-700 text-sm",children:v})}),o.jsx("button",{type:"submit",disabled:m,className:"w-full btn-primary flex items-center justify-center space-x-2 py-3",children:m?o.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):o.jsxs(o.Fragment,{children:[e?o.jsx(ER,{className:"w-5 h-5"}):o.jsx(bR,{className:"w-5 h-5"}),o.jsx("span",{children:e?"Se connecter":"Créer un compte"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-neutral-600 text-sm",children:[e?"Vous n'avez pas de compte ?":"Vous avez déjà un compte ?",o.jsx("button",{type:"button",onClick:k,className:"ml-2 text-primary-600 hover:text-primary-700 font-medium transition-colors",children:e?"Créer un compte":"Se connecter"})]})}),o.jsxs("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[o.jsx("p",{className:"text-blue-800 text-sm font-medium mb-2",children:"Compte de démonstration :"}),o.jsx("p",{className:"text-blue-700 text-xs",children:"Email: admin@importpro.com"}),o.jsx("p",{className:"text-blue-700 text-xs",children:"Mot de passe: demo123"})]})]}),o.jsx("div",{className:"text-center mt-8",children:o.jsx("p",{className:"text-neutral-500 text-sm",children:"© 2024 ImportPro. Système de gestion des devis d'importation."})})]})})},Nn=t=>{if(t==null)return null;if(t instanceof Date||t instanceof ge)return t;if(Array.isArray(t))return t.map(e=>Nn(e));if(typeof t=="object"&&t.constructor===Object){const e={};return Object.keys(t).forEach(n=>{const r=t[n];r!==void 0&&(e[n]=Nn(r))}),e}return t},Ls="quotes",Fs="clients",ya="costCalculations",Se=t=>t&&t.toDate?t.toDate():new Date(t),Et=t=>ge.fromDate(t),va={async getAll(){try{const t=Bc(ds(Ze,Ls),qc("createdAt","desc"));return(await Wc(t)).docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:Se(r.createdAt),updatedAt:Se(r.updatedAt),validUntil:Se(r.validUntil),estimatedDelivery:Se(r.estimatedDelivery),downPayment:r.downPayment?{...r.downPayment,paidDate:r.downPayment.paidDate?Se(r.downPayment.paidDate):void 0}:void 0}})}catch(t){throw console.error("Error fetching quotes:",t),t}},async getById(t){try{const e=en(Ze,Ls,t),n=await mp(e);if(n.exists()){const r=n.data();return{id:n.id,...r,createdAt:Se(r.createdAt),updatedAt:Se(r.updatedAt),validUntil:Se(r.validUntil),estimatedDelivery:Se(r.estimatedDelivery),downPayment:r.downPayment?{...r.downPayment,paidDate:r.downPayment.paidDate?Se(r.downPayment.paidDate):void 0}:void 0}}return null}catch(e){throw console.error("Error fetching quote:",e),e}},async add(t){try{const e=new Date,n={...t,createdAt:Et(e),updatedAt:Et(e),validUntil:Et(t.validUntil),estimatedDelivery:Et(t.estimatedDelivery),...t.downPayment&&{downPayment:{...t.downPayment,paidDate:t.downPayment.paidDate?Et(t.downPayment.paidDate):null}}},r=Nn(n);return{id:(await gp(ds(Ze,Ls),r)).id,...t,createdAt:e,updatedAt:e}}catch(e){throw console.error("Error adding quote:",e),e}},async update(t,e){try{const n=en(Ze,Ls,t),r={...e,updatedAt:Et(new Date),...e.validUntil&&{validUntil:Et(e.validUntil)},...e.estimatedDelivery&&{estimatedDelivery:Et(e.estimatedDelivery)},...e.downPayment&&{downPayment:Nn({...e.downPayment,paidDate:e.downPayment.paidDate?Et(e.downPayment.paidDate):null})}},s=Nn(r);await Hc(n,s)}catch(n){throw console.error("Error updating quote:",n),n}},async delete(t){try{const e=en(Ze,Ls,t);await pp(e)}catch(e){throw console.error("Error deleting quote:",e),e}},async getByStatus(t){try{const e=Bc(ds(Ze,Ls),sR("status","==",t),qc("createdAt","desc"));return(await Wc(e)).docs.map(r=>{const s=r.data();return{id:r.id,...s,createdAt:Se(s.createdAt),updatedAt:Se(s.updatedAt),validUntil:Se(s.validUntil),estimatedDelivery:Se(s.estimatedDelivery),downPayment:s.downPayment?{...s.downPayment,paidDate:s.downPayment.paidDate?Se(s.downPayment.paidDate):void 0}:void 0}})}catch(e){throw console.error("Error fetching quotes by status:",e),e}}},xa={async getAll(){try{const t=Bc(ds(Ze,Fs),qc("createdAt","desc"));return(await Wc(t)).docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:Se(r.createdAt)}})}catch(t){throw console.error("Error fetching clients:",t),t}},async getById(t){try{const e=en(Ze,Fs,t),n=await mp(e);if(n.exists()){const r=n.data();return{id:n.id,...r,createdAt:Se(r.createdAt)}}return null}catch(e){throw console.error("Error fetching client:",e),e}},async add(t){try{const e=new Date,n={...t,createdAt:Et(e),totalQuotes:0,totalValue:0},r=Nn(n);return{id:(await gp(ds(Ze,Fs),r)).id,...t,createdAt:e,totalQuotes:0,totalValue:0}}catch(e){throw console.error("Error adding client:",e),e}},async update(t,e){try{const n=en(Ze,Fs,t),r=Nn(e);await Hc(n,r)}catch(n){throw console.error("Error updating client:",n),n}},async delete(t){try{const e=en(Ze,Fs,t);await pp(e)}catch(e){throw console.error("Error deleting client:",e),e}},async updateStats(t,e,n){try{const r=en(Ze,Fs,t),i=Nn({totalQuotes:e,totalValue:n});await Hc(r,i)}catch(r){throw console.error("Error updating client stats:",r),r}}},rs={async getAll(){try{const t=Bc(ds(Ze,ya),qc("createdAt","desc"));return(await Wc(t)).docs.map(n=>{const r=n.data();return{id:n.id,...r,createdAt:Se(r.createdAt),updatedAt:Se(r.updatedAt),calculatedAt:Se(r.calculatedAt)}})}catch(t){throw console.error("Error fetching cost calculations:",t),t}},async getById(t){try{const e=en(Ze,ya,t),n=await mp(e);if(n.exists()){const r=n.data();return{id:n.id,...r,createdAt:Se(r.createdAt),updatedAt:Se(r.updatedAt),calculatedAt:Se(r.calculatedAt)}}return null}catch(e){throw console.error("Error fetching cost calculation:",e),e}},async add(t,e){try{const n=new Date,r={...t,name:e,createdAt:Et(n),updatedAt:Et(n),calculatedAt:Et(t.calculatedAt||n)},s=Nn(r);return{id:(await gp(ds(Ze,ya),s)).id,...t,name:e,createdAt:n,updatedAt:n,calculatedAt:t.calculatedAt||n}}catch(n){throw console.error("Error adding cost calculation:",n),n}},async update(t,e){try{const n=en(Ze,ya,t),r={...e,updatedAt:Et(new Date)},s=Nn(r);await Hc(n,s)}catch(n){throw console.error("Error updating cost calculation:",n),n}},async delete(t){try{const e=en(Ze,ya,t);await pp(e)}catch(e){throw console.error("Error deleting cost calculation:",e),e}}},zo=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!0),[s,i]=V.useState(null);V.useEffect(()=>{(async()=>{try{r(!0),i(null),console.log("useQuotes - Starting to load quotes from Firebase...");const g=await va.getAll();console.log("useQuotes - Loaded quotes:",g.length),e(g)}catch(g){console.error("useQuotes - Error loading quotes:",g),i("Erreur lors du chargement des devis"),e([])}finally{r(!1)}})()},[]);const a=async m=>{try{console.log("useQuotes - Adding new quote...");const g=await va.add(m);return e(v=>[g,...v]),g}catch(g){throw console.error("useQuotes - Error adding quote:",g),i("Erreur lors de la création du devis"),g}},c=async(m,g)=>{try{console.log("useQuotes - Updating quote:",m),await va.update(m,g),e(v=>v.map(b=>b.id===m?{...b,...g,updatedAt:new Date}:b))}catch(v){throw console.error("useQuotes - Error updating quote:",v),i("Erreur lors de la mise à jour du devis"),v}},u=async m=>{try{console.log("useQuotes - Deleting quote:",m),await va.delete(m),e(g=>g.filter(v=>v.id!==m))}catch(g){throw console.error("useQuotes - Error deleting quote:",g),i("Erreur lors de la suppression du devis"),g}},d=async()=>{try{r(!1),i(null);const m=await va.getAll();e(m)}catch(m){console.error("useQuotes - Error refreshing quotes:",m),i("Erreur lors du rafraîchissement des devis")}finally{r(!1)}},f=m=>t.find(g=>g.id===m);return console.log("useQuotes - Current state:",{quotesCount:t.length,loading:n}),{quotes:t,loading:n,error:s,addQuote:a,updateQuote:c,deleteQuote:u,getQuoteById:f,refreshQuotes:d}},wp=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!0),[s,i]=V.useState(null);V.useEffect(()=>{(async()=>{try{r(!0),i(null),console.log("useClients - Starting to load clients from Firebase...");const m=await xa.getAll();console.log("useClients - Loaded clients:",m.length),e(m)}catch(m){console.error("useClients - Error loading clients:",m),i("Erreur lors du chargement des clients"),e([])}finally{r(!1)}})()},[]);const a=async f=>{try{console.log("useClients - Adding new client...");const m=await xa.add(f);return e(g=>[m,...g]),m}catch(m){throw console.error("useClients - Error adding client:",m),i("Erreur lors de la création du client"),m}},c=async(f,m)=>{try{console.log("useClients - Updating client:",f),await xa.update(f,m),e(g=>g.map(v=>v.id===f?{...v,...m}:v))}catch(g){throw console.error("useClients - Error updating client:",g),i("Erreur lors de la mise à jour du client"),g}},u=async f=>{try{console.log("useClients - Deleting client:",f),await xa.delete(f),e(m=>m.filter(g=>g.id!==f))}catch(m){throw console.error("useClients - Error deleting client:",m),i("Erreur lors de la suppression du client"),m}},d=async()=>{try{r(!1),i(null);const f=await xa.getAll();e(f)}catch(f){console.error("useClients - Error refreshing clients:",f),i("Erreur lors du rafraîchissement des clients")}finally{r(!1)}};return console.log("useClients - Current state:",{clientsCount:t.length,loading:n}),{clients:t,loading:n,error:s,addClient:a,updateClient:c,deleteClient:u,refreshClients:d}};function Gc(t){"@babel/helpers - typeof";return Gc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gc(t)}function Kn(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function ze(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function ft(t){ze(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||Gc(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function RR(t,e){ze(2,arguments);var n=ft(t),r=Kn(e);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),i=new Date(n.getTime());i.setMonth(n.getMonth()+r+1,0);var a=i.getDate();return s>=a?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function DR(t,e){ze(2,arguments);var n=ft(t).getTime(),r=Kn(e);return new Date(n+r)}var MR={};function Lu(){return MR}function OR(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function VR(t){return ze(1,arguments),t instanceof Date||Gc(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function LR(t){if(ze(1,arguments),!VR(t)&&typeof t!="number")return!1;var e=ft(t);return!isNaN(Number(e))}function FR(t){ze(1,arguments);var e=ft(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function UR(t){ze(1,arguments);var e=t||{},n=ft(e.start),r=ft(e.end),s=r.getTime(),i=[];if(!(n.getTime()<=s))throw new RangeError("Invalid interval");var a=n;for(a.setHours(0,0,0,0),a.setDate(1);a.getTime()<=s;)i.push(ft(a)),a.setMonth(a.getMonth()+1);return i}function yv(t){ze(1,arguments);var e=ft(t);return e.setDate(1),e.setHours(0,0,0,0),e}function $R(t,e){ze(2,arguments);var n=Kn(e);return DR(t,-n)}var zR=864e5;function BR(t){ze(1,arguments);var e=ft(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/zR)+1}function Kc(t){ze(1,arguments);var e=1,n=ft(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function RE(t){ze(1,arguments);var e=ft(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=Kc(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var a=Kc(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=a.getTime()?n:n-1}function qR(t){ze(1,arguments);var e=RE(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=Kc(n);return r}var WR=6048e5;function HR(t){ze(1,arguments);var e=ft(t),n=Kc(e).getTime()-qR(e).getTime();return Math.round(n/WR)+1}function Yc(t,e){var n,r,s,i,a,c,u,d;ze(1,arguments);var f=Lu(),m=Kn((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&s!==void 0?s:f.weekStartsOn)!==null&&r!==void 0?r:(u=f.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=ft(t),v=g.getUTCDay(),b=(v<m?7:0)+v-m;return g.setUTCDate(g.getUTCDate()-b),g.setUTCHours(0,0,0,0),g}function DE(t,e){var n,r,s,i,a,c,u,d;ze(1,arguments);var f=ft(t),m=f.getUTCFullYear(),g=Lu(),v=Kn((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:g.firstWeekContainsDate)!==null&&r!==void 0?r:(u=g.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(v>=1&&v<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(m+1,0,v),b.setUTCHours(0,0,0,0);var P=Yc(b,e),k=new Date(0);k.setUTCFullYear(m,0,v),k.setUTCHours(0,0,0,0);var S=Yc(k,e);return f.getTime()>=P.getTime()?m+1:f.getTime()>=S.getTime()?m:m-1}function QR(t,e){var n,r,s,i,a,c,u,d;ze(1,arguments);var f=Lu(),m=Kn((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(a=e.locale)===null||a===void 0||(c=a.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&r!==void 0?r:(u=f.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&n!==void 0?n:1),g=DE(t,e),v=new Date(0);v.setUTCFullYear(g,0,m),v.setUTCHours(0,0,0,0);var b=Yc(v,e);return b}var GR=6048e5;function KR(t,e){ze(1,arguments);var n=ft(t),r=Yc(n,e).getTime()-QR(n,e).getTime();return Math.round(r/GR)+1}function fe(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var YR={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return fe(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):fe(r+1,2)},d:function(e,n){return fe(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return fe(e.getUTCHours()%12||12,n.length)},H:function(e,n){return fe(e.getUTCHours(),n.length)},m:function(e,n){return fe(e.getUTCMinutes(),n.length)},s:function(e,n){return fe(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return fe(i,n.length)}};const sr=YR;var Us={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},XR={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return sr.y(e,n)},Y:function(e,n,r,s){var i=DE(e,s),a=i>0?i:1-i;if(n==="YY"){var c=a%100;return fe(c,2)}return n==="Yo"?r.ordinalNumber(a,{unit:"year"}):fe(a,n.length)},R:function(e,n){var r=RE(e);return fe(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return fe(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return fe(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return fe(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return sr.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return fe(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=KR(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):fe(i,n.length)},I:function(e,n,r){var s=HR(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):fe(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):sr.d(e,n)},D:function(e,n,r){var s=BR(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):fe(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return fe(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),a=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return fe(a,n.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return fe(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=Us.noon:s===0?i=Us.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=Us.evening:s>=12?i=Us.afternoon:s>=4?i=Us.morning:i=Us.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return sr.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):sr.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):fe(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):fe(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):sr.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):sr.s(e,n)},S:function(e,n){return sr.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();if(a===0)return"Z";switch(n){case"X":return xv(a);case"XXXX":case"XX":return ss(a);case"XXXXX":case"XXX":default:return ss(a,":")}},x:function(e,n,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(n){case"x":return xv(a);case"xxxx":case"xx":return ss(a);case"xxxxx":case"xxx":default:return ss(a,":")}},O:function(e,n,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+vv(a,":");case"OOOO":default:return"GMT"+ss(a,":")}},z:function(e,n,r,s){var i=s._originalDate||e,a=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+vv(a,":");case"zzzz":default:return"GMT"+ss(a,":")}},t:function(e,n,r,s){var i=s._originalDate||e,a=Math.floor(i.getTime()/1e3);return fe(a,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,a=i.getTime();return fe(a,n.length)}};function vv(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var a=e||"";return n+String(s)+a+fe(i,2)}function xv(t,e){if(t%60===0){var n=t>0?"-":"+";return n+fe(Math.abs(t)/60,2)}return ss(t,e)}function ss(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=fe(Math.floor(s/60),2),a=fe(s%60,2);return r+i+n+a}const JR=XR;var _v=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},ME=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},ZR=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return _v(e,n);var a;switch(s){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",_v(s,n)).replace("{{time}}",ME(i,n))},eD={p:ME,P:ZR};const tD=eD;var nD=["D","DD"],rD=["YY","YYYY"];function sD(t){return nD.indexOf(t)!==-1}function iD(t){return rD.indexOf(t)!==-1}function wv(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var aD={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oD=function(e,n,r){var s,i=aD[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};const lD=oD;function gi(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var cD={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},uD={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dD={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},hD={date:gi({formats:cD,defaultWidth:"full"}),time:gi({formats:uD,defaultWidth:"full"}),dateTime:gi({formats:dD,defaultWidth:"full"})};const fD=hD;var mD={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pD=function(e,n,r,s){return mD[e]};const gD=pD;function fn(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):i;s=t.formattingValues[a]||t.formattingValues[i]}else{var c=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[u]||t.values[c]}var d=t.argumentCallback?t.argumentCallback(e):e;return s[d]}}var yD={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},vD={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xD={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_D={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},wD={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ED={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},TD=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ND={ordinalNumber:TD,era:fn({values:yD,defaultWidth:"wide"}),quarter:fn({values:vD,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:fn({values:xD,defaultWidth:"wide"}),day:fn({values:_D,defaultWidth:"wide"}),dayPeriod:fn({values:wD,defaultWidth:"wide",formattingValues:ED,defaultFormattingWidth:"wide"})};const CD=ND;function mn(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var a=i[0],c=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(c)?ID(c,function(m){return m.test(a)}):SD(c,function(m){return m.test(a)}),d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;var f=e.slice(a.length);return{value:d,rest:f}}}function SD(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function ID(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function OE(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var a=t.valueCallback?t.valueCallback(i[0]):i[0];a=n.valueCallback?n.valueCallback(a):a;var c=e.slice(s.length);return{value:a,rest:c}}}var bD=/^(\d+)(th|st|nd|rd)?/i,AD=/\d+/i,PD={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kD={any:[/^b/i,/^(a|c)/i]},jD={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},RD={any:[/1/i,/2/i,/3/i,/4/i]},DD={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},MD={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},OD={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},VD={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},LD={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},FD={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},UD={ordinalNumber:OE({matchPattern:bD,parsePattern:AD,valueCallback:function(e){return parseInt(e,10)}}),era:mn({matchPatterns:PD,defaultMatchWidth:"wide",parsePatterns:kD,defaultParseWidth:"any"}),quarter:mn({matchPatterns:jD,defaultMatchWidth:"wide",parsePatterns:RD,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:mn({matchPatterns:DD,defaultMatchWidth:"wide",parsePatterns:MD,defaultParseWidth:"any"}),day:mn({matchPatterns:OD,defaultMatchWidth:"wide",parsePatterns:VD,defaultParseWidth:"any"}),dayPeriod:mn({matchPatterns:LD,defaultMatchWidth:"any",parsePatterns:FD,defaultParseWidth:"any"})};const $D=UD;var zD={code:"en-US",formatDistance:lD,formatLong:fD,formatRelative:gD,localize:CD,match:$D,options:{weekStartsOn:0,firstWeekContainsDate:1}};const BD=zD;var qD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,WD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,HD=/^'([^]*?)'?$/,QD=/''/g,GD=/[a-zA-Z]/;function kr(t,e,n){var r,s,i,a,c,u,d,f,m,g,v,b,P,k,S,x,w,j;ze(2,arguments);var O=String(e),U=Lu(),A=(r=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:U.locale)!==null&&r!==void 0?r:BD,y=Kn((i=(a=(c=(u=n==null?void 0:n.firstWeekContainsDate)!==null&&u!==void 0?u:n==null||(d=n.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&c!==void 0?c:U.firstWeekContainsDate)!==null&&a!==void 0?a:(m=U.locale)===null||m===void 0||(g=m.options)===null||g===void 0?void 0:g.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(y>=1&&y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var N=Kn((v=(b=(P=(k=n==null?void 0:n.weekStartsOn)!==null&&k!==void 0?k:n==null||(S=n.locale)===null||S===void 0||(x=S.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&P!==void 0?P:U.weekStartsOn)!==null&&b!==void 0?b:(w=U.locale)===null||w===void 0||(j=w.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&v!==void 0?v:0);if(!(N>=0&&N<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!A.localize)throw new RangeError("locale must contain localize property");if(!A.formatLong)throw new RangeError("locale must contain formatLong property");var C=ft(t);if(!LR(C))throw new RangeError("Invalid time value");var I=OR(C),_=$R(C,I),T={firstWeekContainsDate:y,weekStartsOn:N,locale:A,_originalDate:C},D=O.match(WD).map(function(G){var se=G[0];if(se==="p"||se==="P"){var Te=tD[se];return Te(G,A.formatLong)}return G}).join("").match(qD).map(function(G){if(G==="''")return"'";var se=G[0];if(se==="'")return KD(G);var Te=JR[se];if(Te)return!(n!=null&&n.useAdditionalWeekYearTokens)&&iD(G)&&wv(G,e,String(t)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&sD(G)&&wv(G,e,String(t)),Te(_,G,A.localize,T);if(se.match(GD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+se+"`");return G}).join("");return D}function KD(t){var e=t.match(HD);return e?e[1].replace(QD,"'"):t}function YD(t,e){ze(2,arguments);var n=Kn(e);return RR(t,-n)}var XD={lessThanXSeconds:{one:"moins d’une seconde",other:"moins de {{count}} secondes"},xSeconds:{one:"1 seconde",other:"{{count}} secondes"},halfAMinute:"30 secondes",lessThanXMinutes:{one:"moins d’une minute",other:"moins de {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"environ 1 heure",other:"environ {{count}} heures"},xHours:{one:"1 heure",other:"{{count}} heures"},xDays:{one:"1 jour",other:"{{count}} jours"},aboutXWeeks:{one:"environ 1 semaine",other:"environ {{count}} semaines"},xWeeks:{one:"1 semaine",other:"{{count}} semaines"},aboutXMonths:{one:"environ 1 mois",other:"environ {{count}} mois"},xMonths:{one:"1 mois",other:"{{count}} mois"},aboutXYears:{one:"environ 1 an",other:"environ {{count}} ans"},xYears:{one:"1 an",other:"{{count}} ans"},overXYears:{one:"plus d’un an",other:"plus de {{count}} ans"},almostXYears:{one:"presqu’un an",other:"presque {{count}} ans"}},JD=function(e,n,r){var s,i=XD[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",String(n)),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"dans "+s:"il y a "+s:s};const ZD=JD;var e4={full:"EEEE d MMMM y",long:"d MMMM y",medium:"d MMM y",short:"dd/MM/y"},t4={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},n4={full:"{{date}} 'à' {{time}}",long:"{{date}} 'à' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r4={date:gi({formats:e4,defaultWidth:"full"}),time:gi({formats:t4,defaultWidth:"full"}),dateTime:gi({formats:n4,defaultWidth:"full"})};const s4=r4;var i4={lastWeek:"eeee 'dernier à' p",yesterday:"'hier à' p",today:"'aujourd’hui à' p",tomorrow:"'demain à' p'",nextWeek:"eeee 'prochain à' p",other:"P"},a4=function(e,n,r,s){return i4[e]};const o4=a4;var l4={narrow:["av. J.-C","ap. J.-C"],abbreviated:["av. J.-C","ap. J.-C"],wide:["avant Jésus-Christ","après Jésus-Christ"]},c4={narrow:["T1","T2","T3","T4"],abbreviated:["1er trim.","2ème trim.","3ème trim.","4ème trim."],wide:["1er trimestre","2ème trimestre","3ème trimestre","4ème trimestre"]},u4={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."],wide:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"]},d4={narrow:["D","L","M","M","J","V","S"],short:["di","lu","ma","me","je","ve","sa"],abbreviated:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],wide:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"]},h4={narrow:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"mat.",afternoon:"ap.m.",evening:"soir",night:"mat."},abbreviated:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"matin",afternoon:"après-midi",evening:"soir",night:"matin"},wide:{am:"AM",pm:"PM",midnight:"minuit",noon:"midi",morning:"du matin",afternoon:"de l’après-midi",evening:"du soir",night:"du matin"}},f4=function(e,n){var r=Number(e),s=n==null?void 0:n.unit;if(r===0)return"0";var i=["year","week","hour","minute","second"],a;return r===1?a=s&&i.includes(s)?"ère":"er":a="ème",r+a},m4={ordinalNumber:f4,era:fn({values:l4,defaultWidth:"wide"}),quarter:fn({values:c4,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:fn({values:u4,defaultWidth:"wide"}),day:fn({values:d4,defaultWidth:"wide"}),dayPeriod:fn({values:h4,defaultWidth:"wide"})};const p4=m4;var g4=/^(\d+)(ième|ère|ème|er|e)?/i,y4=/\d+/i,v4={narrow:/^(av\.J\.C|ap\.J\.C|ap\.J\.-C)/i,abbreviated:/^(av\.J\.-C|av\.J-C|apr\.J\.-C|apr\.J-C|ap\.J-C)/i,wide:/^(avant Jésus-Christ|après Jésus-Christ)/i},x4={any:[/^av/i,/^ap/i]},_4={narrow:/^T?[1234]/i,abbreviated:/^[1234](er|ème|e)? trim\.?/i,wide:/^[1234](er|ème|e)? trimestre/i},w4={any:[/1/i,/2/i,/3/i,/4/i]},E4={narrow:/^[jfmasond]/i,abbreviated:/^(janv|févr|mars|avr|mai|juin|juill|juil|août|sept|oct|nov|déc)\.?/i,wide:/^(janvier|février|mars|avril|mai|juin|juillet|août|septembre|octobre|novembre|décembre)/i},T4={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^av/i,/^ma/i,/^juin/i,/^juil/i,/^ao/i,/^s/i,/^o/i,/^n/i,/^d/i]},N4={narrow:/^[lmjvsd]/i,short:/^(di|lu|ma|me|je|ve|sa)/i,abbreviated:/^(dim|lun|mar|mer|jeu|ven|sam)\.?/i,wide:/^(dimanche|lundi|mardi|mercredi|jeudi|vendredi|samedi)/i},C4={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^di/i,/^lu/i,/^ma/i,/^me/i,/^je/i,/^ve/i,/^sa/i]},S4={narrow:/^(a|p|minuit|midi|mat\.?|ap\.?m\.?|soir|nuit)/i,any:/^([ap]\.?\s?m\.?|du matin|de l'après[-\s]midi|du soir|de la nuit)/i},I4={any:{am:/^a/i,pm:/^p/i,midnight:/^min/i,noon:/^mid/i,morning:/mat/i,afternoon:/ap/i,evening:/soir/i,night:/nuit/i}},b4={ordinalNumber:OE({matchPattern:g4,parsePattern:y4,valueCallback:function(e){return parseInt(e)}}),era:mn({matchPatterns:v4,defaultMatchWidth:"wide",parsePatterns:x4,defaultParseWidth:"any"}),quarter:mn({matchPatterns:_4,defaultMatchWidth:"wide",parsePatterns:w4,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:mn({matchPatterns:E4,defaultMatchWidth:"wide",parsePatterns:T4,defaultParseWidth:"any"}),day:mn({matchPatterns:N4,defaultMatchWidth:"wide",parsePatterns:C4,defaultParseWidth:"any"}),dayPeriod:mn({matchPatterns:S4,defaultMatchWidth:"any",parsePatterns:I4,defaultParseWidth:"any"})};const A4=b4;var P4={code:"fr",formatDistance:ZD,formatLong:s4,formatRelative:o4,localize:p4,match:A4,options:{weekStartsOn:1,firstWeekContainsDate:4}};const jr=P4,VE=({status:t})=>{const n=(r=>{switch(r){case"draft":return{label:"Brouillon",className:"bg-neutral-100 text-neutral-700 border-neutral-200"};case"pending":return{label:"En Attente",className:"bg-amber-100 text-amber-700 border-amber-200"};case"confirmed":return{label:"Confirmé",className:"bg-emerald-100 text-emerald-700 border-emerald-200"};case"delivered":return{label:"Livré",className:"bg-blue-100 text-blue-700 border-blue-200"};case"cancelled":return{label:"Annulé",className:"bg-error-100 text-error-700 border-error-200"};default:return{label:r,className:"bg-neutral-100 text-neutral-700 border-neutral-200"}}})(t);return o.jsx("span",{className:`badge ${n.className} shadow-soft`,children:n.label})},Gi=({size:t="md",className:e=""})=>{const n={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"};return o.jsx("div",{className:`animate-spin rounded-full border-2 border-gray-300 border-t-primary-600 ${n[t]} ${e}`})},Cf=({status:t})=>{const n=(r=>{switch(r){case"unpaid":return{label:"Non payé",className:"bg-error-100 text-error-700 border-error-200"};case"partial":return{label:"Acompte versé",className:"bg-warning-100 text-warning-700 border-warning-200"};case"paid":return{label:"Soldé",className:"bg-success-100 text-success-700 border-success-200"};default:return{label:r,className:"bg-neutral-100 text-neutral-700 border-neutral-200"}}})(t);return o.jsx("span",{className:`badge ${n.className} shadow-soft`,children:n.label})},Cs=({message:t,onRetry:e,className:n=""})=>o.jsx("div",{className:`bg-red-50 border border-red-200 rounded-lg p-4 ${n}`,children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:o.jsx(fR,{className:"w-5 h-5 text-red-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-red-900",children:"Erreur"}),o.jsx("p",{className:"text-sm text-red-700 mt-1",children:t})]}),e&&o.jsxs("button",{onClick:e,className:"flex items-center space-x-2 px-3 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg transition-colors duration-200",children:[o.jsx(SR,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Réessayer"})]})]})}),$=t=>{if(t==null||t==="")return"0";let e=String(t).replace(/^0+/,"")||"0";const n=parseFloat(e);return isNaN(n)?"0":n.toLocaleString("fr-FR").replace(/,/g," ")},Oe=t=>{if(!t||t.trim()==="")return 0;const e=t.replace(/\s/g,""),n=parseFloat(e);return isNaN(n)?0:n},Jt=t=>`${$(t)} Ar`,k4=()=>{const{quotes:t,loading:e,error:n,refreshQuotes:r}=zo(),{clients:s,loading:i,error:a,refreshClients:c}=wp();if((e||i)&&t.length===0&&s.length===0)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(Gi,{size:"lg"})});if(n||a)return o.jsxs("div",{className:"space-y-4",children:[n&&o.jsx(Cs,{message:n,onRetry:r}),a&&o.jsx(Cs,{message:a,onRetry:c})]});const u={totalQuotes:t.length,pendingQuotes:t.filter(m=>m.status==="pending").length,confirmedQuotes:t.filter(m=>m.status==="confirmed").length,deliveredQuotes:t.filter(m=>m.status==="delivered").length,totalValue:t.reduce((m,g)=>m+g.totalAmount,0),totalClients:s.length,unpaidQuotes:t.filter(m=>m.paymentStatus==="unpaid").length,partialPayments:t.filter(m=>m.paymentStatus==="partial").length,totalDownPayments:t.reduce((m,g)=>{var v;return m+(((v=g.downPayment)==null?void 0:v.amount)||0)},0),totalRemaining:t.reduce((m,g)=>m+g.remainingAmount,0)},d=t.slice(0,5),f=({icon:m,title:g,value:v,subtitle:b,trend:P,color:k,bgColor:S})=>o.jsx("div",{className:"stat-card",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:`stat-icon ${S}`,children:o.jsx(m,{className:`w-6 h-6 ${k}`})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-neutral-500",children:g}),o.jsx("p",{className:"text-2xl font-bold text-neutral-900 mt-1",children:v}),b&&o.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:b})]})]})}),P&&o.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${P>0?"bg-success-50 text-success-700":"bg-error-50 text-error-700"}`,children:[P>0?o.jsx(mv,{className:"w-3 h-3"}):o.jsx(mR,{className:"w-3 h-3"}),o.jsxs("span",{children:[Math.abs(P),"%"]})]})]})});return o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gradient",children:"Dashboard"}),o.jsxs("p",{className:"text-neutral-500 mt-1",children:["Vue d'ensemble de votre activité • ",kr(new Date,"dd MMMM yyyy",{locale:jr})]})]}),o.jsxs(Ni,{to:"/quotes/new",className:"btn-primary flex items-center space-x-2",children:[o.jsx($r,{className:"w-4 h-4"}),o.jsx("span",{children:"Nouveau Devis"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(f,{icon:pn,title:"Total Devis",value:$(u.totalQuotes),subtitle:"Tous statuts confondus",trend:12,color:"text-blue-600",bgColor:"bg-blue-50"}),o.jsx(f,{icon:yR,title:"En Attente",value:$(u.pendingQuotes),subtitle:"Nécessitent une action",color:"text-amber-600",bgColor:"bg-amber-50"}),o.jsx(f,{icon:gR,title:"Confirmés",value:$(u.confirmedQuotes),subtitle:"Prêts pour livraison",trend:8,color:"text-emerald-600",bgColor:"bg-emerald-50"}),o.jsx(f,{icon:kE,title:"Livrés",value:$(u.deliveredQuotes),subtitle:"Missions accomplies",trend:15,color:"text-violet-600",bgColor:"bg-violet-50"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsx("div",{className:"card-elevated p-6 bg-gradient-to-br from-success-50 to-emerald-50 border-success-200",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"stat-icon bg-success-100",children:o.jsx(fs,{className:"w-7 h-7 text-success-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-success-700",children:"Chiffre d'Affaires"}),o.jsxs("p",{className:"text-3xl font-bold text-success-900 mt-1",children:[$(Math.round(u.totalValue/1e6))," M Ar"]}),o.jsxs("p",{className:"text-xs text-success-600 mt-1",children:["Moyenne: ",$(u.totalQuotes>0?Math.round(u.totalValue/u.totalQuotes/1e6):0)," M Ar"]})]})]})}),o.jsx("div",{className:"card-elevated p-6 bg-gradient-to-br from-blue-50 to-cyan-50 border-blue-200",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"stat-icon bg-blue-100",children:o.jsx(jE,{className:"w-7 h-7 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-blue-700",children:"Clients Actifs"}),o.jsx("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:$(u.totalClients)}),o.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[$(Math.round(u.totalValue/u.totalClients/1e6))," M Ar par client"]})]})]})}),o.jsx("div",{className:"card-elevated p-6 bg-gradient-to-br from-amber-50 to-orange-50 border-amber-200",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"stat-icon bg-amber-100",children:o.jsx(vp,{className:"w-7 h-7 text-amber-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-amber-700",children:"Soldes Restants"}),o.jsxs("p",{className:"text-3xl font-bold text-amber-900 mt-1",children:[$(Math.round(u.totalRemaining/1e6))," M Ar"]}),o.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:[$(u.partialPayments)," paiements partiels"]})]})]})})]}),o.jsxs("div",{className:"card-elevated",children:[o.jsx("div",{className:"px-6 py-4 border-b border-neutral-200/50 bg-gradient-to-r from-neutral-50 to-neutral-100/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Devis Récents"}),o.jsxs(Ni,{to:"/quotes",className:"text-primary-600 hover:text-primary-700 text-sm font-medium flex items-center space-x-1 transition-colors duration-200",children:[o.jsx("span",{children:"Voir tout"}),o.jsx(mv,{className:"w-4 h-4"})]})]})}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{className:"bg-neutral-50/50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"table-header",children:"Numéro"}),o.jsx("th",{className:"table-header",children:"Client"}),o.jsx("th",{className:"table-header",children:"Statut"}),o.jsx("th",{className:"table-header",children:"Paiement"}),o.jsx("th",{className:"table-header",children:"Montant"}),o.jsx("th",{className:"table-header",children:"Date"}),o.jsx("th",{className:"table-header text-right",children:"Actions"})]})}),o.jsx("tbody",{className:"divide-y divide-neutral-200/50",children:d.map((m,g)=>o.jsxs("tr",{className:"hover:bg-neutral-50/50 transition-colors duration-200 group",style:{animationDelay:`${g*100}ms`},children:[o.jsx("td",{className:"table-cell",children:o.jsx("span",{className:"font-semibold text-primary-600",children:m.quoteNumber})}),o.jsx("td",{className:"table-cell",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium text-neutral-900",children:m.clientName}),o.jsx("div",{className:"text-xs text-neutral-500",children:m.clientEmail})]})}),o.jsx("td",{className:"table-cell",children:o.jsx(VE,{status:m.status})}),o.jsx("td",{className:"table-cell",children:o.jsx(Cf,{status:m.paymentStatus})}),o.jsxs("td",{className:"table-cell",children:[o.jsx("div",{className:"font-semibold text-neutral-900",children:m.totalAmount>=1e6?`${$(Math.round(m.totalAmount/1e6))} M Ar`:Jt(m.totalAmount)}),m.remainingAmount>0&&o.jsxs("div",{className:"text-xs text-amber-600",children:["Reste: ",m.remainingAmount>=1e6?`${$(Math.round(m.remainingAmount/1e6))} M Ar`:Jt(m.remainingAmount)]})]}),o.jsx("td",{className:"table-cell text-neutral-500",children:kr(m.createdAt,"dd/MM/yyyy",{locale:jr})}),o.jsx("td",{className:"table-cell text-right",children:o.jsx("button",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 p-2 text-neutral-400 hover:text-primary-600 hover:bg-primary-50 rounded-lg",children:o.jsx(ji,{className:"w-4 h-4"})})})]},m.id))})]})})]})]})},Ri=({isOpen:t,onClose:e,title:n,children:r,size:s="md"})=>{if(!t)return null;const i={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return o.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:o.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[o.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:e}),o.jsxs("div",{className:`inline-block w-full ${i[s]} p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:n}),o.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(AR,{className:"w-5 h-5"})})]}),r]})]})})},LE=t=>{const e=`
DEVIS D'IMPORTATION
==================

Numéro: ${t.quoteNumber}
Client: ${t.clientName}
Date: ${new Date(t.createdAt).toLocaleDateString("fr-FR")}

ARTICLES:
${t.items.map((i,a)=>`
${a+1}. ${i.description}
   Quantité: ${i.quantity}
   Prix unitaire: ${i.sellingPrice.toLocaleString("fr-FR")} Ar
   Sous-total: ${(i.quantity*i.sellingPrice).toLocaleString("fr-FR")} Ar
`).join("")}

TOTAL: ${t.totalAmount.toLocaleString("fr-FR")} Ar

${t.downPayment?`
ACOMPTE: ${t.downPayment.amount.toLocaleString("fr-FR")} Ar (${t.downPayment.percentage}%)
SOLDE RESTANT: ${t.remainingAmount.toLocaleString("fr-FR")} Ar
`:""}

Valide jusqu'au: ${new Date(t.validUntil).toLocaleDateString("fr-FR")}
Livraison estimée: ${new Date(t.estimatedDelivery).toLocaleDateString("fr-FR")}
  `,n=new Blob([e],{type:"text/plain;charset=utf-8"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=`devis-${t.quoteNumber}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)},j4=t=>{const e=window.open("","_blank");if(!e)return;const n=`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Devis ${t.quoteNumber}</title>
      <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .header { text-align: center; margin-bottom: 30px; }
        .info { margin-bottom: 20px; }
        .table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .table th, .table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .table th { background-color: #f5f5f5; }
        .total { text-align: right; font-weight: bold; font-size: 18px; margin-top: 20px; }
        @media print { body { margin: 0; } }
      </style>
    </head>
    <body>
      <div class="header">
        <h1>DEVIS D'IMPORTATION</h1>
        <h2>${t.quoteNumber}</h2>
      </div>
      
      <div class="info">
        <p><strong>Client:</strong> ${t.clientName}</p>
        <p><strong>Email:</strong> ${t.clientEmail}</p>
        <p><strong>Téléphone:</strong> ${t.clientPhone}</p>
        <p><strong>Date:</strong> ${new Date(t.createdAt).toLocaleDateString("fr-FR")}</p>
        <p><strong>Valide jusqu'au:</strong> ${new Date(t.validUntil).toLocaleDateString("fr-FR")}</p>
      </div>

      <table class="table">
        <thead>
          <tr>
            <th>Description</th>
            <th>Quantité</th>
            <th>Prix unitaire</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          ${t.items.map(r=>`
            <tr>
              <td>${r.description}</td>
              <td>${r.quantity}</td>
              <td>${r.sellingPrice.toLocaleString("fr-FR")} Ar</td>
              <td>${(r.quantity*r.sellingPrice).toLocaleString("fr-FR")} Ar</td>
            </tr>
          `).join("")}
        </tbody>
      </table>

      <div class="total">
        <p>TOTAL: ${t.totalAmount.toLocaleString("fr-FR")} Ar</p>
        ${t.downPayment?`
          <p>Acompte: ${t.downPayment.amount.toLocaleString("fr-FR")} Ar (${t.downPayment.percentage}%)</p>
          <p>Solde restant: ${t.remainingAmount.toLocaleString("fr-FR")} Ar</p>
        `:""}
      </div>
    </body>
    </html>
  `;e.document.write(n),e.document.close(),e.print()},R4=()=>{const t=Xn(),{quotes:e,loading:n,error:r,deleteQuote:s,refreshQuotes:i}=zo(),[a,c]=V.useState(""),[u,d]=V.useState("all"),[f,m]=V.useState(null),[g,v]=V.useState(!1),[b,P]=V.useState(null);if(n&&e.length===0)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(Gi,{size:"lg"})});if(r)return o.jsx(Cs,{message:r,onRetry:i});const k=e.filter(w=>{const j=w.quoteNumber.toLowerCase().includes(a.toLowerCase())||w.clientName.toLowerCase().includes(a.toLowerCase()),O=u==="all"||w.status===u;return j&&O}),S=()=>{b&&(s(b),P(null),v(!1))},x=w=>{LE(w)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Liste des Devis"}),o.jsxs(Ni,{to:"/quotes/new",className:"btn-primary flex items-center space-x-2",children:[o.jsx($r,{className:"w-4 h-4"}),o.jsx("span",{children:"Nouveau Devis"})]})]}),o.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Rechercher par numéro ou client...",value:a,onChange:w=>c(w.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-full"})]})}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(_R,{className:"w-4 h-4 text-gray-400"}),o.jsxs("select",{value:u,onChange:w=>d(w.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[o.jsx("option",{value:"all",children:"Tous les statuts"}),o.jsx("option",{value:"draft",children:"Brouillon"}),o.jsx("option",{value:"pending",children:"En Attente"}),o.jsx("option",{value:"confirmed",children:"Confirmé"}),o.jsx("option",{value:"delivered",children:"Livré"}),o.jsx("option",{value:"cancelled",children:"Annulé"})]})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Numéro"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Paiement"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Montant"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Solde Restant"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Création"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Livraison Estimée"}),o.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(w=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:w.quoteNumber}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.clientName}),o.jsx("div",{className:"text-sm text-gray-500",children:w.clientEmail})]})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(VE,{status:w.status})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.jsx(Cf,{status:w.paymentStatus})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Jt(w.totalAmount)}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:o.jsx("span",{className:w.remainingAmount>0?"text-orange-600 font-medium":"text-green-600",children:Jt(w.remainingAmount)})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:kr(w.createdAt,"dd/MM/yyyy",{locale:jr})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:kr(w.estimatedDelivery,"dd/MM/yyyy",{locale:jr})}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:o.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[o.jsx("button",{onClick:()=>m(w),className:"text-indigo-600 hover:text-indigo-900 p-1",title:"Voir les détails",children:o.jsx(ji,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>x(w),className:"text-green-600 hover:text-green-900 p-1",title:"Exporter PDF",children:o.jsx(Tf,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>t(`/quotes/edit/${w.id}`),className:"text-blue-600 hover:text-blue-900 p-1",title:"Modifier",children:o.jsx(Mu,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>{P(w.id),v(!0)},className:"text-red-600 hover:text-red-900 p-1",title:"Supprimer",children:o.jsx($o,{className:"w-4 h-4"})})]})})]},w.id))})]})}),k.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500",children:"Aucun devis trouvé"})})]}),o.jsx(Ri,{isOpen:!!f,onClose:()=>m(null),title:`Détails du devis ${f==null?void 0:f.quoteNumber}`,size:"xl",children:f&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Informations Client"}),o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Nom:"})," ",f.clientName]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Email:"})," ",f.clientEmail]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Téléphone:"})," ",f.clientPhone]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Adresse:"})," ",f.clientAddress]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Informations Livraison"}),o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Origine:"})," ",f.originCountry]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Destination:"})," ",f.destinationPort]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Mode:"})," ",f.shippingMethod]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Livraison estimée:"})," ",kr(f.estimatedDelivery,"dd/MM/yyyy",{locale:jr})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Informations Paiement"}),o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Statut:"})," ",o.jsx(Cf,{status:f.paymentStatus})]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Total:"})," ",f.totalAmount.toLocaleString("fr-FR")," Ar"]}),f.downPayment&&o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Acompte:"})," ",f.downPayment.amount.toLocaleString("fr-FR")," Ar (",f.downPayment.percentage,"%)"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Solde restant:"}),o.jsxs("span",{className:f.remainingAmount>0?"text-orange-600 font-medium ml-1":"text-green-600 ml-1",children:[f.remainingAmount.toLocaleString("fr-FR")," Ar"]})]})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Articles"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Quantité"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Prix Unitaire"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:f.items.map(w=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:w.description}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:$(w.quantity)}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Jt(w.unitPrice)}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:Jt(w.quantity*w.unitPrice)})]},w.id))})]})}),o.jsx("div",{className:"mt-4 text-right",children:o.jsxs("p",{className:"text-lg font-semibold",children:["Total: ",Jt(f.totalAmount)]})})]}),f.notes&&o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Notes"}),o.jsx("p",{className:"text-sm text-gray-600",children:f.notes})]})]})}),o.jsx(Ri,{isOpen:g,onClose:()=>v(!1),title:"Confirmer la suppression",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Êtes-vous sûr de vouloir supprimer ce devis ? Cette action est irréversible."}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>v(!1),className:"btn-secondary",children:"Annuler"}),o.jsx("button",{onClick:S,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200",children:"Supprimer"})]})]})})]})},Gd="cost_calculation_data",FE=()=>{const[t,e]=V.useState(null);V.useEffect(()=>{const c=localStorage.getItem(Gd);if(c)try{const u=JSON.parse(c);u.calculatedAt=new Date(u.calculatedAt),e(u)}catch(u){console.error("Erreur lors du chargement des données de calcul:",u)}},[]);const n=c=>{const u={...c,calculatedAt:new Date};e(u),localStorage.setItem(Gd,JSON.stringify(u));const d=new Date,f=`Calcul du ${d.toLocaleDateString("fr-FR")} à ${d.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}`;rs.add(u,f).then(()=>{console.log("Calcul sauvegardé dans l'historique Firebase")}).catch(m=>{console.error("Erreur lors de la sauvegarde dans l'historique Firebase:",m)})},r=()=>{e(null),localStorage.removeItem(Gd)},s=()=>t!==null,i=()=>t?Date.now()-t.calculatedAt.getTime():null;return{calculationData:t,saveCalculation:n,clearCalculation:r,hasCalculation:s,getCalculationAge:i,isCalculationRecent:(c=30)=>{const u=i();return u?u<c*60*1e3:!1}}},D4=()=>{const t=Xn(),[e]=Q_(),{addQuote:n}=zo(),{calculationData:r,clearCalculation:s}=FE(),[i,a]=V.useState("form"),[c,u]=V.useState({clientName:"",clientEmail:"",clientPhone:"",clientAddress:"",originCountry:"",shippingMethod:"sea",currency:"MGA",validUntil:"",estimatedDelivery:"",notes:""}),[d,f]=V.useState({percentage:0,amount:0,paymentMethod:"",notes:""}),[m,g]=V.useState([{description:"",quantity:1,unitPrice:0,purchasePrice:0,miscFees:0,customsFees:0,sellingPrice:0,weight:0,dimensions:{length:0,width:0,height:0},hsCode:"",category:"",productLink:"",margin:20}]),[v,b]=V.useState({}),P=e.get("from")==="cost-calculation";V.useEffect(()=>{if(P&&r){const _=r.items.map(D=>({description:D.description,quantity:D.quantity,unitPrice:D.sellingPrice,purchasePrice:D.purchasePrice,miscFees:D.miscFees,customsFees:D.customsFees,sellingPrice:D.sellingPrice,weight:D.weight||0,dimensions:D.dimensions||{length:0,width:0,height:0},hsCode:D.hsCode||"",category:D.category||"",productLink:D.productLink||"",margin:D.margin}));g(_);const T=[...new Set(r.items.map(D=>D.originCountry))];T.length===1&&u(D=>({...D,originCountry:T[0]}))}},[P,r]);const k=(_,T)=>{u(D=>({...D,[_]:T})),v[_]&&b(D=>({...D,[_]:""}))},S=(_,T)=>{const D=U();if(_==="percentage"){const G=typeof T=="string"?parseFloat(T)||0:T,se=Math.round(D*G/100);f(Te=>({...Te,percentage:G,amount:se}))}else if(_==="amount"){const G=typeof T=="string"?parseFloat(T)||0:T,se=D>0?Math.round(G/D*100):0;f(Te=>({...Te,amount:G,percentage:se}))}else f(G=>({...G,[_]:T}))},x=(_,T,D)=>{g(G=>G.map((se,Te)=>{if(Te===_){const B={...se,[T]:D};if(["purchasePrice","miscFees","customsFees"].includes(T)){const Y=T==="purchasePrice"?D:B.purchasePrice,ne=T==="miscFees"?D:B.miscFees,xe=T==="customsFees"?D:B.customsFees,de=Y+ne+xe,Ce=B.margin||0;B.sellingPrice=de+de*Ce/100,B.unitPrice=B.sellingPrice}if(T==="margin"){const Y=B.purchasePrice+B.miscFees+B.customsFees;B.sellingPrice=Y+Y*D/100,B.unitPrice=B.sellingPrice}return B}return se}))},w=(_,T,D)=>{g(G=>G.map((se,Te)=>Te===_?{...se,dimensions:{...se.dimensions,[T]:D}}:se))},j=()=>{g(_=>[..._,{description:"",quantity:1,unitPrice:0,purchasePrice:0,miscFees:0,customsFees:0,sellingPrice:0,weight:0,dimensions:{length:0,width:0,height:0},hsCode:"",category:"",productLink:"",margin:20}])},O=_=>{m.length>1&&g(T=>T.filter((D,G)=>G!==_))},U=()=>m.reduce((_,T)=>_+T.quantity*T.sellingPrice,0),A=()=>{const _={};return c.clientName.trim()||(_.clientName="Le nom du client est requis"),c.clientEmail.trim()||(_.clientEmail="L'email du client est requis"),c.clientPhone.trim()||(_.clientPhone="Le téléphone du client est requis"),c.clientAddress.trim()||(_.clientAddress="L'adresse du client est requise"),c.originCountry.trim()||(_.originCountry="Le pays d'origine est requis"),c.validUntil||(_.validUntil="La date de validité est requise"),c.estimatedDelivery||(_.estimatedDelivery="La date de livraison estimée est requise"),m.forEach((T,D)=>{T.description.trim()||(_[`item_${D}_description`]="La description est requise"),T.quantity<=0&&(_[`item_${D}_quantity`]="La quantité doit être positive")}),d.percentage>100&&(_.downPaymentPercentage="Le pourcentage ne peut pas dépasser 100%"),b(_),Object.keys(_).length===0},y=_=>{if(_.preventDefault(),!A())return;const T=U(),D=T-d.amount;let G="unpaid";d.amount===T?G="paid":d.amount>0&&(G="partial");const se={quoteNumber:`QT-${new Date().getFullYear()}-${String(Date.now()).slice(-3)}`,...c,validUntil:new Date(c.validUntil),estimatedDelivery:new Date(c.estimatedDelivery),status:"draft",totalAmount:T,paymentStatus:G,remainingAmount:D,destinationPort:"",items:m.map((B,Y)=>({...B,id:`item_${Y}_${Date.now()}`}))},Te=d.amount>0?{...se,downPayment:{id:`dp_${Date.now()}`,amount:d.amount,percentage:d.percentage,paymentMethod:d.paymentMethod,notes:d.notes,paidDate:null}}:se;n(Te),t("/quotes")},N=()=>{s(),g([{description:"",quantity:1,unitPrice:0,purchasePrice:0,miscFees:0,customsFees:0,sellingPrice:0,weight:0,dimensions:{length:0,width:0,height:0},hsCode:"",category:"",productLink:"",margin:20}])},I=(()=>{const _=U(),T=_-d.amount;let D="unpaid";return d.amount===_?D="paid":d.amount>0&&(D="partial"),{id:"preview",quoteNumber:`QT-${new Date().getFullYear()}-${String(Date.now()).slice(-3)}`,...c,validUntil:c.validUntil?new Date(c.validUntil):new Date,estimatedDelivery:c.estimatedDelivery?new Date(c.estimatedDelivery):new Date,status:"draft",createdAt:new Date,updatedAt:new Date,totalAmount:_,paymentStatus:D,remainingAmount:T,destinationPort:"",downPayment:d.amount>0?{id:"dp_preview",amount:d.amount,percentage:d.percentage,paymentMethod:d.paymentMethod,notes:d.notes}:void 0,items:m.map((G,se)=>({...G,id:`item_${se}_preview`}))}})();return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>t("/quotes"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(NE,{className:"w-5 h-5"})}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Nouveau Devis"})]})}),P&&r&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(pn,{className:"w-5 h-5 text-green-600"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-medium text-green-900",children:"Données importées du calcul des coûts"}),o.jsxs("p",{className:"text-sm text-green-700",children:[r.items.length," article(s) importé(s) • Calculé le ",r.calculatedAt.toLocaleString("fr-FR")," • Total : ",$(Math.round(r.totalSellingPrice))," Ar"]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx("button",{onClick:()=>t("/cost-calculation"),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"Retour au calcul"}),o.jsx("button",{onClick:N,className:"text-sm text-red-600 hover:text-red-800 font-medium",children:"Effacer les données"})]})]})}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsxs("nav",{className:"flex space-x-8 px-6",children:[o.jsx("button",{onClick:()=>a("form"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i==="form"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(pn,{className:"w-4 h-4"}),o.jsx("span",{children:"Formulaire"})]})}),o.jsx("button",{onClick:()=>a("preview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${i==="preview"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(ji,{className:"w-4 h-4"}),o.jsx("span",{children:"Aperçu Devis"})]})})]})}),o.jsx("div",{className:"p-6",children:i==="form"?o.jsxs("form",{onSubmit:y,className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Client"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom du client *"}),o.jsx("input",{type:"text",value:c.clientName,onChange:_=>k("clientName",_.target.value),className:`input-field ${v.clientName?"border-red-500":""}`,placeholder:"Nom complet du client"}),v.clientName&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.clientName})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),o.jsx("input",{type:"email",value:c.clientEmail,onChange:_=>k("clientEmail",_.target.value),className:`input-field ${v.clientEmail?"border-red-500":""}`,placeholder:"email@exemple.com"}),v.clientEmail&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.clientEmail})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone *"}),o.jsx("input",{type:"tel",value:c.clientPhone,onChange:_=>k("clientPhone",_.target.value),className:`input-field ${v.clientPhone?"border-red-500":""}`,placeholder:"+261 34 12 345 67"}),v.clientPhone&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.clientPhone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse *"}),o.jsx("textarea",{value:c.clientAddress,onChange:_=>k("clientAddress",_.target.value),rows:3,className:`input-field ${v.clientAddress?"border-red-500":""}`,placeholder:"Adresse complète du client"}),v.clientAddress&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.clientAddress})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Articles"}),o.jsxs("button",{type:"button",onClick:j,className:"btn-primary flex items-center space-x-2",children:[o.jsx($r,{className:"w-4 h-4"}),o.jsx("span",{children:"Ajouter un article"})]})]}),o.jsx("div",{className:"space-y-6",children:m.map((_,T)=>o.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h3",{className:"text-md font-medium text-gray-900",children:["Article ",T+1]}),m.length>1&&o.jsx("button",{type:"button",onClick:()=>O(T),className:"text-red-600 hover:text-red-800 p-1",children:o.jsx($o,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),o.jsx("input",{type:"text",value:_.description,onChange:D=>x(T,"description",D.target.value),className:`input-field ${v[`item_${T}_description`]?"border-red-500":""}`,placeholder:"Description de l'article"}),v[`item_${T}_description`]&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v[`item_${T}_description`]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantité *"}),o.jsx("input",{type:"text",value:$(_.quantity),onChange:D=>x(T,"quantity",Oe(D.target.value)),className:`input-field ${v[`item_${T}_quantity`]?"border-red-500":""}`,placeholder:"1"}),v[`item_${T}_quantity`]&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v[`item_${T}_quantity`]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix d'achat (Ar)"}),o.jsx("input",{type:"text",value:$(_.purchasePrice),onChange:D=>x(T,"purchasePrice",Oe(D.target.value)),className:"input-field",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frais divers (Ar)"}),o.jsx("input",{type:"text",value:$(_.miscFees),onChange:D=>x(T,"miscFees",Oe(D.target.value)),className:"input-field",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frais de douane (Ar)"}),o.jsx("input",{type:"text",value:$(_.customsFees),onChange:D=>x(T,"customsFees",Oe(D.target.value)),className:"input-field",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Prix de vente unitaire (Ar)",P&&o.jsx("span",{className:"text-xs text-green-600 ml-1",children:"(Calculé automatiquement)"})]}),o.jsx("input",{type:"text",value:$(_.sellingPrice),onChange:D=>x(T,"sellingPrice",Oe(D.target.value)),className:`input-field ${P?"bg-green-50 border-green-200":"bg-gray-50"}`,placeholder:"0",readOnly:P}),P&&o.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Prix calculé avec marge de ",$(_.margin||0),"%"]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Marge en pourcentage (%)",P&&o.jsx("span",{className:"text-xs text-green-600 ml-1",children:"(Importée du calcul)"})]}),o.jsx("input",{type:"text",value:$(_.margin||0),onChange:D=>x(T,"margin",Oe(D.target.value)),className:`input-field ${P?"bg-green-50 border-green-200":""}`,placeholder:"20"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Poids (kg)"}),o.jsx("input",{type:"text",value:$(_.weight),onChange:D=>x(T,"weight",Oe(D.target.value)),className:"input-field",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catégorie"}),o.jsx("input",{type:"text",value:_.category,onChange:D=>x(T,"category",D.target.value),className:"input-field",placeholder:"Électronique, Textile, etc."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code HS"}),o.jsx("input",{type:"text",value:_.hsCode||"",onChange:D=>x(T,"hsCode",D.target.value),className:"input-field",placeholder:"8517.12.00"})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dimensions (cm)"}),o.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[o.jsx("input",{type:"text",value:$(_.dimensions.length),onChange:D=>w(T,"length",Oe(D.target.value)),className:"input-field",placeholder:"Longueur"}),o.jsx("input",{type:"text",value:$(_.dimensions.width),onChange:D=>w(T,"width",Oe(D.target.value)),className:"input-field",placeholder:"Largeur"}),o.jsx("input",{type:"text",value:$(_.dimensions.height),onChange:D=>w(T,"height",Oe(D.target.value)),className:"input-field",placeholder:"Hauteur"})]})]}),o.jsxs("div",{className:"lg:col-span-3",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lien produit (optionnel)"}),o.jsx("input",{type:"url",value:_.productLink||"",onChange:D=>x(T,"productLink",D.target.value),className:"input-field",placeholder:"https://exemple.com/produit"})]})]}),o.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[o.jsx("span",{children:"Coût unitaire (sans marge):"}),o.jsxs("span",{children:[$(_.purchasePrice+_.miscFees+_.customsFees)," Ar"]})]}),o.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[o.jsxs("span",{children:["Marge (",$(_.margin||0),"%):"]}),o.jsxs("span",{children:["+",$(Math.round((_.purchasePrice+_.miscFees+_.customsFees)*(_.margin||0)/100))," Ar"]})]}),o.jsxs("div",{className:"flex justify-between items-center border-t border-gray-200 pt-2",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Prix de vente unitaire:"}),o.jsxs("span",{className:"font-semibold text-gray-900",children:[$(_.sellingPrice)," Ar"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Total pour cet article:"}),o.jsxs("span",{className:"font-bold text-blue-600",children:[$(_.quantity*_.sellingPrice)," Ar"]})]})]})})]},T))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expédition"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pays d'origine *"}),o.jsx("input",{type:"text",value:c.originCountry,onChange:_=>k("originCountry",_.target.value),className:`input-field ${v.originCountry?"border-red-500":""}`,placeholder:"Chine, France, Allemagne..."}),v.originCountry&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.originCountry})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode d'expédition *"}),o.jsxs("select",{value:c.shippingMethod,onChange:_=>k("shippingMethod",_.target.value),className:"input-field",children:[o.jsx("option",{value:"sea",children:"Maritime"}),o.jsx("option",{value:"air",children:"Aérien"}),o.jsx("option",{value:"land",children:"Terrestre"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de validité *"}),o.jsx("input",{type:"date",value:c.validUntil,onChange:_=>k("validUntil",_.target.value),className:`input-field ${v.validUntil?"border-red-500":""}`}),v.validUntil&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.validUntil})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Livraison estimée *"}),o.jsx("input",{type:"date",value:c.estimatedDelivery,onChange:_=>k("estimatedDelivery",_.target.value),className:`input-field ${v.estimatedDelivery?"border-red-500":""}`}),v.estimatedDelivery&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.estimatedDelivery})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes générales"}),o.jsx("textarea",{value:c.notes,onChange:_=>k("notes",_.target.value),rows:3,className:"input-field",placeholder:"Notes ou instructions spéciales..."})]})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Acompte (Optionnel)"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pourcentage d'acompte (%)"}),o.jsx("input",{type:"text",value:$(d.percentage),onChange:_=>S("percentage",Oe(_.target.value)),className:`input-field ${v.downPaymentPercentage?"border-red-500":""}`,placeholder:"30"}),v.downPaymentPercentage&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:v.downPaymentPercentage})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Montant d'acompte (Ar)"}),o.jsx("input",{type:"text",value:$(d.amount),onChange:_=>S("amount",Oe(_.target.value)),className:"input-field",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mode de paiement"}),o.jsxs("select",{value:d.paymentMethod,onChange:_=>S("paymentMethod",_.target.value),className:"input-field",children:[o.jsx("option",{value:"",children:"Sélectionner..."}),o.jsx("option",{value:"cash",children:"Espèces"}),o.jsx("option",{value:"bank_transfer",children:"Virement bancaire"}),o.jsx("option",{value:"check",children:"Chèque"}),o.jsx("option",{value:"mobile_money",children:"Mobile Money"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes sur l'acompte"}),o.jsx("input",{type:"text",value:d.notes,onChange:_=>S("notes",_.target.value),className:"input-field",placeholder:"Notes optionnelles..."})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Résumé"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Total articles"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$(m.length)})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Montant total"}),o.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[$(U())," Ar"]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Solde restant"}),o.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[$(U()-d.amount)," Ar"]})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx("button",{type:"button",onClick:()=>t("/quotes"),className:"btn-secondary",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[o.jsx(Ou,{className:"w-4 h-4"}),o.jsx("span",{children:"Créer le devis"})]})]})]}):o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Aperçu du Devis"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:()=>j4(I),className:"btn-secondary flex items-center space-x-2",children:[o.jsx(pn,{className:"w-4 h-4"}),o.jsx("span",{children:"Imprimer"})]}),o.jsxs("button",{onClick:()=>LE(I),className:"btn-primary flex items-center space-x-2",children:[o.jsx(pn,{className:"w-4 h-4"}),o.jsx("span",{children:"Télécharger PDF"})]})]})]}),o.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg p-8 shadow-sm",children:[o.jsxs("div",{className:"text-center mb-8 border-b border-gray-200 pb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"DEVIS D'IMPORTATION"}),o.jsx("p",{className:"text-xl text-gray-600",children:I.quoteNumber})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Informations Client"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Nom:"})," ",I.clientName||"Non renseigné"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Email:"})," ",I.clientEmail||"Non renseigné"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Téléphone:"})," ",I.clientPhone||"Non renseigné"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Adresse:"})," ",I.clientAddress||"Non renseignée"]})]})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Informations Devis"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Date de création:"})," ",I.createdAt.toLocaleDateString("fr-FR")]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Valide jusqu'au:"})," ",I.validUntil.toLocaleDateString("fr-FR")]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Livraison estimée:"})," ",I.estimatedDelivery.toLocaleDateString("fr-FR")]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Origine:"})," ",I.originCountry||"Non renseigné"]}),o.jsxs("p",{children:[o.jsx("span",{className:"font-medium",children:"Mode d'expédition:"})," ",I.shippingMethod==="sea"?"Maritime":I.shippingMethod==="air"?"Aérien":"Terrestre"]})]})]})]}),o.jsxs("div",{className:"mb-8",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Articles"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full border border-gray-300",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase border-b border-gray-300",children:"Description"}),o.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase border-b border-gray-300",children:"Quantité"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase border-b border-gray-300",children:"Prix Unitaire"}),o.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase border-b border-gray-300",children:"Total"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:I.items.map((_,T)=>o.jsxs("tr",{children:[o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 border-b border-gray-200",children:o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:_.description||"Article sans description"}),_.category&&o.jsx("p",{className:"text-xs text-gray-500",children:_.category}),_.hsCode&&o.jsxs("p",{className:"text-xs text-gray-500",children:["Code HS: ",_.hsCode]})]})}),o.jsx("td",{className:"px-4 py-3 text-sm text-gray-900 text-center border-b border-gray-200",children:$(_.quantity)}),o.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900 text-right border-b border-gray-200",children:[$(_.sellingPrice)," Ar"]}),o.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 text-right border-b border-gray-200",children:[$(_.quantity*_.sellingPrice)," Ar"]})]},T))})]})})]}),o.jsx("div",{className:"border-t border-gray-300 pt-6",children:o.jsx("div",{className:"flex justify-end",children:o.jsxs("div",{className:"w-full max-w-sm space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center text-lg",children:[o.jsx("span",{className:"font-semibold text-gray-900",children:"TOTAL:"}),o.jsxs("span",{className:"font-bold text-gray-900 text-xl",children:[$(I.totalAmount)," Ar"]})]}),I.downPayment&&I.downPayment.amount>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm border-t border-gray-200 pt-3",children:[o.jsxs("span",{className:"text-gray-600",children:["Acompte (",$(I.downPayment.percentage),"%):"]}),o.jsxs("span",{className:"font-medium text-gray-900",children:[$(I.downPayment.amount)," Ar"]})]}),o.jsxs("div",{className:"flex justify-between items-center text-sm",children:[o.jsx("span",{className:"text-gray-600",children:"Solde restant:"}),o.jsxs("span",{className:"font-medium text-orange-600",children:[$(I.remainingAmount)," Ar"]})]})]})]})})}),I.notes&&o.jsxs("div",{className:"mt-8 border-t border-gray-200 pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Notes"}),o.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded-lg",children:I.notes})]}),o.jsxs("div",{className:"mt-8 border-t border-gray-200 pt-6",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Conditions"}),o.jsxs("div",{className:"text-sm text-gray-700 space-y-2",children:[o.jsxs("p",{children:["• Ce devis est valable jusqu'au ",I.validUntil.toLocaleDateString("fr-FR")]}),o.jsxs("p",{children:["• Livraison estimée: ",I.estimatedDelivery.toLocaleDateString("fr-FR")]}),o.jsx("p",{children:"• Les prix sont exprimés en Ariary malgache (MGA)"}),o.jsx("p",{children:"• Les frais de douane et taxes sont inclus dans les prix"}),I.downPayment&&I.downPayment.amount>0&&o.jsxs("p",{children:["• Un acompte de ",$(I.downPayment.percentage),"% est requis à la commande"]})]})]})]})]})})]})]})},M4=()=>{const t=Xn(),{id:e}=_S(),{quotes:n,updateQuote:r}=zo(),[s,i]=V.useState(null),[a,c]=V.useState(!0),[u,d]=V.useState({clientName:"",clientEmail:"",clientPhone:"",clientAddress:"",originCountry:"",shippingMethod:"sea",currency:"MGA",validUntil:"",estimatedDelivery:"",notes:"",status:"draft"}),[f,m]=V.useState({percentage:0,amount:0,paymentMethod:"",notes:""}),[g,v]=V.useState([]),[b,P]=V.useState({});V.useEffect(()=>{if(e){const j=n.find(O=>O.id===e);j&&(i(j),d({clientName:j.clientName,clientEmail:j.clientEmail,clientPhone:j.clientPhone,clientAddress:j.clientAddress,originCountry:j.originCountry,shippingMethod:j.shippingMethod,currency:j.currency,validUntil:j.validUntil.toISOString().split("T")[0],estimatedDelivery:j.estimatedDelivery.toISOString().split("T")[0],notes:j.notes||"",status:j.status}),j.downPayment&&m({percentage:j.downPayment.percentage,amount:j.downPayment.amount,paymentMethod:j.downPayment.paymentMethod||"",notes:j.downPayment.notes||""}),v(j.items.map(O=>({description:O.description,quantity:O.quantity,unitPrice:O.unitPrice,purchasePrice:O.purchasePrice,miscFees:O.miscFees,customsFees:O.customsFees,sellingPrice:O.sellingPrice,weight:O.weight,dimensions:O.dimensions,hsCode:O.hsCode,category:O.category,productLink:O.productLink})))),c(!1)}},[e,n]);const k=(j,O)=>{d(U=>({...U,[j]:O})),b[j]&&P(U=>({...U,[j]:""}))},S=()=>g.reduce((j,O)=>j+O.quantity*O.sellingPrice,0),x=()=>{const j={};return u.clientName.trim()||(j.clientName="Le nom du client est requis"),u.clientEmail.trim()||(j.clientEmail="L'email du client est requis"),u.clientPhone.trim()||(j.clientPhone="Le téléphone du client est requis"),u.clientAddress.trim()||(j.clientAddress="L'adresse du client est requise"),u.originCountry.trim()||(j.originCountry="Le pays d'origine est requis"),u.validUntil||(j.validUntil="La date de validité est requise"),u.estimatedDelivery||(j.estimatedDelivery="La date de livraison estimée est requise"),g.forEach((O,U)=>{O.description.trim()||(j[`item_${U}_description`]="La description est requise"),O.quantity<=0&&(j[`item_${U}_quantity`]="La quantité doit être positive")}),f.percentage>100&&(j.downPaymentPercentage="Le pourcentage ne peut pas dépasser 100%"),P(j),Object.keys(j).length===0},w=j=>{var C;if(j.preventDefault(),!x()||!s)return;const O=S(),U=O-f.amount;let A="unpaid";f.amount===O?A="paid":f.amount>0&&(A="partial");const y={...u,validUntil:new Date(u.validUntil),estimatedDelivery:new Date(u.estimatedDelivery),totalAmount:O,paymentStatus:A,remainingAmount:U,items:g.map((I,_)=>{var T;return{...I,id:((T=s.items[_])==null?void 0:T.id)||`item_${_}_${Date.now()}`}})},N=f.amount>0?{...y,downPayment:{id:((C=s.downPayment)==null?void 0:C.id)||`dp_${Date.now()}`,amount:f.amount,percentage:f.percentage,paymentMethod:f.paymentMethod,notes:f.notes,paidDate:null}}:y;r(s.id,N),t("/quotes")};return a?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):s?o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>t("/quotes"),className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(NE,{className:"w-5 h-5"})}),o.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Modifier le devis ",s.quoteNumber]})]})}),o.jsxs("form",{onSubmit:w,className:"space-y-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Statut du devis"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Statut"}),o.jsxs("select",{value:u.status,onChange:j=>k("status",j.target.value),className:"input-field",children:[o.jsx("option",{value:"draft",children:"Brouillon"}),o.jsx("option",{value:"pending",children:"En Attente"}),o.jsx("option",{value:"confirmed",children:"Confirmé"}),o.jsx("option",{value:"delivered",children:"Livré"}),o.jsx("option",{value:"cancelled",children:"Annulé"})]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-4",children:[o.jsx("button",{type:"button",onClick:()=>t("/quotes"),className:"btn-secondary",children:"Annuler"}),o.jsxs("button",{type:"submit",className:"btn-primary flex items-center space-x-2",children:[o.jsx(Ou,{className:"w-4 h-4"}),o.jsx("span",{children:"Sauvegarder les modifications"})]})]})]})]}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx("p",{className:"text-gray-500",children:"Devis non trouvé"}),o.jsx("button",{onClick:()=>t("/quotes"),className:"mt-4 btn-primary",children:"Retour à la liste"})]})},UE=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!0),[s,i]=V.useState(null);V.useEffect(()=>{(async()=>{try{r(!0),i(null),console.log("useCostHistory - Starting to load calculations from Firebase...");const k=await rs.getAll();console.log("useCostHistory - Loaded calculations:",k.length),e(k)}catch(k){console.error("useCostHistory - Error loading calculations:",k),i("Erreur lors du chargement de l'historique des calculs"),e([])}finally{r(!1)}})()},[]);const a=async(P,k)=>{try{const S=new Date,x=k||`Calcul du ${S.toLocaleDateString("fr-FR")} à ${S.toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}`;console.log("useCostHistory - Adding new calculation...");const w=await rs.add(P,x);return e(j=>[w,...j]),w}catch(S){throw console.error("useCostHistory - Error adding calculation:",S),i("Erreur lors de la sauvegarde du calcul"),S}},c=async P=>{try{console.log("useCostHistory - Deleting calculation:",P),await rs.delete(P),e(k=>k.filter(S=>S.id!==P))}catch(k){throw console.error("useCostHistory - Error deleting calculation:",k),i("Erreur lors de la suppression du calcul"),k}},u=async P=>{try{const S={...P,calculatedAt:new Date},x=await rs.add(S,`${P.name} (Copie)`);return e(w=>[x,...w]),x}catch(k){throw console.error("useCostHistory - Error duplicating calculation:",k),i("Erreur lors de la duplication du calcul"),k}},d=async(P,k)=>{try{console.log("useCostHistory - Updating calculation name:",P),await rs.update(P,{name:k}),e(S=>S.map(x=>x.id===P?{...x,name:k,updatedAt:new Date}:x))}catch(S){throw console.error("useCostHistory - Error updating calculation name:",S),i("Erreur lors de la mise à jour du nom"),S}},f=async()=>{try{r(!0),i(null);const P=await rs.getAll();e(P)}catch(P){console.error("useCostHistory - Error refreshing calculations:",P),i("Erreur lors du rafraîchissement des calculs")}finally{r(!1)}},m=P=>{const k={name:P.name,createdAt:P.createdAt.toISOString(),totalCost:P.totalCost,totalSellingPrice:P.totalSellingPrice,totalMargin:P.totalMargin,exchangeRates:P.exchangeRates,items:P.items.map(O=>({description:O.description,quantity:O.quantity,originCountry:O.originCountry,purchasePrice:O.purchasePrice,mainCurrency:O.mainCurrency,transportFees:O.transportFees,miscFees:O.miscFees,customsFees:O.customsFees,margin:O.margin,sellingPrice:O.sellingPrice,category:O.category||"",hsCode:O.hsCode||""}))},S=JSON.stringify(k,null,2),x=new Blob([S],{type:"application/json"}),w=URL.createObjectURL(x),j=document.createElement("a");j.href=w,j.download=`calcul-${P.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()}-${P.createdAt.toISOString().split("T")[0]}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(w)},g=()=>{const P=t.length,k=t.reduce((w,j)=>w+j.totalSellingPrice,0),S=P>0?k/P:0,x=t.reduce((w,j)=>w+j.items.length,0);return{totalCalculations:P,totalValue:k,averageValue:S,totalItems:x}},v=P=>{if(!P.trim())return t;const k=P.toLowerCase();return t.filter(S=>S.name.toLowerCase().includes(k)||S.items.some(x=>x.description.toLowerCase().includes(k)||x.originCountry.toLowerCase().includes(k)||x.category&&x.category.toLowerCase().includes(k)))},b=P=>t.find(k=>k.id===P);return console.log("useCostHistory - Current state:",{calculationsCount:t.length,loading:n}),{calculations:t,loading:n,error:s,addCalculation:a,deleteCalculation:c,duplicateCalculation:u,updateCalculationName:d,exportCalculation:m,getStatistics:g,searchCalculations:v,getCalculationById:b,refreshCalculations:f}},O4=()=>{const t=Xn(),{calculations:e,loading:n,error:r,deleteCalculation:s,duplicateCalculation:i,updateCalculationName:a,exportCalculation:c,refreshCalculations:u}=UE(),[d,f]=V.useState(""),[m,g]=V.useState(null),[v,b]=V.useState(!1),[P,k]=V.useState(null),[S,x]=V.useState(null),[w,j]=V.useState("");if(V.useEffect(()=>{u()},[]),n)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(Gi,{size:"lg"})});if(r)return o.jsx(Cs,{message:r,onRetry:u});const O=e.filter(D=>D.name.toLowerCase().includes(d.toLowerCase())||D.items.some(G=>G.description.toLowerCase().includes(d.toLowerCase())||G.originCountry.toLowerCase().includes(d.toLowerCase()))),U=()=>{P&&(s(P),k(null),b(!1))},A=(D,G)=>{x(D),j(G)},y=D=>{w.trim()&&a(D,w.trim()),x(null),j("")},N=D=>{i(D)},C=D=>{localStorage.setItem("temp_cost_calculation",JSON.stringify(D)),t("/quotes/new?from=cost-calculation")},I=D=>{t(`/cost-calculation?edit=${D.id}`)},_=D=>D.items.reduce((G,se)=>G+se.quantity,0),T=D=>{const G=[...new Set(D.items.map(se=>se.originCountry))];return G.slice(0,2).join(", ")+(G.length>2?` +${G.length-2}`:"")};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(Eo,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Historique des Calculs"}),o.jsxs("p",{className:"text-sm text-gray-500",children:[e.length," calcul",e.length>1?"s":""," sauvegardé",e.length>1?"s":""]})]})]}),o.jsxs("button",{onClick:()=>t("/cost-calculation"),className:"btn-primary flex items-center space-x-2",children:[o.jsx($r,{className:"w-4 h-4"}),o.jsx("span",{children:"Nouveau Calcul"})]})]}),o.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:o.jsxs("div",{className:"relative",children:[o.jsx(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Rechercher par nom, description d'article ou pays...",value:d,onChange:D=>f(D.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-full"})]})}),O.length===0?o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[o.jsx("div",{className:"p-4 bg-gray-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:o.jsx(Eo,{className:"w-8 h-8 text-gray-400"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:d?"Aucun calcul trouvé":"Aucun calcul sauvegardé"}),o.jsx("p",{className:"text-gray-500 mb-6",children:d?"Essayez de modifier votre recherche":"Commencez par créer votre premier calcul de coûts"}),o.jsxs("button",{onClick:()=>t("/cost-calculation"),className:"btn-primary flex items-center space-x-2 mx-auto",children:[o.jsx($r,{className:"w-4 h-4"}),o.jsx("span",{children:"Créer un calcul"})]})]}):o.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:O.map(D=>o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1 min-w-0",children:[S===D.id?o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx("input",{type:"text",value:w,onChange:G=>j(G.target.value),className:"flex-1 text-lg font-semibold border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",onKeyPress:G=>G.key==="Enter"&&y(D.id),onBlur:()=>y(D.id),autoFocus:!0})}):o.jsx("h3",{className:"text-lg font-semibold text-gray-900 cursor-pointer hover:text-primary-600 transition-colors duration-200 truncate",onClick:()=>A(D.id,D.name),title:"Cliquer pour modifier le nom",children:D.name}),o.jsx("div",{className:"flex items-center space-x-4 mt-1",children:o.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[o.jsx(vp,{className:"w-3 h-3 mr-1"}),kr(D.calculatedAt,"dd/MM/yyyy HH:mm",{locale:jr})]})})]}),o.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[o.jsx("button",{onClick:()=>g(D),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-all duration-200",title:"Voir les détails",children:o.jsx(ji,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>I(D),className:"p-1 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded transition-all duration-200",title:"Modifier",children:o.jsx(Mu,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>N(D),className:"p-1 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-all duration-200",title:"Dupliquer",children:o.jsx(vR,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>c(D),className:"p-1 text-gray-400 hover:text-purple-600 hover:bg-purple-50 rounded transition-all duration-200",title:"Exporter",children:o.jsx(Tf,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>{k(D.id),b(!0)},className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-all duration-200",title:"Supprimer",children:o.jsx($o,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-center mb-1",children:o.jsx(Nf,{className:"w-4 h-4 text-blue-600 mr-1"})}),o.jsxs("p",{className:"text-sm text-blue-600 font-medium",children:[$(D.items.length)," article",D.items.length>1?"s":""]}),o.jsxs("p",{className:"text-xs text-blue-500",children:[$(_(D))," unité",_(D)>1?"s":""]})]}),o.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[o.jsx("div",{className:"flex items-center justify-center mb-1",children:o.jsx(fs,{className:"w-4 h-4 text-green-600 mr-1"})}),o.jsxs("p",{className:"text-sm text-green-600 font-medium",children:[$(Math.round(D.totalSellingPrice/1e6))," M Ar"]}),o.jsx("p",{className:"text-xs text-green-500",children:"Prix de vente"})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Pays d'origine :"}),o.jsx("p",{className:"text-sm text-gray-700 font-medium",children:T(D)})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Aperçu des articles :"}),o.jsxs("div",{className:"space-y-1",children:[D.items.slice(0,2).map((G,se)=>o.jsxs("div",{className:"text-xs text-gray-600 truncate",children:["• ",G.description||"Article sans description"," (",$(G.quantity),")"]},se)),D.items.length>2&&o.jsxs("div",{className:"text-xs text-gray-500",children:["... et ",D.items.length-2," autre",D.items.length-2>1?"s":""]})]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:()=>C(D),className:"flex-1 btn-primary text-sm py-2 flex items-center justify-center space-x-1",children:[o.jsx(pn,{className:"w-3 h-3"}),o.jsx("span",{children:"Créer devis"}),o.jsx(_f,{className:"w-3 h-3"})]}),o.jsx("button",{onClick:()=>g(D),className:"btn-secondary text-sm py-2 px-3",children:o.jsx(ji,{className:"w-3 h-3"})})]})]},D.id))}),o.jsx(Ri,{isOpen:!!m,onClose:()=>g(null),title:`Détails du calcul : ${m==null?void 0:m.name}`,size:"xl",children:m&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[o.jsx(Nf,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Articles"}),o.jsx("p",{className:"text-xl font-bold text-blue-900",children:$(m.items.length)})]}),o.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[o.jsx(fs,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Coût Total"}),o.jsxs("p",{className:"text-xl font-bold text-orange-900",children:[$(Math.round(m.totalCost/1e6))," M Ar"]})]}),o.jsxs("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[o.jsx(fs,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Prix de Vente"}),o.jsxs("p",{className:"text-xl font-bold text-green-900",children:[$(Math.round(m.totalSellingPrice/1e6))," M Ar"]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Taux de change utilisés"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"USD → MGA"}),o.jsx("p",{className:"font-semibold text-gray-900",children:$(m.exchangeRates.USD)})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"EUR → MGA"}),o.jsx("p",{className:"font-semibold text-gray-900",children:$(m.exchangeRates.EUR)})]}),o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"CNY → MGA"}),o.jsx("p",{className:"font-semibold text-gray-900",children:$(m.exchangeRates.CNY)})]})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Articles calculés"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),o.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Pays"}),o.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-gray-500 uppercase",children:"Qté"}),o.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Prix Achat"}),o.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Marge"}),o.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase",children:"Prix Vente"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:m.items.map((D,G)=>o.jsxs("tr",{className:"hover:bg-gray-50",children:[o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:D.description||"Article sans description"}),D.category&&o.jsx("p",{className:"text-xs text-gray-500",children:D.category})]})}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-600",children:D.originCountry}),o.jsx("td",{className:"px-4 py-2 text-sm text-gray-900 text-center",children:$(D.quantity)}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:[$(D.purchasePrice)," ",D.mainCurrency]}),o.jsxs("td",{className:"px-4 py-2 text-sm text-gray-900 text-right",children:[$(D.margin||0),"%"]}),o.jsx("td",{className:"px-4 py-2 text-sm font-medium text-gray-900 text-right",children:Jt(D.sellingPrice)})]},G))})]})})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[o.jsxs("button",{onClick:()=>c(m),className:"btn-secondary flex items-center space-x-2",children:[o.jsx(Tf,{className:"w-4 h-4"}),o.jsx("span",{children:"Exporter"})]}),o.jsxs("button",{onClick:()=>C(m),className:"btn-primary flex items-center space-x-2",children:[o.jsx(pn,{className:"w-4 h-4"}),o.jsx("span",{children:"Créer un devis"}),o.jsx(_f,{className:"w-4 h-4"})]})]})]})}),o.jsx(Ri,{isOpen:v,onClose:()=>b(!1),title:"Confirmer la suppression",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Êtes-vous sûr de vouloir supprimer ce calcul ? Cette action est irréversible."}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>b(!1),className:"btn-secondary",children:"Annuler"}),o.jsx("button",{onClick:U,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200",children:"Supprimer"})]})]})})]})},V4=()=>{const{clients:t,loading:e,error:n,addClient:r,updateClient:s,deleteClient:i,refreshClients:a}=wp(),[c,u]=V.useState(""),[d,f]=V.useState(!1),[m,g]=V.useState(!1),[v,b]=V.useState(null),[P,k]=V.useState(null),[S,x]=V.useState({name:"",email:"",phone:"",address:"",company:""}),[w,j]=V.useState({});if(e&&t.length===0)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(Gi,{size:"lg"})});if(n)return o.jsx(Cs,{message:n,onRetry:a});const O=t.filter(_=>_.name.toLowerCase().includes(c.toLowerCase())||_.email.toLowerCase().includes(c.toLowerCase())||_.company&&_.company.toLowerCase().includes(c.toLowerCase())),U=()=>{x({name:"",email:"",phone:"",address:"",company:""}),j({})},A=()=>{const _={};return S.name.trim()||(_.name="Le nom est requis"),S.email.trim()||(_.email="L'email est requis"),S.phone.trim()||(_.phone="Le téléphone est requis"),S.address.trim()||(_.address="L'adresse est requise"),j(_),Object.keys(_).length===0},y=_=>{_.preventDefault(),A()&&(v?s(v.id,S):r(S),U(),f(!1),b(null))},N=_=>{b(_),x({name:_.name,email:_.email,phone:_.phone,address:_.address,company:_.company||""}),f(!0)},C=()=>{P&&(i(P),k(null),g(!1))},I=(_,T)=>{x(D=>({...D,[_]:T})),w[_]&&j(D=>({...D,[_]:""}))};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Clients"}),o.jsxs("button",{onClick:()=>{U(),b(null),f(!0)},className:"btn-primary flex items-center space-x-2",children:[o.jsx($r,{className:"w-4 h-4"}),o.jsx("span",{children:"Nouveau Client"})]})]}),o.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:o.jsxs("div",{className:"relative",children:[o.jsx(Vu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",placeholder:"Rechercher un client...",value:c,onChange:_=>u(_.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 w-full"})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(_=>o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:_.name}),_.company&&o.jsxs("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[o.jsx(wf,{className:"w-4 h-4 mr-1"}),_.company]})]}),o.jsxs("div",{className:"flex space-x-1",children:[o.jsx("button",{onClick:()=>N(_),className:"text-blue-600 hover:text-blue-800 p-1",title:"Modifier",children:o.jsx(Mu,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>{k(_.id),g(!0)},className:"text-red-600 hover:text-red-800 p-1",title:"Supprimer",children:o.jsx($o,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(xp,{className:"w-4 h-4 mr-2"}),o.jsx("a",{href:`mailto:${_.email}`,className:"hover:text-primary-600",children:_.email})]}),o.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[o.jsx(AE,{className:"w-4 h-4 mr-2"}),o.jsx("a",{href:`tel:${_.phone}`,className:"hover:text-primary-600",children:_.phone})]}),o.jsxs("div",{className:"flex items-start text-sm text-gray-600",children:[o.jsx(bE,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),o.jsx("span",{children:_.address})]})]}),o.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Devis"}),o.jsx("p",{className:"font-semibold text-gray-900",children:$(_.totalQuotes)})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Valeur totale"}),o.jsx("p",{className:"font-semibold text-gray-900",children:Jt(_.totalValue)})]})]}),o.jsx("div",{className:"mt-2",children:o.jsxs("p",{className:"text-xs text-gray-500",children:["Client depuis le ",kr(_.createdAt,"dd/MM/yyyy",{locale:jr})]})})]})]},_.id))}),O.length===0&&o.jsx("div",{className:"text-center py-12",children:o.jsx("p",{className:"text-gray-500",children:"Aucun client trouvé"})}),o.jsx(Ri,{isOpen:d,onClose:()=>{f(!1),b(null),U()},title:v?"Modifier le client":"Nouveau client",size:"md",children:o.jsxs("form",{onSubmit:y,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom complet *"}),o.jsx("input",{type:"text",value:S.name,onChange:_=>I("name",_.target.value),className:`input-field ${w.name?"border-red-500":""}`,placeholder:"Nom complet du client"}),w.name&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:w.name})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),o.jsx("input",{type:"email",value:S.email,onChange:_=>I("email",_.target.value),className:`input-field ${w.email?"border-red-500":""}`,placeholder:"email@exemple.com"}),w.email&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:w.email})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Téléphone *"}),o.jsx("input",{type:"tel",value:S.phone,onChange:_=>I("phone",_.target.value),className:`input-field ${w.phone?"border-red-500":""}`,placeholder:"+212 6 12 34 56 78"}),w.phone&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:w.phone})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entreprise"}),o.jsx("input",{type:"text",value:S.company,onChange:_=>I("company",_.target.value),className:"input-field",placeholder:"Nom de l'entreprise (optionnel)"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adresse *"}),o.jsx("textarea",{value:S.address,onChange:_=>I("address",_.target.value),rows:3,className:`input-field ${w.address?"border-red-500":""}`,placeholder:"Adresse complète"}),w.address&&o.jsx("p",{className:"text-red-500 text-xs mt-1",children:w.address})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>{f(!1),b(null),U()},className:"btn-secondary",children:"Annuler"}),o.jsx("button",{type:"submit",className:"btn-primary",children:v?"Modifier":"Créer"})]})]})}),o.jsx(Ri,{isOpen:m,onClose:()=>g(!1),title:"Confirmer la suppression",size:"sm",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Êtes-vous sûr de vouloir supprimer ce client ? Cette action est irréversible."}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx("button",{onClick:()=>g(!1),className:"btn-secondary",children:"Annuler"}),o.jsx("button",{onClick:C,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200",children:"Supprimer"})]})]})})]})},L4=()=>{const{quotes:t,loading:e,error:n,refreshQuotes:r}=zo(),{clients:s,loading:i,error:a,refreshClients:c}=wp();if((e||i)&&t.length===0&&s.length===0)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx(Gi,{size:"lg"})});if(n||a)return o.jsxs("div",{className:"space-y-4",children:[n&&o.jsx(Cs,{message:n,onRetry:r}),a&&o.jsx(Cs,{message:a,onRetry:c})]});const u=t.reduce((x,w)=>x+w.totalAmount,0),d=t.length>0?u/t.length:0,f=t.reduce((x,w)=>(x[w.status]=(x[w.status]||0)+1,x),{}),m=t.reduce((x,w)=>(x[w.shippingMethod]=(x[w.shippingMethod]||0)+1,x),{}),g=t.reduce((x,w)=>(x[w.originCountry]=(x[w.originCountry]||0)+1,x),{}),b=UR({start:yv(YD(new Date,5)),end:FR(new Date)}).map(x=>{const w=t.filter(j=>yv(j.createdAt).getTime()===x.getTime());return{month:kr(x,"MMM yyyy",{locale:jr}),quotes:w.length,value:w.reduce((j,O)=>j+O.totalAmount,0)}}),P=s.sort((x,w)=>w.totalValue-x.totalValue).slice(0,5),k=x=>{switch(x){case"sea":return"Maritime";case"air":return"Aérien";case"land":return"Terrestre";default:return x}},S=x=>{switch(x){case"draft":return"Brouillon";case"pending":return"En Attente";case"confirmed":return"Confirmé";case"delivered":return"Livré";case"cancelled":return"Annulé";default:return x}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analyses"}),o.jsxs("div",{className:"text-sm text-gray-500",children:["Données basées sur ",t.length," devis"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(fs,{className:"w-6 h-6 text-green-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Chiffre d'Affaires"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[u.toLocaleString("fr-FR")," Ar"]})]})]})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(pR,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Valeur Moyenne"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(d).toLocaleString("fr-FR")," Ar"]})]})]})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:o.jsx(Nf,{className:"w-6 h-6 text-purple-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Total Articles"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.reduce((x,w)=>x+w.items.length,0)})]})]})}),o.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:o.jsx(_p,{className:"w-6 h-6 text-orange-600"})}),o.jsxs("div",{className:"ml-4",children:[o.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Taux de Conversion"}),o.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[t.length>0?Math.round((f.confirmed||0)/t.length*100):0,"%"]})]})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(vp,{className:"w-5 h-5 text-gray-400 mr-2"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Évolution Mensuelle"})]}),o.jsx("div",{className:"space-y-4",children:b.map((x,w)=>o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:x.month}),o.jsxs("span",{className:"text-sm text-gray-500",children:[x.quotes," devis"]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-primary-600 h-2 rounded-full",style:{width:`${u>0?x.value/u*100:0}%`}})}),o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:Jt(x.value)})]})},w))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(CR,{className:"w-5 h-5 text-gray-400 mr-2"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Répartition par Statut"})]}),o.jsx("div",{className:"space-y-3",children:Object.entries(f).map(([x,w])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${x==="confirmed"?"bg-green-500":x==="pending"?"bg-yellow-500":x==="delivered"?"bg-blue-500":x==="cancelled"?"bg-red-500":"bg-gray-500"}`}),o.jsx("span",{className:"text-sm text-gray-900",children:S(x)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:$(w)}),o.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",$(Math.round(w/t.length*100)),"%)"]})]})]},x))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(kE,{className:"w-5 h-5 text-gray-400 mr-2"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Modes d'Expédition"})]}),o.jsx("div",{className:"space-y-3",children:Object.entries(m).map(([x,w])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:`w-3 h-3 rounded-full mr-3 ${x==="sea"?"bg-blue-500":x==="air"?"bg-sky-500":"bg-green-500"}`}),o.jsx("span",{className:"text-sm text-gray-900",children:k(x)})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:$(w)}),o.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",$(Math.round(w/t.length*100)),"%)"]})]})]},x))})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(IE,{className:"w-5 h-5 text-gray-400 mr-2"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Pays d'Origine"})]}),o.jsx("div",{className:"space-y-3",children:Object.entries(g).sort(([,x],[,w])=>w-x).slice(0,5).map(([x,w])=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-900",children:x}),o.jsxs("div",{className:"text-right",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:$(w)}),o.jsxs("span",{className:"text-xs text-gray-500 ml-1",children:["(",$(Math.round(w/t.length*100)),"%)"]})]})]},x))})]})]}),o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top 5 Clients"}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-200",children:[o.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-500",children:"Client"}),o.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-500",children:"Entreprise"}),o.jsx("th",{className:"text-right py-2 text-sm font-medium text-gray-500",children:"Devis"}),o.jsx("th",{className:"text-right py-2 text-sm font-medium text-gray-500",children:"Valeur Totale"})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200",children:P.map(x=>o.jsxs("tr",{children:[o.jsx("td",{className:"py-3 text-sm text-gray-900",children:x.name}),o.jsx("td",{className:"py-3 text-sm text-gray-600",children:x.company||"-"}),o.jsx("td",{className:"py-3 text-sm text-gray-900 text-right",children:$(x.totalQuotes)}),o.jsx("td",{className:"py-3 text-sm font-medium text-gray-900 text-right",children:Jt(x.totalValue)})]},x.id))})]})})]})]})},F4=()=>{const[t,e]=V.useState("profile"),[n,r]=V.useState({name:"Admin User",email:"admin@example.com",phone:"+212 6 12 34 56 78",company:"Import Export Solutions",address:"123 Rue Hassan II, Casablanca, Maroc",website:"www.example.com"}),[s,i]=V.useState({companyName:"Import Export Solutions",taxId:"IF123456789",currency:"MGA",language:"fr",timezone:"Africa/Casablanca",quoteValidityDays:30,quotePrefix:"QT"}),[a,c]=V.useState({emailQuoteCreated:!0,emailQuoteConfirmed:!0,emailQuoteDelivered:!0,pushNotifications:!0,weeklyReports:!0,monthlyReports:!1}),u=[{id:"profile",label:"Profil",icon:Qc},{id:"business",label:"Entreprise",icon:wf},{id:"notifications",label:"Notifications",icon:CE},{id:"security",label:"Sécurité",icon:IR},{id:"appearance",label:"Apparence",icon:NR}],d=(v,b)=>{r(P=>({...P,[v]:b}))},f=(v,b)=>{i(P=>({...P,[v]:b}))},m=(v,b)=>{c(P=>({...P,[v]:b}))},g=()=>{console.log("Paramètres sauvegardés")};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Paramètres"}),o.jsxs("button",{onClick:g,className:"btn-primary flex items-center space-x-2",children:[o.jsx(Ou,{className:"w-4 h-4"}),o.jsx("span",{children:"Sauvegarder"})]})]}),o.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[o.jsx("div",{className:"lg:w-64",children:o.jsx("nav",{className:"space-y-1",children:u.map(v=>{const b=v.icon;return o.jsxs("button",{onClick:()=>e(v.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ${t===v.id?"bg-primary-50 text-primary-700 border-r-2 border-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[o.jsx(b,{className:"w-5 h-5 mr-3"}),v.label]},v.id)})})}),o.jsxs("div",{className:"flex-1",children:[t==="profile"&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informations Personnelles"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(Qc,{className:"w-4 h-4 inline mr-1"}),"Nom complet"]}),o.jsx("input",{type:"text",value:n.name,onChange:v=>d("name",v.target.value),className:"input-field"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(xp,{className:"w-4 h-4 inline mr-1"}),"Email"]}),o.jsx("input",{type:"email",value:n.email,onChange:v=>d("email",v.target.value),className:"input-field"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(AE,{className:"w-4 h-4 inline mr-1"}),"Téléphone"]}),o.jsx("input",{type:"tel",value:n.phone,onChange:v=>d("phone",v.target.value),className:"input-field"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(wf,{className:"w-4 h-4 inline mr-1"}),"Entreprise"]}),o.jsx("input",{type:"text",value:n.company,onChange:v=>d("company",v.target.value),className:"input-field"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(bE,{className:"w-4 h-4 inline mr-1"}),"Adresse"]}),o.jsx("textarea",{value:n.address,onChange:v=>d("address",v.target.value),rows:3,className:"input-field"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(IE,{className:"w-4 h-4 inline mr-1"}),"Site web"]}),o.jsx("input",{type:"url",value:n.website,onChange:v=>d("website",v.target.value),className:"input-field"})]})]})]}),t==="business"&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Paramètres Entreprise"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nom de l'entreprise"}),o.jsx("input",{type:"text",value:s.companyName,onChange:v=>f("companyName",v.target.value),className:"input-field"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Identifiant fiscal"}),o.jsx("input",{type:"text",value:s.taxId,onChange:v=>f("taxId",v.target.value),className:"input-field"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[o.jsx(fs,{className:"w-4 h-4 inline mr-1"}),"Devise par défaut"]}),o.jsx("select",{value:s.currency,onChange:v=>f("currency",v.target.value),className:"input-field bg-gray-50",disabled:!0,children:o.jsx("option",{value:"MGA",children:"MGA (Ariary)"})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Langue"}),o.jsxs("select",{value:s.language,onChange:v=>f("language",v.target.value),className:"input-field",children:[o.jsx("option",{value:"fr",children:"Français"}),o.jsx("option",{value:"en",children:"English"}),o.jsx("option",{value:"ar",children:"العربية"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fuseau horaire"}),o.jsxs("select",{value:s.timezone,onChange:v=>f("timezone",v.target.value),className:"input-field",children:[o.jsx("option",{value:"Africa/Casablanca",children:"Africa/Casablanca"}),o.jsx("option",{value:"Europe/Paris",children:"Europe/Paris"}),o.jsx("option",{value:"UTC",children:"UTC"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Validité des devis (jours)"}),o.jsx("input",{type:"number",min:"1",max:"365",value:s.quoteValidityDays,onChange:v=>f("quoteValidityDays",parseInt(v.target.value)),className:"input-field"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Préfixe des devis"}),o.jsx("input",{type:"text",value:s.quotePrefix,onChange:v=>f("quotePrefix",v.target.value),className:"input-field"})]})]})]}),t==="notifications"&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Préférences de Notification"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Notifications Email"}),o.jsx("div",{className:"space-y-3",children:[{key:"emailQuoteCreated",label:"Nouveau devis créé"},{key:"emailQuoteConfirmed",label:"Devis confirmé"},{key:"emailQuoteDelivered",label:"Devis livré"}].map(({key:v,label:b})=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-700",children:b}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:a[v],onChange:P=>m(v,P.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},v))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Autres Notifications"}),o.jsx("div",{className:"space-y-3",children:[{key:"pushNotifications",label:"Notifications push"},{key:"weeklyReports",label:"Rapports hebdomadaires"},{key:"monthlyReports",label:"Rapports mensuels"}].map(({key:v,label:b})=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-sm text-gray-700",children:b}),o.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:a[v],onChange:P=>m(v,P.target.checked),className:"sr-only peer"}),o.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]},v))})]})]})]}),t==="security"&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Sécurité"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Changer le mot de passe"}),o.jsxs("div",{className:"space-y-4 max-w-md",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mot de passe actuel"}),o.jsx("input",{type:"password",className:"input-field",placeholder:"••••••••"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau mot de passe"}),o.jsx("input",{type:"password",className:"input-field",placeholder:"••••••••"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmer le nouveau mot de passe"}),o.jsx("input",{type:"password",className:"input-field",placeholder:"••••••••"})]}),o.jsx("button",{className:"btn-primary",children:"Mettre à jour le mot de passe"})]})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[o.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Authentification à deux facteurs"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Ajoutez une couche de sécurité supplémentaire à votre compte."}),o.jsx("button",{className:"btn-secondary",children:"Activer l'authentification à deux facteurs"})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[o.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Sessions actives"}),o.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Gérez vos sessions actives sur différents appareils."}),o.jsx("div",{className:"space-y-3",children:o.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Session actuelle"}),o.jsx("p",{className:"text-xs text-gray-500",children:"Chrome sur Windows • Casablanca, Maroc"})]}),o.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Actif"})]})})]})]})]}),t==="appearance"&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Apparence"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Thème"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{id:"light",name:"Clair",description:"Thème clair par défaut"},{id:"dark",name:"Sombre",description:"Thème sombre pour les yeux"},{id:"auto",name:"Automatique",description:"Suit les préférences système"}].map(v=>o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"radio",id:v.id,name:"theme",defaultChecked:v.id==="light",className:"sr-only peer"}),o.jsxs("label",{htmlFor:v.id,className:"flex flex-col p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-primary-300 peer-checked:border-primary-600 peer-checked:bg-primary-50",children:[o.jsx("span",{className:"font-medium text-gray-900",children:v.name}),o.jsx("span",{className:"text-sm text-gray-500",children:v.description})]})]},v.id))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Couleur d'accent"}),o.jsx("div",{className:"flex space-x-3",children:[{color:"bg-blue-600",name:"Bleu"},{color:"bg-green-600",name:"Vert"},{color:"bg-purple-600",name:"Violet"},{color:"bg-red-600",name:"Rouge"},{color:"bg-orange-600",name:"Orange"}].map(v=>o.jsx("button",{className:`w-8 h-8 rounded-full ${v.color} ring-2 ring-offset-2 ring-transparent hover:ring-gray-300 focus:ring-gray-400`,title:v.name},v.name))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:"Densité d'affichage"}),o.jsx("div",{className:"space-y-2",children:[{id:"comfortable",name:"Confortable",description:"Plus d'espace entre les éléments"},{id:"compact",name:"Compact",description:"Moins d'espace, plus de contenu visible"}].map(v=>o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"radio",id:v.id,name:"density",defaultChecked:v.id==="comfortable",className:"w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500"}),o.jsxs("label",{htmlFor:v.id,className:"ml-3",children:[o.jsx("span",{className:"text-sm font-medium text-gray-900",children:v.name}),o.jsx("p",{className:"text-xs text-gray-500",children:v.description})]})]},v.id))})]})]})]})]})]})]})},U4=()=>{const t=Xn(),[e]=Q_(),{saveCalculation:n,hasCalculation:r,calculationData:s}=FE(),{calculations:i,getCalculationById:a}=UE(),c=e.get("edit"),u=!!c,[d,f]=V.useState({USD:4500,EUR:4900,CNY:620}),[m,g]=V.useState([{id:1,description:"",quantity:1,purchasePrice:0,mainCurrency:"USD",transportFees:0,transportFeesOriginal:0,transportCurrency:"USD",miscFees:0,customsFees:0,margin:20,sellingPrice:0,originCountry:"Chine"}]);V.useEffect(()=>{if(c&&i.length>0){const y=a(c);if(y){f(y.exchangeRates);const N=y.items.map((C,I)=>({id:I+1,description:C.description,quantity:C.quantity,purchasePrice:C.purchasePrice,mainCurrency:C.mainCurrency,transportFees:C.transportFees,transportFeesOriginal:C.transportFeesOriginal,transportCurrency:C.transportCurrency,miscFees:C.miscFees,customsFees:C.customsFees,margin:C.margin||20,sellingPrice:C.sellingPrice,originCountry:C.originCountry}));g(N)}}},[c,i,a]);const v=(y,N)=>N==="MGA"?y:y*d[N],b=y=>{const N=v(y.purchasePrice,y.mainCurrency),C=v(y.transportFeesOriginal,y.transportCurrency),I=N*y.quantity+C+y.miscFees+y.customsFees;return I+I*y.margin/100},P=(y,N)=>{const C=Oe(N);f(I=>({...I,[y]:C})),g(I=>I.map(_=>({..._,transportFees:v(_.transportFeesOriginal,_.transportCurrency),sellingPrice:b({..._,transportFees:v(_.transportFeesOriginal,_.transportCurrency)})})))},k=(y,N,C)=>{g(I=>I.map((_,T)=>{if(T===y){const D={..._,[N]:C};return N==="originCountry"&&(C==="Chine"?(D.transportCurrency="MGA",D.transportFeesOriginal=D.transportFees):(D.transportCurrency="USD",D.transportFeesOriginal=D.transportFees/d.USD)),(N==="transportFeesOriginal"||N==="transportCurrency")&&(D.transportFees=v(N==="transportFeesOriginal"?C:D.transportFeesOriginal,N==="transportCurrency"?C:D.transportCurrency)),D.sellingPrice=b(D),D}return _}))},S=()=>{g(y=>[...y,{id:Date.now(),description:"",quantity:1,purchasePrice:0,mainCurrency:"USD",transportFees:0,transportFeesOriginal:0,transportCurrency:"USD",miscFees:0,customsFees:0,margin:20,sellingPrice:0,originCountry:"Chine"}])},x=y=>{m.length>1&&g(N=>N.filter((C,I)=>I!==y))},w=y=>v(y.purchasePrice,y.mainCurrency)*y.quantity+y.transportFees+y.miscFees+y.customsFees,j=y=>w(y)*y.margin/100,O=["Chine","États-Unis","Allemagne","France","Italie","Japon","Corée du Sud","Royaume-Uni","Espagne","Pays-Bas","Belgique","Autre"],U=()=>{const y=m.reduce((I,_)=>I+w(_),0),N=m.reduce((I,_)=>I+j(_),0),C=m.reduce((I,_)=>I+_.sellingPrice,0);n({items:m.map(I=>({...I,weight:I.weight||0,dimensions:I.dimensions||{length:0,width:0,height:0},hsCode:I.hsCode||"",category:I.category||"",productLink:I.productLink||""})),exchangeRates:d,totalCost:y,totalMargin:N,totalSellingPrice:C}),t("/quotes/new?from=cost-calculation")},A=()=>{const y=m.reduce((I,_)=>I+w(_),0),N=m.reduce((I,_)=>I+j(_),0),C=m.reduce((I,_)=>I+_.sellingPrice,0);n({items:m.map(I=>({...I,weight:I.weight||0,dimensions:I.dimensions||{length:0,width:0,height:0},hsCode:I.hsCode||"",category:I.category||"",productLink:I.productLink||""})),exchangeRates:d,totalCost:y,totalMargin:N,totalSellingPrice:C}),alert("Calcul sauvegardé avec succès !")};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(Ef,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:u?"Modifier le Calcul":"Calcul des Coûts"}),u&&o.jsx("p",{className:"text-sm text-gray-500",children:"Modification du calcul • Les modifications seront sauvegardées comme un nouveau calcul"})]})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:S,className:"btn-secondary flex items-center space-x-2",children:[o.jsx($r,{className:"w-4 h-4"}),o.jsx("span",{children:"Ajouter un article"})]}),o.jsxs("button",{onClick:A,className:"btn-secondary flex items-center space-x-2",children:[o.jsx(Ou,{className:"w-4 h-4"}),o.jsx("span",{children:u?"Sauvegarder comme nouveau":"Sauvegarder"})]}),o.jsxs("button",{onClick:U,className:"btn-primary flex items-center space-x-2",disabled:m.length===0||m.some(y=>!y.description.trim()),children:[o.jsx(pn,{className:"w-4 h-4"}),o.jsx("span",{children:"Créer un devis"}),o.jsx(_f,{className:"w-4 h-4"})]})]})]}),u?o.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:o.jsx(Mu,{className:"w-5 h-5 text-orange-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-orange-900",children:"Mode édition"}),o.jsx("p",{className:"text-sm text-orange-700",children:"Vous modifiez un calcul existant. Les modifications seront sauvegardées comme un nouveau calcul dans votre historique."})]}),o.jsx("div",{className:"flex space-x-2",children:o.jsxs("button",{onClick:()=>t("/cost-history"),className:"btn-secondary text-sm flex items-center space-x-2",children:[o.jsx(Eo,{className:"w-4 h-4"}),o.jsx("span",{children:"Retour à l'historique"})]})})]})}):r()&&s||i.length>0?o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:o.jsx(Ef,{className:"w-5 h-5 text-blue-600"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm font-medium text-blue-900",children:r()&&s?"Calcul précédent disponible":"Historique des calculs"}),r()&&s?o.jsxs("p",{className:"text-sm text-blue-700",children:["Dernière sauvegarde : ",s.calculatedAt.toLocaleString("fr-FR"),"• ",s.items.length," article(s) • Total : ",$(Math.round(s.totalSellingPrice))," Ar"]}):o.jsxs("p",{className:"text-sm text-blue-700",children:[i.length," calcul",i.length>1?"s":""," sauvegardé",i.length>1?"s":""]})]}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsxs("button",{onClick:()=>t("/cost-history"),className:"btn-secondary text-sm flex items-center space-x-2",children:[o.jsx(Eo,{className:"w-4 h-4"}),o.jsx("span",{children:"Voir l'historique"})]}),r()&&s&&o.jsxs("button",{onClick:()=>t("/quotes/new?from=cost-calculation"),className:"btn-primary text-sm flex items-center space-x-2",children:[o.jsx(pn,{className:"w-4 h-4"}),o.jsx("span",{children:"Utiliser pour un devis"})]})]})]})}):null,o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[o.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:o.jsx(_p,{className:"w-5 h-5 text-green-600"})}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Cours du Jour"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"USD → MGA"}),o.jsxs("div",{className:"relative",children:[o.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),o.jsx("input",{type:"text",value:$(d.USD),onChange:y=>P("USD",y.target.value),className:"pl-10 input-field",placeholder:"4 500"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"EUR → MGA"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:"€"}),o.jsx("input",{type:"text",value:$(d.EUR),onChange:y=>P("EUR",y.target.value),className:"pl-10 input-field",placeholder:"4 900"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CNY → MGA"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:"¥"}),o.jsx("input",{type:"text",value:$(d.CNY),onChange:y=>P("CNY",y.target.value),className:"pl-10 input-field",placeholder:"620"})]})]})]})]}),o.jsx("div",{className:"space-y-6",children:m.map((y,N)=>o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Article ",N+1]}),m.length>1&&o.jsx("button",{onClick:()=>x(N),className:"text-red-600 hover:text-red-800 p-2 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Supprimer cet article",children:o.jsx($o,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-md font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200 flex items-center",children:[o.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium mr-2",children:"📝"}),"Informations de base"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description de l'article"}),o.jsx("input",{type:"text",value:y.description,onChange:C=>k(N,"description",C.target.value),className:"input-field",placeholder:"Description de l'article..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pays d'origine"}),o.jsx("select",{value:y.originCountry,onChange:C=>k(N,"originCountry",C.target.value),className:"input-field",children:O.map(C=>o.jsx("option",{value:C,children:C},C))})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-md font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200 flex items-center",children:[o.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-sm font-medium mr-2",children:"💰"}),"Prix et quantité"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantité"}),o.jsx("input",{type:"text",value:$(y.quantity),onChange:C=>k(N,"quantity",Oe(C.target.value)),className:"input-field",placeholder:"1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Devise principale articles"}),o.jsxs("select",{value:y.mainCurrency,onChange:C=>k(N,"mainCurrency",C.target.value),className:"input-field",children:[o.jsx("option",{value:"USD",children:"USD ($)"}),o.jsx("option",{value:"EUR",children:"EUR (€)"}),o.jsx("option",{value:"CNY",children:"CNY (¥)"})]})]}),o.jsxs("div",{className:"sm:col-span-2",children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Prix d'achat unitaire (",y.mainCurrency,")"]}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:y.mainCurrency==="USD"?"$":y.mainCurrency==="EUR"?"€":"¥"}),o.jsx("input",{type:"text",value:$(y.purchasePrice),onChange:C=>k(N,"purchasePrice",Oe(C.target.value)),className:"pl-10 input-field",placeholder:"0"})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Équivalent: ",$(Math.round(v(y.purchasePrice,y.mainCurrency)))," Ar"]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-md font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200 flex items-center",children:[o.jsx("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-sm font-medium mr-2",children:"🚚"}),"Frais de transport"]}),y.originCountry==="Chine"?o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frais de transport (MGA)"}),o.jsx("input",{type:"text",value:$(y.transportFeesOriginal),onChange:C=>{const I=Oe(C.target.value);k(N,"transportFeesOriginal",I),k(N,"transportFees",I),k(N,"transportCurrency","MGA")},className:"input-field",placeholder:"0"})]}):o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Devise transport"}),o.jsxs("select",{value:y.transportCurrency,onChange:C=>k(N,"transportCurrency",C.target.value),className:"input-field",children:[o.jsx("option",{value:"USD",children:"USD ($)"}),o.jsx("option",{value:"EUR",children:"EUR (€)"}),o.jsx("option",{value:"CNY",children:"CNY (¥)"})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Frais de transport (",y.transportCurrency,")"]}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:y.transportCurrency==="USD"?"$":y.transportCurrency==="EUR"?"€":"¥"}),o.jsx("input",{type:"text",value:$(y.transportFeesOriginal),onChange:C=>k(N,"transportFeesOriginal",Oe(C.target.value)),className:"pl-10 input-field",placeholder:"0"})]}),o.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Équivalent: ",$(Math.round(y.transportFees))," Ar"]})]})]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-md font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200 flex items-center",children:[o.jsx("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-sm font-medium mr-2",children:"📋"}),"Autres frais et marge"]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frais divers (Ar)"}),o.jsx("input",{type:"text",value:$(y.miscFees),onChange:C=>k(N,"miscFees",Oe(C.target.value)),className:"input-field",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frais de douane (Ar)"}),o.jsx("input",{type:"text",value:$(y.customsFees),onChange:C=>k(N,"customsFees",Oe(C.target.value)),className:"input-field",placeholder:"0"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Marge (%)"}),o.jsx("input",{type:"text",value:$(y.margin),onChange:C=>k(N,"margin",Oe(C.target.value)),className:"input-field",placeholder:"20"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border-2 border-blue-200",children:[o.jsxs("h3",{className:"text-md font-medium text-gray-900 mb-4 pb-2 border-b border-blue-200 flex items-center",children:[o.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-sm font-medium mr-2",children:"💰"}),"Résultats du calcul"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Prix d'achat total :"}),o.jsxs("span",{className:"font-medium text-gray-900",children:[$(Math.round(v(y.purchasePrice,y.mainCurrency)*y.quantity))," Ar"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Frais de transport :"}),o.jsxs("span",{className:"font-medium text-gray-900",children:[$(Math.round(y.transportFees))," Ar"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Autres frais :"}),o.jsxs("span",{className:"font-medium text-gray-900",children:[$(y.miscFees+y.customsFees)," Ar"]})]}),o.jsxs("div",{className:"flex justify-between items-center border-t border-blue-200 pt-3",children:[o.jsx("span",{className:"text-sm text-gray-600",children:"Coût total :"}),o.jsxs("span",{className:"font-medium text-gray-900",children:[$(Math.round(w(y)))," Ar"]})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("span",{className:"text-sm text-gray-600",children:["Marge (",$(y.margin),"%) :"]}),o.jsxs("span",{className:"font-medium text-blue-600",children:["+",$(Math.round(j(y)))," Ar"]})]}),o.jsx("div",{className:"border-t border-blue-200 pt-3",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Prix de vente :"}),o.jsxs("span",{className:"text-2xl font-bold text-green-600",children:[$(Math.round(y.sellingPrice))," Ar"]})]})}),o.jsxs("div",{className:"mt-4 p-4 bg-white rounded-lg border border-blue-200",children:[o.jsx("p",{className:"text-xs text-gray-500 mb-3 font-medium",children:"Détail du calcul :"}),o.jsxs("div",{className:"font-mono text-xs text-gray-700 space-y-1.5",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Prix unitaire (",y.mainCurrency,"):"]}),o.jsxs("span",{children:[$(y.purchasePrice)," ",y.mainCurrency]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"× Quantité:"}),o.jsx("span",{children:$(y.quantity)})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["= Sous-total (",y.mainCurrency,"):"]}),o.jsxs("span",{children:[$(y.purchasePrice*y.quantity)," ",y.mainCurrency]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["Conversion (taux ",$(d[y.mainCurrency]),"):"]}),o.jsxs("span",{children:[$(Math.round(v(y.purchasePrice*y.quantity,y.mainCurrency)))," Ar"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"+ Transport:"}),o.jsxs("span",{children:[$(Math.round(y.transportFees))," Ar"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"+ Frais divers:"}),o.jsxs("span",{children:[$(y.miscFees)," Ar"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"+ Frais douane:"}),o.jsxs("span",{children:[$(y.customsFees)," Ar"]})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-1.5 flex justify-between font-medium",children:[o.jsx("span",{children:"= Coût total:"}),o.jsxs("span",{children:[$(Math.round(w(y)))," Ar"]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsxs("span",{children:["+ Marge (",$(y.margin),"%):"]}),o.jsxs("span",{children:[$(Math.round(j(y)))," Ar"]})]}),o.jsxs("div",{className:"border-t border-gray-200 pt-1.5 flex justify-between font-bold text-green-600",children:[o.jsx("span",{children:"= Prix de vente:"}),o.jsxs("span",{children:[$(Math.round(y.sellingPrice))," Ar"]})]})]})]})]})]})]})]},y.id))}),m.length>1&&o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[o.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[o.jsx("span",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-3 py-1 rounded-full text-sm font-medium mr-3",children:"📊"}),"Résumé Global"]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Articles"}),o.jsx("p",{className:"text-2xl font-bold text-gray-900",children:$(m.length)})]}),o.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-red-50 to-pink-100 rounded-xl",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Coût total"}),o.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[$(Math.round(m.reduce((y,N)=>y+w(N),0)))," Ar"]})]}),o.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-cyan-100 rounded-xl",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Marge totale"}),o.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[$(Math.round(m.reduce((y,N)=>y+j(N),0)))," Ar"]})]}),o.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Prix de vente total"}),o.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[$(Math.round(m.reduce((y,N)=>y+N.sellingPrice,0)))," Ar"]})]})]}),o.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-neutral-50 to-gray-50 rounded-xl",children:[o.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Répartition par devise :"}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm",children:["USD","EUR","CNY"].map(y=>{const C=m.filter(_=>_.mainCurrency===y).reduce((_,T)=>_+T.purchasePrice*T.quantity,0),I=v(C,y);return C===0?null:o.jsxs("div",{className:"text-center p-3 bg-white rounded-lg border border-gray-200",children:[o.jsx("p",{className:"text-gray-500",children:y}),o.jsxs("p",{className:"font-semibold text-gray-900",children:[$(C)," ",y]}),o.jsxs("p",{className:"text-xs text-gray-500",children:["≈ ",$(Math.round(I))," Ar"]})]},y)})})]})]})]})};function $4(){const[t,e,n]=B1(wo);return console.log("App component rendering..."),e?o.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Gi,{size:"lg"}),o.jsx("p",{className:"mt-4 text-gray-600",children:"Chargement..."})]})}):(n&&console.error("Authentication error:",n),o.jsx("div",{className:"min-h-screen bg-gray-50",children:o.jsx(BS,{children:o.jsxs(Vy,{children:[o.jsx(Lt,{path:"/login",element:o.jsx(gv,{})}),o.jsx(Lt,{path:"/*",element:t?o.jsx(jR,{children:o.jsxs(Vy,{children:[o.jsx(Lt,{path:"/",element:o.jsx(k4,{})}),o.jsx(Lt,{path:"/quotes",element:o.jsx(R4,{})}),o.jsx(Lt,{path:"/quotes/new",element:o.jsx(D4,{})}),o.jsx(Lt,{path:"/quotes/edit/:id",element:o.jsx(M4,{})}),o.jsx(Lt,{path:"/cost-calculation",element:o.jsx(U4,{})}),o.jsx(Lt,{path:"/cost-history",element:o.jsx(O4,{})}),o.jsx(Lt,{path:"/clients",element:o.jsx(V4,{})}),o.jsx(Lt,{path:"/analytics",element:o.jsx(L4,{})}),o.jsx(Lt,{path:"/settings",element:o.jsx(F4,{})})]})}):o.jsx(gv,{})})]})})}))}const Ev=document.getElementById("root");Ev?Kd.createRoot(Ev).render(o.jsx(Rv.StrictMode,{children:o.jsx($4,{})})):console.error("Root element not found");
